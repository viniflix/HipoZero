import{r as t,aP as Wt,j as e,R as St,a as Xt,u as Yt,C as Q,e as Z,c as mt,d as ht,w as pt,B as D,X as qt,L as ft,ai as Gt,aj as Qt,ak as Zt,al as Kt,au as Jt,M as er,s as we}from"./index-BR6RRKhy.js";import{I as x}from"./input-Dw1LZ4d-.js";import{L as v}from"./label-CMl3sQfF.js";import{B as tr}from"./badge-DqtpEwzX.js";import{P as rr}from"./progress-CEg4uOya.js";import{T as or,a as sr,b as gt,c as bt}from"./tabs-BrrTuIi-.js";import{_ as N}from"./extends-CF3RwP-h.js";import{c as ar}from"./foodService-DVDJOfWQ.js";import{I as te}from"./info-CBT9DKKF.js";import{P as nr}from"./plus-DNhEjNKI.js";import{S as vt}from"./search-Diz8sOGw.js";import{C as lr}from"./chevron-left-DDwluKWd.js";import{C as cr}from"./check-circle-2-DSGM8FJf.js";function ir(r,o){typeof r=="function"?r(o):r!=null&&(r.current=o)}function jt(...r){return o=>r.forEach(a=>ir(a,o))}function U(...r){return t.useCallback(jt(...r),r)}const Ct=t.forwardRef((r,o)=>{const{children:a,...l}=r,n=t.Children.toArray(a),d=n.find(ur);if(d){const i=d.props.children,u=n.map(c=>c===d?t.Children.count(i)>1?t.Children.only(null):t.isValidElement(i)?i.props.children:null:c);return t.createElement(_e,N({},l,{ref:o}),t.isValidElement(i)?t.cloneElement(i,void 0,u):null)}return t.createElement(_e,N({},l,{ref:o}),a)});Ct.displayName="Slot";const _e=t.forwardRef((r,o)=>{const{children:a,...l}=r;return t.isValidElement(a)?t.cloneElement(a,{...mr(l,a.props),ref:o?jt(o,a.ref):a.ref}):t.Children.count(a)>1?t.Children.only(null):null});_e.displayName="SlotClone";const dr=({children:r})=>t.createElement(t.Fragment,null,r);function ur(r){return t.isValidElement(r)&&r.type===dr}function mr(r,o){const a={...o};for(const l in o){const n=r[l],d=o[l];/^on[A-Z]/.test(l)?n&&d?a[l]=(...u)=>{d(...u),n(...u)}:n&&(a[l]=n):l==="style"?a[l]={...n,...d}:l==="className"&&(a[l]=[n,d].filter(Boolean).join(" "))}return{...r,...a}}const hr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],K=hr.reduce((r,o)=>{const a=t.forwardRef((l,n)=>{const{asChild:d,...i}=l,u=d?Ct:o;return t.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),t.createElement(u,N({},i,{ref:n}))});return a.displayName=`Primitive.${o}`,{...r,[o]:a}},{}),Ee=globalThis?.document?t.useLayoutEffect:()=>{};function pr(r,o){return t.useReducer((a,l)=>{const n=o[a][l];return n??a},r)}const J=r=>{const{present:o,children:a}=r,l=fr(o),n=typeof a=="function"?a({present:l.isPresent}):t.Children.only(a),d=U(l.ref,n.ref);return typeof a=="function"||l.isPresent?t.cloneElement(n,{ref:d}):null};J.displayName="Presence";function fr(r){const[o,a]=t.useState(),l=t.useRef({}),n=t.useRef(r),d=t.useRef("none"),i=r?"mounted":"unmounted",[u,c]=pr(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return t.useEffect(()=>{const h=re(l.current);d.current=u==="mounted"?h:"none"},[u]),Ee(()=>{const h=l.current,p=n.current;if(p!==r){const f=d.current,b=re(h);r?c("MOUNT"):b==="none"||h?.display==="none"?c("UNMOUNT"):c(p&&f!==b?"ANIMATION_OUT":"UNMOUNT"),n.current=r}},[r,c]),Ee(()=>{if(o){const h=g=>{const b=re(l.current).includes(g.animationName);g.target===o&&b&&Wt.flushSync(()=>c("ANIMATION_END"))},p=g=>{g.target===o&&(d.current=re(l.current))};return o.addEventListener("animationstart",p),o.addEventListener("animationcancel",h),o.addEventListener("animationend",h),()=>{o.removeEventListener("animationstart",p),o.removeEventListener("animationcancel",h),o.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[o,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:t.useCallback(h=>{h&&(l.current=getComputedStyle(h)),a(h)},[])}}function re(r){return r?.animationName||"none"}function gr(r,o=[]){let a=[];function l(d,i){const u=t.createContext(i),c=a.length;a=[...a,i];function h(g){const{scope:f,children:b,...C}=g,w=f?.[r][c]||u,M=t.useMemo(()=>C,Object.values(C));return t.createElement(w.Provider,{value:M},b)}function p(g,f){const b=f?.[r][c]||u,C=t.useContext(b);if(C)return C;if(i!==void 0)return i;throw new Error(`\`${g}\` must be used within \`${d}\``)}return h.displayName=d+"Provider",[h,p]}const n=()=>{const d=a.map(i=>t.createContext(i));return function(u){const c=u?.[r]||d;return t.useMemo(()=>({[`__scope${r}`]:{...u,[r]:c}}),[u,c])}};return n.scopeName=r,[l,br(n,...o)]}function br(...r){const o=r[0];if(r.length===1)return o;const a=()=>{const l=r.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(d){const i=l.reduce((u,{useScope:c,scopeName:h})=>{const g=c(d)[`__scope${h}`];return{...u,...g}},{});return t.useMemo(()=>({[`__scope${o.scopeName}`]:i}),[i])}};return a.scopeName=o.scopeName,a}function B(r){const o=t.useRef(r);return t.useEffect(()=>{o.current=r}),t.useMemo(()=>(...a)=>{var l;return(l=o.current)===null||l===void 0?void 0:l.call(o,...a)},[])}const vr=t.createContext(void 0);function xr(r){const o=t.useContext(vr);return r||o||"ltr"}function Sr(r,[o,a]){return Math.min(a,Math.max(o,r))}function H(r,o,{checkForDefaultPrevented:a=!0}={}){return function(n){if(r?.(n),a===!1||!n.defaultPrevented)return o?.(n)}}function jr(r,o){return t.useReducer((a,l)=>{const n=o[a][l];return n??a},r)}const Nt="ScrollArea",[$t]=gr(Nt),[Cr,F]=$t(Nt),Nr=t.forwardRef((r,o)=>{const{__scopeScrollArea:a,type:l="hover",dir:n,scrollHideDelay:d=600,...i}=r,[u,c]=t.useState(null),[h,p]=t.useState(null),[g,f]=t.useState(null),[b,C]=t.useState(null),[w,M]=t.useState(null),[$,V]=t.useState(0),[A,k]=t.useState(0),[_,z]=t.useState(!1),[E,O]=t.useState(!1),S=U(o,T=>c(T)),y=xr(n);return t.createElement(Cr,{scope:a,type:l,dir:y,scrollHideDelay:d,scrollArea:u,viewport:h,onViewportChange:p,content:g,onContentChange:f,scrollbarX:b,onScrollbarXChange:C,scrollbarXEnabled:_,onScrollbarXEnabledChange:z,scrollbarY:w,onScrollbarYChange:M,scrollbarYEnabled:E,onScrollbarYEnabledChange:O,onCornerWidthChange:V,onCornerHeightChange:k},t.createElement(K.div,N({dir:y},i,{ref:S,style:{position:"relative","--radix-scroll-area-corner-width":$+"px","--radix-scroll-area-corner-height":A+"px",...r.style}})))}),$r="ScrollAreaViewport",yr=t.forwardRef((r,o)=>{const{__scopeScrollArea:a,children:l,...n}=r,d=F($r,a),i=t.useRef(null),u=U(o,i,d.onViewportChange);return t.createElement(t.Fragment,null,t.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),t.createElement(K.div,N({"data-radix-scroll-area-viewport":""},n,{ref:u,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...r.style}}),t.createElement("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"}},l)))}),L="ScrollAreaScrollbar",yt=t.forwardRef((r,o)=>{const{forceMount:a,...l}=r,n=F(L,r.__scopeScrollArea),{onScrollbarXEnabledChange:d,onScrollbarYEnabledChange:i}=n,u=r.orientation==="horizontal";return t.useEffect(()=>(u?d(!0):i(!0),()=>{u?d(!1):i(!1)}),[u,d,i]),n.type==="hover"?t.createElement(wr,N({},l,{ref:o,forceMount:a})):n.type==="scroll"?t.createElement(_r,N({},l,{ref:o,forceMount:a})):n.type==="auto"?t.createElement(wt,N({},l,{ref:o,forceMount:a})):n.type==="always"?t.createElement(Ae,N({},l,{ref:o})):null}),wr=t.forwardRef((r,o)=>{const{forceMount:a,...l}=r,n=F(L,r.__scopeScrollArea),[d,i]=t.useState(!1);return t.useEffect(()=>{const u=n.scrollArea;let c=0;if(u){const h=()=>{window.clearTimeout(c),i(!0)},p=()=>{c=window.setTimeout(()=>i(!1),n.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",p),()=>{window.clearTimeout(c),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",p)}}},[n.scrollArea,n.scrollHideDelay]),t.createElement(J,{present:a||d},t.createElement(wt,N({"data-state":d?"visible":"hidden"},l,{ref:o})))}),_r=t.forwardRef((r,o)=>{const{forceMount:a,...l}=r,n=F(L,r.__scopeScrollArea),d=r.orientation==="horizontal",i=ae(()=>c("SCROLL_END"),100),[u,c]=jr("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return t.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>c("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,n.scrollHideDelay,c]),t.useEffect(()=>{const h=n.viewport,p=d?"scrollLeft":"scrollTop";if(h){let g=h[p];const f=()=>{const b=h[p];g!==b&&(c("SCROLL"),i()),g=b};return h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[n.viewport,d,c,i]),t.createElement(J,{present:a||u!=="hidden"},t.createElement(Ae,N({"data-state":u==="hidden"?"hidden":"visible"},l,{ref:o,onPointerEnter:H(r.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:H(r.onPointerLeave,()=>c("POINTER_LEAVE"))})))}),wt=t.forwardRef((r,o)=>{const a=F(L,r.__scopeScrollArea),{forceMount:l,...n}=r,[d,i]=t.useState(!1),u=r.orientation==="horizontal",c=ae(()=>{if(a.viewport){const h=a.viewport.offsetWidth<a.viewport.scrollWidth,p=a.viewport.offsetHeight<a.viewport.scrollHeight;i(u?h:p)}},10);return q(a.viewport,c),q(a.content,c),t.createElement(J,{present:l||d},t.createElement(Ae,N({"data-state":d?"visible":"hidden"},n,{ref:o})))}),Ae=t.forwardRef((r,o)=>{const{orientation:a="vertical",...l}=r,n=F(L,r.__scopeScrollArea),d=t.useRef(null),i=t.useRef(0),[u,c]=t.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=At(u.viewport,u.content),p={...l,sizes:u,onSizesChange:c,hasThumb:h>0&&h<1,onThumbChange:f=>d.current=f,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:f=>i.current=f};function g(f,b){return zr(f,i.current,u,b)}return a==="horizontal"?t.createElement(Er,N({},p,{ref:o,onThumbPositionChange:()=>{if(n.viewport&&d.current){const f=n.viewport.scrollLeft,b=xt(f,u,n.dir);d.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:f=>{n.viewport&&(n.viewport.scrollLeft=f)},onDragScroll:f=>{n.viewport&&(n.viewport.scrollLeft=g(f,n.dir))}})):a==="vertical"?t.createElement(Pr,N({},p,{ref:o,onThumbPositionChange:()=>{if(n.viewport&&d.current){const f=n.viewport.scrollTop,b=xt(f,u);d.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:f=>{n.viewport&&(n.viewport.scrollTop=f)},onDragScroll:f=>{n.viewport&&(n.viewport.scrollTop=g(f))}})):null}),Er=t.forwardRef((r,o)=>{const{sizes:a,onSizesChange:l,...n}=r,d=F(L,r.__scopeScrollArea),[i,u]=t.useState(),c=t.useRef(null),h=U(o,c,d.onScrollbarXChange);return t.useEffect(()=>{c.current&&u(getComputedStyle(c.current))},[c]),t.createElement(Et,N({"data-orientation":"horizontal"},n,{ref:h,sizes:a,style:{bottom:0,left:d.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:d.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":se(a)+"px",...r.style},onThumbPointerDown:p=>r.onThumbPointerDown(p.x),onDragScroll:p=>r.onDragScroll(p.x),onWheelScroll:(p,g)=>{if(d.viewport){const f=d.viewport.scrollLeft+p.deltaX;r.onWheelScroll(f),Ft(f,g)&&p.preventDefault()}},onResize:()=>{c.current&&d.viewport&&i&&l({content:d.viewport.scrollWidth,viewport:d.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:oe(i.paddingLeft),paddingEnd:oe(i.paddingRight)}})}}))}),Pr=t.forwardRef((r,o)=>{const{sizes:a,onSizesChange:l,...n}=r,d=F(L,r.__scopeScrollArea),[i,u]=t.useState(),c=t.useRef(null),h=U(o,c,d.onScrollbarYChange);return t.useEffect(()=>{c.current&&u(getComputedStyle(c.current))},[c]),t.createElement(Et,N({"data-orientation":"vertical"},n,{ref:h,sizes:a,style:{top:0,right:d.dir==="ltr"?0:void 0,left:d.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":se(a)+"px",...r.style},onThumbPointerDown:p=>r.onThumbPointerDown(p.y),onDragScroll:p=>r.onDragScroll(p.y),onWheelScroll:(p,g)=>{if(d.viewport){const f=d.viewport.scrollTop+p.deltaY;r.onWheelScroll(f),Ft(f,g)&&p.preventDefault()}},onResize:()=>{c.current&&d.viewport&&i&&l({content:d.viewport.scrollHeight,viewport:d.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:oe(i.paddingTop),paddingEnd:oe(i.paddingBottom)}})}}))}),[Ar,_t]=$t(L),Et=t.forwardRef((r,o)=>{const{__scopeScrollArea:a,sizes:l,hasThumb:n,onThumbChange:d,onThumbPointerUp:i,onThumbPointerDown:u,onThumbPositionChange:c,onDragScroll:h,onWheelScroll:p,onResize:g,...f}=r,b=F(L,a),[C,w]=t.useState(null),M=U(o,S=>w(S)),$=t.useRef(null),V=t.useRef(""),A=b.viewport,k=l.content-l.viewport,_=B(p),z=B(c),E=ae(g,10);function O(S){if($.current){const y=S.clientX-$.current.left,T=S.clientY-$.current.top;h({x:y,y:T})}}return t.useEffect(()=>{const S=y=>{const T=y.target;C?.contains(T)&&_(y,k)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[A,C,k,_]),t.useEffect(z,[l,z]),q(C,E),q(b.content,E),t.createElement(Ar,{scope:a,scrollbar:C,hasThumb:n,onThumbChange:B(d),onThumbPointerUp:B(i),onThumbPositionChange:z,onThumbPointerDown:B(u)},t.createElement(K.div,N({},f,{ref:M,style:{position:"absolute",...f.style},onPointerDown:H(r.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),$.current=C.getBoundingClientRect(),V.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),O(S))}),onPointerMove:H(r.onPointerMove,O),onPointerUp:H(r.onPointerUp,S=>{const y=S.target;y.hasPointerCapture(S.pointerId)&&y.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=V.current,b.viewport&&(b.viewport.style.scrollBehavior=""),$.current=null})})))}),Pe="ScrollAreaThumb",Tr=t.forwardRef((r,o)=>{const{forceMount:a,...l}=r,n=_t(Pe,r.__scopeScrollArea);return t.createElement(J,{present:a||n.hasThumb},t.createElement(Fr,N({ref:o},l)))}),Fr=t.forwardRef((r,o)=>{const{__scopeScrollArea:a,style:l,...n}=r,d=F(Pe,a),i=_t(Pe,a),{onThumbPositionChange:u}=i,c=U(o,g=>i.onThumbChange(g)),h=t.useRef(),p=ae(()=>{h.current&&(h.current(),h.current=void 0)},100);return t.useEffect(()=>{const g=d.viewport;if(g){const f=()=>{if(p(),!h.current){const b=Lr(g,u);h.current=b,u()}};return u(),g.addEventListener("scroll",f),()=>g.removeEventListener("scroll",f)}},[d.viewport,p,u]),t.createElement(K.div,N({"data-state":i.hasThumb?"visible":"hidden"},n,{ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:H(r.onPointerDownCapture,g=>{const b=g.target.getBoundingClientRect(),C=g.clientX-b.left,w=g.clientY-b.top;i.onThumbPointerDown({x:C,y:w})}),onPointerUp:H(r.onPointerUp,i.onThumbPointerUp)}))}),Pt="ScrollAreaCorner",Rr=t.forwardRef((r,o)=>{const a=F(Pt,r.__scopeScrollArea),l=!!(a.scrollbarX&&a.scrollbarY);return a.type!=="scroll"&&l?t.createElement(Mr,N({},r,{ref:o})):null}),Mr=t.forwardRef((r,o)=>{const{__scopeScrollArea:a,...l}=r,n=F(Pt,a),[d,i]=t.useState(0),[u,c]=t.useState(0),h=!!(d&&u);return q(n.scrollbarX,()=>{var p;const g=((p=n.scrollbarX)===null||p===void 0?void 0:p.offsetHeight)||0;n.onCornerHeightChange(g),c(g)}),q(n.scrollbarY,()=>{var p;const g=((p=n.scrollbarY)===null||p===void 0?void 0:p.offsetWidth)||0;n.onCornerWidthChange(g),i(g)}),h?t.createElement(K.div,N({},l,{ref:o,style:{width:d,height:u,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...r.style}})):null});function oe(r){return r?parseInt(r,10):0}function At(r,o){const a=r/o;return isNaN(a)?0:a}function se(r){const o=At(r.viewport,r.content),a=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,l=(r.scrollbar.size-a)*o;return Math.max(l,18)}function zr(r,o,a,l="ltr"){const n=se(a),d=n/2,i=o||d,u=n-i,c=a.scrollbar.paddingStart+i,h=a.scrollbar.size-a.scrollbar.paddingEnd-u,p=a.content-a.viewport,g=l==="ltr"?[0,p]:[p*-1,0];return Tt([c,h],g)(r)}function xt(r,o,a="ltr"){const l=se(o),n=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,d=o.scrollbar.size-n,i=o.content-o.viewport,u=d-l,c=a==="ltr"?[0,i]:[i*-1,0],h=Sr(r,c);return Tt([0,i],[0,u])(h)}function Tt(r,o){return a=>{if(r[0]===r[1]||o[0]===o[1])return o[0];const l=(o[1]-o[0])/(r[1]-r[0]);return o[0]+l*(a-r[0])}}function Ft(r,o){return r>0&&r<o}const Lr=(r,o=()=>{})=>{let a={left:r.scrollLeft,top:r.scrollTop},l=0;return(function n(){const d={left:r.scrollLeft,top:r.scrollTop},i=a.left!==d.left,u=a.top!==d.top;(i||u)&&o(),a=d,l=window.requestAnimationFrame(n)})(),()=>window.cancelAnimationFrame(l)};function ae(r,o){const a=B(r),l=t.useRef(0);return t.useEffect(()=>()=>window.clearTimeout(l.current),[]),t.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(a,o)},[a,o])}function q(r,o){const a=B(o);Ee(()=>{let l=0;if(r){const n=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(a)});return n.observe(r),()=>{window.cancelAnimationFrame(l),n.unobserve(r)}}},[r,a])}const Rt=Nr,kr=yr,Or=Rr,Mt=t.forwardRef(({className:r,children:o,...a},l)=>e.jsxs(Rt,{ref:l,className:St("relative overflow-hidden",r),...a,children:[e.jsx(kr,{className:"h-full w-full rounded-[inherit]",children:o}),e.jsx(zt,{}),e.jsx(Or,{})]}));Mt.displayName=Rt.displayName;const zt=t.forwardRef(({className:r,orientation:o="vertical",...a},l)=>e.jsx(yt,{ref:l,orientation:o,className:St("flex touch-none select-none transition-colors",o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",o==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...a,children:e.jsx(Tr,{className:"relative flex-1 rounded-full bg-border"})}));zt.displayName=yt.displayName;const Kr=t.forwardRef(function({initialData:o=null,onSuccess:a,mode:l="full",initialName:n=""},d){const{toast:i}=Xt(),{user:u}=Yt(),[c,h]=t.useState(1),p=5,[g,f]=t.useState(""),[b,C]=t.useState(""),[w,M]=t.useState("100g"),[$,V]=t.useState(100),[A,k]=t.useState(""),[_,z]=t.useState(""),[E,O]=t.useState(""),[S,y]=t.useState(""),[T,W]=t.useState(!0),[Te,ne]=t.useState(""),[Fe,le]=t.useState(""),[Re,ce]=t.useState(""),[Me,ze]=t.useState(""),[Le,ke]=t.useState(""),[Oe,Ve]=t.useState(""),[Ie,De]=t.useState(""),[Be,ie]=t.useState(""),[He,de]=t.useState(""),[Ue,ue]=t.useState(""),[We,me]=t.useState(""),[Xe,he]=t.useState(""),[Ye,pe]=t.useState(""),[qe,fe]=t.useState(""),[Ge,ge]=t.useState(""),[Qe,be]=t.useState(""),[Ze,ve]=t.useState(""),[Ke,xe]=t.useState(""),[Je,Se]=t.useState(""),[et,je]=t.useState(""),[I,Ce]=t.useState([]),[G,tt]=t.useState(!1),[ee,Ne]=t.useState(""),[$e,X]=t.useState(!1),[rt,ot]=t.useState([]),[Lt,ye]=t.useState(!1);t.useEffect(()=>{o?(f(o.name||""),C(o.description?.replace("Marca: ","")||""),k(o.protein?.toString()||""),z(o.carbs?.toString()||""),O(o.fat?.toString()||""),y(o.calories?.toString()||""),ne(o.fiber?.toString()||""),ie(o.sodium?.toString()||""),le(o.sugar?.toString()||""),ce(o.saturated_fat?.toString()||""),ze(o.trans_fat?.toString()||""),ke(o.monounsaturated_fat?.toString()||""),Ve(o.polyunsaturated_fat?.toString()||""),De(o.cholesterol?.toString()||""),de(o.calcium?.toString()||""),ue(o.iron?.toString()||""),me(o.magnesium?.toString()||""),he(o.phosphorus?.toString()||""),pe(o.potassium?.toString()||""),fe(o.zinc?.toString()||""),ge(o.vitamin_a?.toString()||""),be(o.vitamin_c?.toString()||""),ve(o.vitamin_d?.toString()||""),xe(o.vitamin_e?.toString()||""),Se(o.vitamin_b12?.toString()||""),je(o.folate?.toString()||""),W(!1),M("100g"),o.food_measures&&Array.isArray(o.food_measures)&&Ce(o.food_measures.map(s=>({label:s.measure_label,grams:s.quantity_grams})))):n&&f(n)},[o,n]);const Y=t.useMemo(()=>{if(w==="portion"&&$>0){const s=100/$;return{protein:A?((parseFloat(A)||0)*s).toFixed(2):"",carbs:_?((parseFloat(_)||0)*s).toFixed(2):"",fat:E?((parseFloat(E)||0)*s).toFixed(2):"",calories:S?((parseFloat(S)||0)*s).toFixed(2):""}}return null},[w,$,A,_,E,S]);t.useEffect(()=>{if(T&&A&&_&&E){let s=parseFloat(A)||0,m=parseFloat(_)||0,j=parseFloat(E)||0;const P=s*4+m*4+j*9;y(Math.round(P*100)/100)}},[A,_,E,T,w,$]);const kt=s=>{if(!s)return null;if(w==="portion"&&$>0){const m=100/$;return parseFloat(s)*m}return parseFloat(s)},st=s=>{switch(s){case 1:return g.trim().length>0;case 2:return g.trim().length>0&&A&&_&&E&&S;case 3:case 4:case 5:return!0;default:return!1}},at=()=>{c<p&&(st(c)?h(c+1):i({title:"Campos obrigat√≥rios",description:"Preencha todos os campos obrigat√≥rios antes de continuar.",variant:"destructive"}))},Ot=()=>{c>1&&h(c-1)},Vt=[{label:"Colher de Sopa",grams:15},{label:"Colher de Ch√°",grams:5},{label:"X√≠cara",grams:200},{label:"Unidade",grams:1},{label:"Fatia",grams:30},{label:"Colher de Servir",grams:20}],It=s=>{if(I.some(j=>j.label===s.label)){i({title:"Medida j√° adicionada",description:`${s.label} j√° est√° na lista.`,variant:"default"});return}Ce([...I,s])},Dt=s=>{Ce(I.filter((m,j)=>j!==s))},nt=s=>{const m=s.nutriments||{};if(s.product_name&&f(s.product_name),s.brands&&C(s.brands.split(",")[0].trim()),m.proteins_100g!==void 0&&k(m.proteins_100g.toString()),m.carbohydrates_100g!==void 0&&z(m.carbohydrates_100g.toString()),m.fat_100g!==void 0&&O(m.fat_100g.toString()),m.fiber_100g!==void 0&&ne(m.fiber_100g.toString()),m.sodium_100g!==void 0&&ie((m.sodium_100g*1e3).toString()),m.sugars_100g!==void 0&&le(m.sugars_100g.toString()),m.saturated_fat_100g!==void 0&&ce(m.saturated_fat_100g.toString()),m.calcium_100g!==void 0&&de((m.calcium_100g*1e3).toString()),m.iron_100g!==void 0&&ue((m.iron_100g*1e3).toString()),m.vitamin_c_100g!==void 0&&be((m.vitamin_c_100g*1e3).toString()),m.vitamin_a_100g!==void 0&&ge((m.vitamin_a_100g*1e3).toString()),m.vitamin_d_100g!==void 0&&ve((m.vitamin_d_100g*1e3).toString()),m.vitamin_e_100g!==void 0&&xe((m.vitamin_e_100g*1e3).toString()),m.vitamin_b12_100g!==void 0&&Se((m.vitamin_b12_100g*1e3).toString()),m.folate_100g!==void 0&&je((m.folate_100g*1e3).toString()),m.magnesium_100g!==void 0&&me((m.magnesium_100g*1e3).toString()),m.phosphorus_100g!==void 0&&he((m.phosphorus_100g*1e3).toString()),m.potassium_100g!==void 0&&pe((m.potassium_100g*1e3).toString()),m.zinc_100g!==void 0&&fe((m.zinc_100g*1e3).toString()),m.energy_kcal_100g!==void 0)y(m.energy_kcal_100g.toString()),W(!1);else if(m.energy_100g!==void 0){const j=m.energy_100g/4.184;y(j.toFixed(2)),W(!1)}M("100g"),V(100)},Bt=s=>{const m=s.trim().replace(/\s/g,"");return/^\d{8,13}$/.test(m)},lt=async()=>{if(!ee.trim()){i({title:"Erro",description:"Digite um c√≥digo de barras ou nome do produto.",variant:"destructive"});return}const s=ee.trim();if(Bt(s)){X(!0);try{const j=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${s}.json`)).json();if(j.status===0||!j.product){i({title:"Produto n√£o encontrado",description:"N√£o foi poss√≠vel encontrar este produto no OpenFoodFacts.",variant:"default"});return}nt(j.product),Ne(""),i({title:"Produto encontrado!",description:"Campos preenchidos automaticamente."})}catch(m){console.error("Erro ao buscar produto:",m),i({title:"Erro",description:"N√£o foi poss√≠vel buscar o produto. Verifique sua conex√£o.",variant:"destructive"})}finally{X(!1)}}else{if(s.length<3){i({title:"Erro",description:"Digite pelo menos 3 caracteres para buscar por nome.",variant:"destructive"});return}X(!0);try{const j=await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(s)}&json=1&page_size=20&fields=product_name,brands,code,image_url,nutriments`)).json();if(!j.products||j.products.length===0){i({title:"Nenhum produto encontrado",description:"N√£o foi poss√≠vel encontrar produtos com este nome no OpenFoodFacts.",variant:"default"});return}const P=j.products.filter(R=>R.product_name&&R.product_name.trim().length>0);if(P.length===0){i({title:"Nenhum produto v√°lido encontrado",description:"Os produtos encontrados n√£o possuem informa√ß√µes suficientes.",variant:"default"});return}ot(P),ye(!0)}catch(m){console.error("Erro ao buscar produtos:",m),i({title:"Erro",description:"N√£o foi poss√≠vel buscar produtos. Verifique sua conex√£o.",variant:"destructive"})}finally{X(!1)}}},ct=async s=>{X(!0);try{const j=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${s}.json`)).json();if(j.status===0||!j.product){i({title:"Erro",description:"N√£o foi poss√≠vel carregar os dados do produto selecionado.",variant:"destructive"});return}nt(j.product),Ne(""),ye(!1),ot([]),i({title:"Produto selecionado!",description:"Campos preenchidos automaticamente."})}catch(m){console.error("Erro ao carregar produto:",m),i({title:"Erro",description:"N√£o foi poss√≠vel carregar o produto. Verifique sua conex√£o.",variant:"destructive"})}finally{X(!1)}},it=async()=>{if(!st(2)){i({title:"Erro",description:"Preencha todos os campos obrigat√≥rios (Nome, Prote√≠na, Carboidratos, Gorduras, Calorias).",variant:"destructive"});return}if(w==="portion"&&(!$||parseFloat($)<=0)){i({title:"Erro",description:"Informe o tamanho da por√ß√£o do r√≥tulo.",variant:"destructive"});return}tt(!0);try{const s=P=>P?kt(P):null,m={name:g.trim(),description:b.trim()?`Marca: ${b.trim()}`:null,calories:Math.round(s(S)*100)/100,protein:Math.round(s(A)*100)/100,carbs:Math.round(s(_)*100)/100,fat:Math.round(s(E)*100)/100,fiber:s(Te),sodium:s(Be),sugar:s(Fe),saturated_fat:s(Re),trans_fat:s(Me),monounsaturated_fat:s(Le),polyunsaturated_fat:s(Oe),cholesterol:s(Ie),calcium:s(He),iron:s(Ue),magnesium:s(We),phosphorus:s(Xe),potassium:s(Ye),zinc:s(qe),vitamin_a:s(Ge),vitamin_c:s(Qe),vitamin_d:s(Ze),vitamin_e:s(Ke),vitamin_b12:s(Je),folate:s(et),portion_size:100,source:"custom",nutritionist_id:u?.id||null,group:"Personalizado",is_active:!0};let j;if(o){const{data:P,error:R}=await we.from("foods").update(m).eq("id",o.id).select("id, name, group, description, source, calories, protein, carbs, fat, fiber, sodium, portion_size").single();if(R)throw R;j=P}else{const{data:P,error:R}=await ar(m);if(R)throw R;if(!P)throw new Error("Alimento criado mas n√£o retornado");j=P}if(I.length>0){o&&await we.from("food_measures").delete().eq("food_id",j.id);const P=I.map(ut=>({food_id:j.id,measure_label:ut.label,quantity_grams:ut.grams})),{error:R}=await we.from("food_measures").insert(P);R&&console.warn("Erro ao criar medidas caseiras:",R)}i({title:o?"Alimento atualizado!":"Alimento criado!",description:`${g} foi ${o?"atualizado":"adicionado"} ao banco de dados.`}),a&&a(j)}catch(s){console.error("Erro ao salvar alimento:",s),i({title:"Erro",description:s.message||"N√£o foi poss√≠vel salvar o alimento.",variant:"destructive"})}finally{tt(!1)}};t.useImperativeHandle(d,()=>({submit:it}));const Ht=l==="compact",dt=c/p*100,Ut=["B√°sico","Macronutrientes","Gorduras Detalhadas","Micronutrientes","Medidas Caseiras"];return e.jsxs("div",{className:Ht?"space-y-3":"space-y-6",children:[l!=="compact"&&e.jsx(Q,{children:e.jsx(Z,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-medium",children:["Passo ",c," de ",p,": ",Ut[c-1]]}),e.jsxs("span",{className:"text-muted-foreground",children:[Math.round(dt),"%"]})]}),e.jsx(rr,{value:dt,className:"h-2"})]})})}),e.jsxs(Q,{children:[e.jsxs(mt,{children:[e.jsxs(ht,{className:"text-base",children:[c===1&&"1/5 - Informa√ß√µes B√°sicas",c===2&&"2/5 - Macronutrientes",c===3&&"3/5 - Gorduras Detalhadas e Outros (Opcional)",c===4&&"4/5 - Micronutrientes (Opcional)",c===5&&"5/5 - Medidas Caseiras (Opcional)"]}),e.jsxs(pt,{children:[c===1&&"Dados essenciais do alimento",c===2&&"Valores nutricionais principais (obrigat√≥rios)",c===3&&"Informa√ß√µes adicionais sobre gorduras e outros componentes",c===4&&"Vitaminas e minerais do alimento",c===5&&"Medidas caseiras para facilitar o uso"]})]}),e.jsxs(Z,{className:"space-y-4",children:[c===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"name",children:["Nome do Alimento ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(x,{id:"name",value:g,onChange:s=>f(s.target.value),placeholder:"Ex: Bolo de Chocolate",autoFocus:!o})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"brand",children:"Marca (opcional)"}),e.jsx(x,{id:"brand",value:b,onChange:s=>C(s.target.value),placeholder:"Ex: Marca X"})]})]}),c===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(or,{value:w,onValueChange:M,className:"w-full",children:[e.jsxs(sr,{className:"grid w-full grid-cols-2",children:[e.jsx(gt,{value:"100g",children:"Dados por 100g"}),e.jsx(gt,{value:"portion",children:"Dados do R√≥tulo (Por√ß√£o)"})]}),e.jsx(bt,{value:"100g",className:"space-y-4 mt-4",children:e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100 flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Informe os valores nutricionais por 100g do alimento"]})})}),e.jsxs(bt,{value:"portion",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"labelPortionSize",children:["Tamanho da Por√ß√£o do R√≥tulo (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(x,{id:"labelPortionSize",type:"number",value:$,onChange:s=>V(s.target.value),placeholder:"Ex: 30"})]}),Y&&e.jsxs("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-emerald-900 dark:text-emerald-100 mb-2",children:"Equivalente por 100g:"}),e.jsxs("div",{className:"text-xs text-emerald-800 dark:text-emerald-200 space-y-1",children:[e.jsxs("p",{children:["Prote√≠na: ",Y.protein,"g"]}),e.jsxs("p",{children:["Carboidratos: ",Y.carbs,"g"]}),e.jsxs("p",{children:["Gorduras: ",Y.fat,"g"]}),Y.calories&&e.jsxs("p",{children:["Calorias: ",Y.calories," kcal"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"protein",children:["Prote√≠na (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(x,{id:"protein",type:"number",step:"0.1",value:A,onChange:s=>k(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"carbs",children:["Carboidratos (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(x,{id:"carbs",type:"number",step:"0.1",value:_,onChange:s=>z(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"fat",children:["Gorduras (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(x,{id:"fat",type:"number",step:"0.1",value:E,onChange:s=>O(s.target.value),placeholder:"0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(v,{htmlFor:"calories",children:["Calorias (kcal) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"autoCalc",checked:T,onChange:s=>W(s.target.checked),className:"w-4 h-4"}),e.jsx(v,{htmlFor:"autoCalc",className:"text-sm font-normal cursor-pointer",children:"Calcular automaticamente"})]})]}),e.jsx(x,{id:"calories",type:"number",step:"0.1",value:S,onChange:s=>{y(s.target.value),W(!1)},placeholder:"0",disabled:T,className:T?"bg-muted":""}),T&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"C√°lculo: (Prote√≠na √ó 4) + (Carboidratos √ó 4) + (Gorduras √ó 9)"})]})]}),c===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Esta etapa √© opcional. Voc√™ pode pular se n√£o tiver essas informa√ß√µes."]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"fiber",children:"Fibra (g)"}),e.jsx(x,{id:"fiber",type:"number",step:"0.1",value:Te,onChange:s=>ne(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"sugar",children:"A√ß√∫cares (g)"}),e.jsx(x,{id:"sugar",type:"number",step:"0.1",value:Fe,onChange:s=>le(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"saturatedFat",children:"Gordura Saturada (g)"}),e.jsx(x,{id:"saturatedFat",type:"number",step:"0.1",value:Re,onChange:s=>ce(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"transFat",children:"Gordura Trans (g)"}),e.jsx(x,{id:"transFat",type:"number",step:"0.1",value:Me,onChange:s=>ze(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"monounsaturatedFat",children:"Gordura Monoinsaturada (g)"}),e.jsx(x,{id:"monounsaturatedFat",type:"number",step:"0.1",value:Le,onChange:s=>ke(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"polyunsaturatedFat",children:"Gordura Poliinsaturada (g)"}),e.jsx(x,{id:"polyunsaturatedFat",type:"number",step:"0.1",value:Oe,onChange:s=>Ve(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"cholesterol",children:"Colesterol (mg)"}),e.jsx(x,{id:"cholesterol",type:"number",step:"0.1",value:Ie,onChange:s=>De(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"sodium",children:"S√≥dio (mg)"}),e.jsx(x,{id:"sodium",type:"number",step:"0.1",value:Be,onChange:s=>ie(s.target.value),placeholder:"0"})]})]})]}),c===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Esta etapa √© opcional. Voc√™ pode pular se n√£o tiver essas informa√ß√µes."]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:"Minerais (mg)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"calcium",children:"C√°lcio (mg)"}),e.jsx(x,{id:"calcium",type:"number",step:"0.1",value:He,onChange:s=>de(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"iron",children:"Ferro (mg)"}),e.jsx(x,{id:"iron",type:"number",step:"0.1",value:Ue,onChange:s=>ue(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"magnesium",children:"Magn√©sio (mg)"}),e.jsx(x,{id:"magnesium",type:"number",step:"0.1",value:We,onChange:s=>me(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"phosphorus",children:"F√≥sforo (mg)"}),e.jsx(x,{id:"phosphorus",type:"number",step:"0.1",value:Xe,onChange:s=>he(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"potassium",children:"Pot√°ssio (mg)"}),e.jsx(x,{id:"potassium",type:"number",step:"0.1",value:Ye,onChange:s=>pe(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"zinc",children:"Zinco (mg)"}),e.jsx(x,{id:"zinc",type:"number",step:"0.1",value:qe,onChange:s=>fe(s.target.value),placeholder:"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:"Vitaminas (mg)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"vitaminA",children:"Vitamina A (mg)"}),e.jsx(x,{id:"vitaminA",type:"number",step:"0.1",value:Ge,onChange:s=>ge(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"vitaminC",children:"Vitamina C (mg)"}),e.jsx(x,{id:"vitaminC",type:"number",step:"0.1",value:Qe,onChange:s=>be(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"vitaminD",children:"Vitamina D (mg)"}),e.jsx(x,{id:"vitaminD",type:"number",step:"0.1",value:Ze,onChange:s=>ve(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"vitaminE",children:"Vitamina E (mg)"}),e.jsx(x,{id:"vitaminE",type:"number",step:"0.1",value:Ke,onChange:s=>xe(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"vitaminB12",children:"Vitamina B12 (mg)"}),e.jsx(x,{id:"vitaminB12",type:"number",step:"0.1",value:Je,onChange:s=>Se(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"folate",children:"Folato (mg)"}),e.jsx(x,{id:"folate",type:"number",step:"0.1",value:et,onChange:s=>je(s.target.value),placeholder:"0"})]})]})]})]}),c===5&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Esta etapa √© opcional. Voc√™ pode pular se n√£o quiser adicionar medidas caseiras."]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Vt.map((s,m)=>e.jsxs(tr,{variant:"outline",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors px-3 py-1",onClick:()=>It(s),children:[e.jsx(nr,{className:"h-3 w-3 mr-1"}),s.label," (",s.grams,"g)"]},m))}),I.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"text-sm",children:"Medidas Adicionadas:"}),e.jsx("div",{className:"space-y-2",children:I.map((s,m)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg bg-muted/30",children:[e.jsxs("span",{className:"text-sm",children:[s.label," - ",s.grams,"g"]}),e.jsx(D,{variant:"ghost",size:"sm",onClick:()=>Dt(m),className:"h-6 w-6 p-0",children:e.jsx(qt,{className:"h-3 w-3"})})]},m))})]})]})]})]}),l!=="compact"&&c===1&&e.jsxs(Q,{className:"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",children:[e.jsxs(mt,{className:"pb-3",children:[e.jsxs(ht,{className:"text-base flex items-center gap-2 text-green-900 dark:text-green-100",children:[e.jsx(vt,{className:"h-4 w-4"}),"Buscar no Banco de Alimentos P√∫blicos"]}),e.jsxs(pt,{className:"text-green-800 dark:text-green-200",children:[e.jsx("p",{className:"mb-1",children:"Busque por c√≥digo de barras (EAN) ou nome do produto"}),e.jsx("p",{className:"text-xs mt-1 opacity-75",children:"Utilizamos a plataforma OpenFoodFacts. Os dados podem ter imprecis√µes e devem ser verificados."})]})]}),e.jsxs(Z,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{id:"searchQuery",placeholder:"Digite o c√≥digo de barras (ex: 7891000100103) ou nome do produto (ex: Whey Protein)",value:ee,onChange:s=>Ne(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!$e&&lt()},className:"flex-1"}),e.jsx(D,{onClick:lt,disabled:$e||!ee.trim(),className:"bg-green-600 hover:bg-green-700 text-white",children:$e?e.jsx(ft,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Buscar"]})})]}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:"üí° Dica: Digite apenas n√∫meros para buscar por c√≥digo de barras, ou texto para buscar por nome do produto"})]})]}),e.jsx(Gt,{open:Lt,onOpenChange:ye,children:e.jsxs(Qt,{className:"max-w-2xl max-h-[80vh]",children:[e.jsxs(Zt,{children:[e.jsx(Kt,{children:"Selecione o Produto"}),e.jsxs(Jt,{children:["Encontramos ",rt.length," produto(s). Selecione o produto correto para preencher os dados automaticamente."]})]}),e.jsx(Mt,{className:"max-h-[60vh] pr-4",children:e.jsx("div",{className:"space-y-2",children:rt.map(s=>e.jsx(Q,{className:"cursor-pointer hover:bg-muted transition-colors",onClick:()=>ct(s.code),children:e.jsx(Z,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[s.image_url&&e.jsx("img",{src:s.image_url,alt:s.product_name,className:"w-16 h-16 object-cover rounded-lg",onError:m=>{m.target.style.display="none"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm truncate",children:s.product_name||"Produto sem nome"}),s.brands&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Marca: ",s.brands.split(",")[0].trim()]}),s.code&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["C√≥digo: ",s.code]})]}),e.jsx(D,{variant:"outline",size:"sm",onClick:m=>{m.stopPropagation(),ct(s.code)},children:"Selecionar"})]})})},s.code))})})]})}),l!=="compact"&&e.jsx(Q,{children:e.jsx(Z,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"flex gap-2",children:c>1&&e.jsxs(D,{variant:"outline",onClick:Ot,disabled:G,size:"lg",children:[e.jsx(lr,{className:"h-4 w-4 mr-2"}),"Anterior"]})}),e.jsxs("div",{className:"flex gap-2",children:[(c===3||c===4||c===5)&&e.jsx(D,{variant:"ghost",onClick:at,disabled:G,size:"lg",children:"Pular"}),c<p?e.jsxs(D,{onClick:at,disabled:G,size:"lg",children:["Pr√≥ximo",e.jsx(er,{className:"h-4 w-4 ml-2"})]}):e.jsx(D,{onClick:it,disabled:G,size:"lg",children:G?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"h-4 w-4 mr-2 animate-spin"}),o?"Atualizando...":"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(cr,{className:"h-4 w-4 mr-2"}),o?"Atualizar Alimento":"Criar Alimento"]})})]})]})})})]})});export{Kr as S,Mt as a};
