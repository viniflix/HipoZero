import{r,av as Xt,j as e,$ as jt,a as Yt,u as qt,C as Oe,e as Ie,c as pt,d as ht,w as gt,B as H,X as Gt,L as vt,J as Kt,K as Qt,M as Zt,N as Jt,ad as er,E as tr,s as Je,t as rr}from"./index-BvWB-6Y-.js";import{I as F}from"./input-OBodSLFw.js";import{L as j}from"./label-Dds-NHUC.js";import{B as or}from"./badge-CCK5Bs0D.js";import{P as sr}from"./progress-Di_AUcQX.js";import{T as ar,a as nr,b as xt,c as bt}from"./tabs-CA5k0aJI.js";import{_ as N}from"./extends-CF3RwP-h.js";import{c as ir}from"./foodService-BaXPLfK4.js";import{I as Ue}from"./info-Cibi8VF-.js";import{P as lr}from"./plus-BWNKYoo4.js";import{S as St}from"./search-DAzfs9rU.js";import{C as cr}from"./chevron-left-FDyjizdT.js";import{C as dr}from"./check-circle-2-DqvAHxH6.js";function ur(o,s){typeof o=="function"?o(s):o!=null&&(o.current=s)}function Ft(...o){return s=>o.forEach(n=>ur(n,s))}function X(...o){return r.useCallback(Ft(...o),o)}const yt=r.forwardRef((o,s)=>{const{children:n,...l}=o,i=r.Children.toArray(n),u=i.find(fr);if(u){const d=u.props.children,f=i.map(c=>c===u?r.Children.count(d)>1?r.Children.only(null):r.isValidElement(d)?d.props.children:null:c);return r.createElement(et,N({},l,{ref:s}),r.isValidElement(d)?r.cloneElement(d,void 0,f):null)}return r.createElement(et,N({},l,{ref:s}),n)});yt.displayName="Slot";const et=r.forwardRef((o,s)=>{const{children:n,...l}=o;return r.isValidElement(n)?r.cloneElement(n,{...pr(l,n.props),ref:s?Ft(s,n.ref):n.ref}):r.Children.count(n)>1?r.Children.only(null):null});et.displayName="SlotClone";const mr=({children:o})=>r.createElement(r.Fragment,null,o);function fr(o){return r.isValidElement(o)&&o.type===mr}function pr(o,s){const n={...s};for(const l in s){const i=o[l],u=s[l];/^on[A-Z]/.test(l)?i&&u?n[l]=(...f)=>{u(...f),i(...f)}:i&&(n[l]=i):l==="style"?n[l]={...i,...u}:l==="className"&&(n[l]=[i,u].filter(Boolean).join(" "))}return{...o,...n}}const hr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ve=hr.reduce((o,s)=>{const n=r.forwardRef((l,i)=>{const{asChild:u,...d}=l,f=u?yt:s;return r.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),r.createElement(f,N({},d,{ref:i}))});return n.displayName=`Primitive.${s}`,{...o,[s]:n}},{}),tt=globalThis?.document?r.useLayoutEffect:()=>{};function gr(o,s){return r.useReducer((n,l)=>{const i=s[n][l];return i??n},o)}const Be=o=>{const{present:s,children:n}=o,l=vr(s),i=typeof n=="function"?n({present:l.isPresent}):r.Children.only(n),u=X(l.ref,i.ref);return typeof n=="function"||l.isPresent?r.cloneElement(i,{ref:u}):null};Be.displayName="Presence";function vr(o){const[s,n]=r.useState(),l=r.useRef({}),i=r.useRef(o),u=r.useRef("none"),d=o?"mounted":"unmounted",[f,c]=gr(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const h=We(l.current);u.current=f==="mounted"?h:"none"},[f]),tt(()=>{const h=l.current,g=i.current;if(g!==o){const v=u.current,S=We(h);o?c("MOUNT"):S==="none"||h?.display==="none"?c("UNMOUNT"):c(g&&v!==S?"ANIMATION_OUT":"UNMOUNT"),i.current=o}},[o,c]),tt(()=>{if(s){const h=x=>{const S=We(l.current).includes(x.animationName);x.target===s&&S&&Xt.flushSync(()=>c("ANIMATION_END"))},g=x=>{x.target===s&&(u.current=We(l.current))};return s.addEventListener("animationstart",g),s.addEventListener("animationcancel",h),s.addEventListener("animationend",h),()=>{s.removeEventListener("animationstart",g),s.removeEventListener("animationcancel",h),s.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:r.useCallback(h=>{h&&(l.current=getComputedStyle(h)),n(h)},[])}}function We(o){return o?.animationName||"none"}function xr(o,s=[]){let n=[];function l(u,d){const f=r.createContext(d),c=n.length;n=[...n,d];function h(x){const{scope:v,children:S,...y}=x,w=v?.[o][c]||f,L=r.useMemo(()=>y,Object.values(y));return r.createElement(w.Provider,{value:L},S)}function g(x,v){const S=v?.[o][c]||f,y=r.useContext(S);if(y)return y;if(d!==void 0)return d;throw new Error(`\`${x}\` must be used within \`${u}\``)}return h.displayName=u+"Provider",[h,g]}const i=()=>{const u=n.map(d=>r.createContext(d));return function(f){const c=f?.[o]||u;return r.useMemo(()=>({[`__scope${o}`]:{...f,[o]:c}}),[f,c])}};return i.scopeName=o,[l,br(i,...s)]}function br(...o){const s=o[0];if(o.length===1)return s;const n=()=>{const l=o.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(u){const d=l.reduce((f,{useScope:c,scopeName:h})=>{const x=c(u)[`__scope${h}`];return{...f,...x}},{});return r.useMemo(()=>({[`__scope${s.scopeName}`]:d}),[d])}};return n.scopeName=s.scopeName,n}function U(o){const s=r.useRef(o);return r.useEffect(()=>{s.current=o}),r.useMemo(()=>(...n)=>{var l;return(l=s.current)===null||l===void 0?void 0:l.call(s,...n)},[])}const Sr=r.createContext(void 0);function _r(o){const s=r.useContext(Sr);return o||s||"ltr"}function jr(o,[s,n]){return Math.min(n,Math.max(s,o))}function W(o,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(o?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function Fr(o,s){return r.useReducer((n,l)=>{const i=s[n][l];return i??n},o)}const Nt="ScrollArea",[wt]=xr(Nt),[yr,M]=wt(Nt),Nr=r.forwardRef((o,s)=>{const{__scopeScrollArea:n,type:l="hover",dir:i,scrollHideDelay:u=600,...d}=o,[f,c]=r.useState(null),[h,g]=r.useState(null),[x,v]=r.useState(null),[S,y]=r.useState(null),[w,L]=r.useState(null),[T,V]=r.useState(0),[A,I]=r.useState(0),[C,R]=r.useState(!1),[$,z]=r.useState(!1),_=X(s,P=>c(P)),E=_r(i);return r.createElement(yr,{scope:n,type:l,dir:E,scrollHideDelay:u,scrollArea:f,viewport:h,onViewportChange:g,content:x,onContentChange:v,scrollbarX:S,onScrollbarXChange:y,scrollbarXEnabled:C,onScrollbarXEnabledChange:R,scrollbarY:w,onScrollbarYChange:L,scrollbarYEnabled:$,onScrollbarYEnabledChange:z,onCornerWidthChange:V,onCornerHeightChange:I},r.createElement(Ve.div,N({dir:E},d,{ref:_,style:{position:"relative","--radix-scroll-area-corner-width":T+"px","--radix-scroll-area-corner-height":A+"px",...o.style}})))}),wr="ScrollAreaViewport",Cr=r.forwardRef((o,s)=>{const{__scopeScrollArea:n,children:l,...i}=o,u=M(wr,n),d=r.useRef(null),f=X(s,d,u.onViewportChange);return r.createElement(r.Fragment,null,r.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),r.createElement(Ve.div,N({"data-radix-scroll-area-viewport":""},i,{ref:f,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...o.style}}),r.createElement("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"}},l)))}),O="ScrollAreaScrollbar",Ct=r.forwardRef((o,s)=>{const{forceMount:n,...l}=o,i=M(O,o.__scopeScrollArea),{onScrollbarXEnabledChange:u,onScrollbarYEnabledChange:d}=i,f=o.orientation==="horizontal";return r.useEffect(()=>(f?u(!0):d(!0),()=>{f?u(!1):d(!1)}),[f,u,d]),i.type==="hover"?r.createElement($r,N({},l,{ref:s,forceMount:n})):i.type==="scroll"?r.createElement(Er,N({},l,{ref:s,forceMount:n})):i.type==="auto"?r.createElement($t,N({},l,{ref:s,forceMount:n})):i.type==="always"?r.createElement(ot,N({},l,{ref:s})):null}),$r=r.forwardRef((o,s)=>{const{forceMount:n,...l}=o,i=M(O,o.__scopeScrollArea),[u,d]=r.useState(!1);return r.useEffect(()=>{const f=i.scrollArea;let c=0;if(f){const h=()=>{window.clearTimeout(c),d(!0)},g=()=>{c=window.setTimeout(()=>d(!1),i.scrollHideDelay)};return f.addEventListener("pointerenter",h),f.addEventListener("pointerleave",g),()=>{window.clearTimeout(c),f.removeEventListener("pointerenter",h),f.removeEventListener("pointerleave",g)}}},[i.scrollArea,i.scrollHideDelay]),r.createElement(Be,{present:n||u},r.createElement($t,N({"data-state":u?"visible":"hidden"},l,{ref:s})))}),Er=r.forwardRef((o,s)=>{const{forceMount:n,...l}=o,i=M(O,o.__scopeScrollArea),u=o.orientation==="horizontal",d=qe(()=>c("SCROLL_END"),100),[f,c]=Fr("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return r.useEffect(()=>{if(f==="idle"){const h=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[f,i.scrollHideDelay,c]),r.useEffect(()=>{const h=i.viewport,g=u?"scrollLeft":"scrollTop";if(h){let x=h[g];const v=()=>{const S=h[g];x!==S&&(c("SCROLL"),d()),x=S};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[i.viewport,u,c,d]),r.createElement(Be,{present:n||f!=="hidden"},r.createElement(ot,N({"data-state":f==="hidden"?"hidden":"visible"},l,{ref:s,onPointerEnter:W(o.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:W(o.onPointerLeave,()=>c("POINTER_LEAVE"))})))}),$t=r.forwardRef((o,s)=>{const n=M(O,o.__scopeScrollArea),{forceMount:l,...i}=o,[u,d]=r.useState(!1),f=o.orientation==="horizontal",c=qe(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,g=n.viewport.offsetHeight<n.viewport.scrollHeight;d(f?h:g)}},10);return ke(n.viewport,c),ke(n.content,c),r.createElement(Be,{present:l||u},r.createElement(ot,N({"data-state":u?"visible":"hidden"},i,{ref:s})))}),ot=r.forwardRef((o,s)=>{const{orientation:n="vertical",...l}=o,i=M(O,o.__scopeScrollArea),u=r.useRef(null),d=r.useRef(0),[f,c]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Tt(f.viewport,f.content),g={...l,sizes:f,onSizesChange:c,hasThumb:h>0&&h<1,onThumbChange:v=>u.current=v,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:v=>d.current=v};function x(v,S){return Lr(v,d.current,f,S)}return n==="horizontal"?r.createElement(Pr,N({},g,{ref:s,onThumbPositionChange:()=>{if(i.viewport&&u.current){const v=i.viewport.scrollLeft,S=_t(v,f,i.dir);u.current.style.transform=`translate3d(${S}px, 0, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollLeft=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollLeft=x(v,i.dir))}})):n==="vertical"?r.createElement(Ar,N({},g,{ref:s,onThumbPositionChange:()=>{if(i.viewport&&u.current){const v=i.viewport.scrollTop,S=_t(v,f);u.current.style.transform=`translate3d(0, ${S}px, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollTop=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollTop=x(v))}})):null}),Pr=r.forwardRef((o,s)=>{const{sizes:n,onSizesChange:l,...i}=o,u=M(O,o.__scopeScrollArea),[d,f]=r.useState(),c=r.useRef(null),h=X(s,c,u.onScrollbarXChange);return r.useEffect(()=>{c.current&&f(getComputedStyle(c.current))},[c]),r.createElement(Pt,N({"data-orientation":"horizontal"},i,{ref:h,sizes:n,style:{bottom:0,left:u.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:u.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ye(n)+"px",...o.style},onThumbPointerDown:g=>o.onThumbPointerDown(g.x),onDragScroll:g=>o.onDragScroll(g.x),onWheelScroll:(g,x)=>{if(u.viewport){const v=u.viewport.scrollLeft+g.deltaX;o.onWheelScroll(v),Mt(v,x)&&g.preventDefault()}},onResize:()=>{c.current&&u.viewport&&d&&l({content:u.viewport.scrollWidth,viewport:u.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Xe(d.paddingLeft),paddingEnd:Xe(d.paddingRight)}})}}))}),Ar=r.forwardRef((o,s)=>{const{sizes:n,onSizesChange:l,...i}=o,u=M(O,o.__scopeScrollArea),[d,f]=r.useState(),c=r.useRef(null),h=X(s,c,u.onScrollbarYChange);return r.useEffect(()=>{c.current&&f(getComputedStyle(c.current))},[c]),r.createElement(Pt,N({"data-orientation":"vertical"},i,{ref:h,sizes:n,style:{top:0,right:u.dir==="ltr"?0:void 0,left:u.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ye(n)+"px",...o.style},onThumbPointerDown:g=>o.onThumbPointerDown(g.y),onDragScroll:g=>o.onDragScroll(g.y),onWheelScroll:(g,x)=>{if(u.viewport){const v=u.viewport.scrollTop+g.deltaY;o.onWheelScroll(v),Mt(v,x)&&g.preventDefault()}},onResize:()=>{c.current&&u.viewport&&d&&l({content:u.viewport.scrollHeight,viewport:u.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Xe(d.paddingTop),paddingEnd:Xe(d.paddingBottom)}})}}))}),[Tr,Et]=wt(O),Pt=r.forwardRef((o,s)=>{const{__scopeScrollArea:n,sizes:l,hasThumb:i,onThumbChange:u,onThumbPointerUp:d,onThumbPointerDown:f,onThumbPositionChange:c,onDragScroll:h,onWheelScroll:g,onResize:x,...v}=o,S=M(O,n),[y,w]=r.useState(null),L=X(s,_=>w(_)),T=r.useRef(null),V=r.useRef(""),A=S.viewport,I=l.content-l.viewport,C=U(g),R=U(c),$=qe(x,10);function z(_){if(T.current){const E=_.clientX-T.current.left,P=_.clientY-T.current.top;h({x:E,y:P})}}return r.useEffect(()=>{const _=E=>{const P=E.target;y?.contains(P)&&C(E,I)};return document.addEventListener("wheel",_,{passive:!1}),()=>document.removeEventListener("wheel",_,{passive:!1})},[A,y,I,C]),r.useEffect(R,[l,R]),ke(y,$),ke(S.content,$),r.createElement(Tr,{scope:n,scrollbar:y,hasThumb:i,onThumbChange:U(u),onThumbPointerUp:U(d),onThumbPositionChange:R,onThumbPointerDown:U(f)},r.createElement(Ve.div,N({},v,{ref:L,style:{position:"absolute",...v.style},onPointerDown:W(o.onPointerDown,_=>{_.button===0&&(_.target.setPointerCapture(_.pointerId),T.current=y.getBoundingClientRect(),V.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S.viewport&&(S.viewport.style.scrollBehavior="auto"),z(_))}),onPointerMove:W(o.onPointerMove,z),onPointerUp:W(o.onPointerUp,_=>{const E=_.target;E.hasPointerCapture(_.pointerId)&&E.releasePointerCapture(_.pointerId),document.body.style.webkitUserSelect=V.current,S.viewport&&(S.viewport.style.scrollBehavior=""),T.current=null})})))}),rt="ScrollAreaThumb",Rr=r.forwardRef((o,s)=>{const{forceMount:n,...l}=o,i=Et(rt,o.__scopeScrollArea);return r.createElement(Be,{present:n||i.hasThumb},r.createElement(Mr,N({ref:s},l)))}),Mr=r.forwardRef((o,s)=>{const{__scopeScrollArea:n,style:l,...i}=o,u=M(rt,n),d=Et(rt,n),{onThumbPositionChange:f}=d,c=X(s,x=>d.onThumbChange(x)),h=r.useRef(),g=qe(()=>{h.current&&(h.current(),h.current=void 0)},100);return r.useEffect(()=>{const x=u.viewport;if(x){const v=()=>{if(g(),!h.current){const S=Or(x,f);h.current=S,f()}};return f(),x.addEventListener("scroll",v),()=>x.removeEventListener("scroll",v)}},[u.viewport,g,f]),r.createElement(Ve.div,N({"data-state":d.hasThumb?"visible":"hidden"},i,{ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:W(o.onPointerDownCapture,x=>{const S=x.target.getBoundingClientRect(),y=x.clientX-S.left,w=x.clientY-S.top;d.onThumbPointerDown({x:y,y:w})}),onPointerUp:W(o.onPointerUp,d.onThumbPointerUp)}))}),At="ScrollAreaCorner",zr=r.forwardRef((o,s)=>{const n=M(At,o.__scopeScrollArea),l=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&l?r.createElement(kr,N({},o,{ref:s})):null}),kr=r.forwardRef((o,s)=>{const{__scopeScrollArea:n,...l}=o,i=M(At,n),[u,d]=r.useState(0),[f,c]=r.useState(0),h=!!(u&&f);return ke(i.scrollbarX,()=>{var g;const x=((g=i.scrollbarX)===null||g===void 0?void 0:g.offsetHeight)||0;i.onCornerHeightChange(x),c(x)}),ke(i.scrollbarY,()=>{var g;const x=((g=i.scrollbarY)===null||g===void 0?void 0:g.offsetWidth)||0;i.onCornerWidthChange(x),d(x)}),h?r.createElement(Ve.div,N({},l,{ref:s,style:{width:u,height:f,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...o.style}})):null});function Xe(o){return o?parseInt(o,10):0}function Tt(o,s){const n=o/s;return isNaN(n)?0:n}function Ye(o){const s=Tt(o.viewport,o.content),n=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,l=(o.scrollbar.size-n)*s;return Math.max(l,18)}function Lr(o,s,n,l="ltr"){const i=Ye(n),u=i/2,d=s||u,f=i-d,c=n.scrollbar.paddingStart+d,h=n.scrollbar.size-n.scrollbar.paddingEnd-f,g=n.content-n.viewport,x=l==="ltr"?[0,g]:[g*-1,0];return Rt([c,h],x)(o)}function _t(o,s,n="ltr"){const l=Ye(s),i=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,u=s.scrollbar.size-i,d=s.content-s.viewport,f=u-l,c=n==="ltr"?[0,d]:[d*-1,0],h=jr(o,c);return Rt([0,d],[0,f])(h)}function Rt(o,s){return n=>{if(o[0]===o[1]||s[0]===s[1])return s[0];const l=(s[1]-s[0])/(o[1]-o[0]);return s[0]+l*(n-o[0])}}function Mt(o,s){return o>0&&o<s}const Or=(o,s=()=>{})=>{let n={left:o.scrollLeft,top:o.scrollTop},l=0;return(function i(){const u={left:o.scrollLeft,top:o.scrollTop},d=n.left!==u.left,f=n.top!==u.top;(d||f)&&s(),n=u,l=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(l)};function qe(o,s){const n=U(o),l=r.useRef(0);return r.useEffect(()=>()=>window.clearTimeout(l.current),[]),r.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(n,s)},[n,s])}function ke(o,s){const n=U(s);tt(()=>{let l=0;if(o){const i=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(n)});return i.observe(o),()=>{window.cancelAnimationFrame(l),i.unobserve(o)}}},[o,n])}const zt=Nr,Ir=Cr,Vr=zr,Br=r.forwardRef(({className:o,children:s,...n},l)=>e.jsxs(zt,{ref:l,className:jt("relative overflow-hidden",o),...n,children:[e.jsx(Ir,{className:"h-full w-full rounded-[inherit] overflow-y-auto",children:s}),e.jsx(kt,{}),e.jsx(Vr,{})]}));Br.displayName=zt.displayName;const kt=r.forwardRef(({className:o,orientation:s="vertical",...n},l)=>e.jsx(Ct,{ref:l,orientation:s,className:jt("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",o),...n,children:e.jsx(Rr,{className:"relative flex-1 rounded-full bg-border"})}));kt.displayName=Ct.displayName;const to=r.forwardRef(function({initialData:s=null,onSuccess:n,mode:l="full",initialName:i=""},u){const{toast:d}=Yt(),{user:f}=qt(),[c,h]=r.useState(1),g=5,[x,v]=r.useState(""),[S,y]=r.useState(""),[w,L]=r.useState("100g"),[T,V]=r.useState("100g"),[A,I]=r.useState(100),[C,R]=r.useState(""),[$,z]=r.useState(""),[_,E]=r.useState(""),[P,k]=r.useState(""),[Y,B]=r.useState(!0),[q,G]=r.useState(""),[K,Q]=r.useState(""),[Z,J]=r.useState(""),[ee,te]=r.useState(""),[re,oe]=r.useState(""),[se,ae]=r.useState(""),[ne,ie]=r.useState(""),[le,ce]=r.useState(""),[de,ue]=r.useState(""),[me,fe]=r.useState(""),[pe,he]=r.useState(""),[ge,ve]=r.useState(""),[xe,be]=r.useState(""),[Se,_e]=r.useState(""),[je,Fe]=r.useState(""),[ye,Ne]=r.useState(""),[we,Ce]=r.useState(""),[$e,Ee]=r.useState(""),[Pe,Ae]=r.useState(""),[Te,Re]=r.useState(""),[D,Ge]=r.useState([]),[Le,st]=r.useState(!1),[De,Ke]=r.useState(""),[Qe,Me]=r.useState(!1),[at,nt]=r.useState([]),[Lt,Ze]=r.useState(!1);r.useEffect(()=>{s?(v(s.name||""),y(s.description?.replace("Marca: ","")||""),R(s.protein?.toString()||""),z(s.carbs?.toString()||""),E(s.fat?.toString()||""),k(s.calories?.toString()||""),G(s.fiber?.toString()||""),ce(s.sodium?.toString()||""),Q(s.sugar?.toString()||""),J(s.saturated_fat?.toString()||""),te(s.trans_fat?.toString()||""),oe(s.monounsaturated_fat?.toString()||""),ae(s.polyunsaturated_fat?.toString()||""),ie(s.cholesterol?.toString()||""),ue(s.calcium?.toString()||""),fe(s.iron?.toString()||""),he(s.magnesium?.toString()||""),ve(s.phosphorus?.toString()||""),be(s.potassium?.toString()||""),_e(s.zinc?.toString()||""),Fe(s.vitamin_a?.toString()||""),Ne(s.vitamin_c?.toString()||""),Ce(s.vitamin_d?.toString()||""),Ee(s.vitamin_e?.toString()||""),Ae(s.vitamin_b12?.toString()||""),Re(s.folate?.toString()||""),B(!1),L("100g"),s.food_measures&&Array.isArray(s.food_measures)&&Ge(s.food_measures.map(a=>({label:a.measure_label,grams:a.quantity_grams})))):i&&v(i)},[s,i]);const ze=r.useMemo(()=>{if(w==="portion"&&A>0){const a=100/A;return{protein:C?((parseFloat(C)||0)*a).toFixed(2):"",carbs:$?((parseFloat($)||0)*a).toFixed(2):"",fat:_?((parseFloat(_)||0)*a).toFixed(2):"",calories:P?((parseFloat(P)||0)*a).toFixed(2):""}}return null},[w,A,C,$,_,P]);r.useEffect(()=>{if(w!==T&&A>0){const a=parseFloat(A)||100;if(T==="100g"&&w==="portion"){const t=a/100;C&&R(((parseFloat(C)||0)*t).toFixed(2)),$&&z(((parseFloat($)||0)*t).toFixed(2)),_&&E(((parseFloat(_)||0)*t).toFixed(2)),P&&k(((parseFloat(P)||0)*t).toFixed(2)),q&&G(((parseFloat(q)||0)*t).toFixed(2)),le&&ce(((parseFloat(le)||0)*t).toFixed(0)),K&&Q(((parseFloat(K)||0)*t).toFixed(2)),Z&&J(((parseFloat(Z)||0)*t).toFixed(2)),ee&&te(((parseFloat(ee)||0)*t).toFixed(2)),re&&oe(((parseFloat(re)||0)*t).toFixed(2)),se&&ae(((parseFloat(se)||0)*t).toFixed(2)),ne&&ie(((parseFloat(ne)||0)*t).toFixed(0)),de&&ue(((parseFloat(de)||0)*t).toFixed(0)),me&&fe(((parseFloat(me)||0)*t).toFixed(0)),pe&&he(((parseFloat(pe)||0)*t).toFixed(0)),ge&&ve(((parseFloat(ge)||0)*t).toFixed(0)),xe&&be(((parseFloat(xe)||0)*t).toFixed(0)),Se&&_e(((parseFloat(Se)||0)*t).toFixed(0)),je&&Fe(((parseFloat(je)||0)*t).toFixed(0)),ye&&Ne(((parseFloat(ye)||0)*t).toFixed(0)),we&&Ce(((parseFloat(we)||0)*t).toFixed(0)),$e&&Ee(((parseFloat($e)||0)*t).toFixed(0)),Pe&&Ae(((parseFloat(Pe)||0)*t).toFixed(0)),Te&&Re(((parseFloat(Te)||0)*t).toFixed(0))}else if(T==="portion"&&w==="100g"){const t=100/a;C&&R(((parseFloat(C)||0)*t).toFixed(2)),$&&z(((parseFloat($)||0)*t).toFixed(2)),_&&E(((parseFloat(_)||0)*t).toFixed(2)),P&&k(((parseFloat(P)||0)*t).toFixed(2)),q&&G(((parseFloat(q)||0)*t).toFixed(2)),le&&ce(((parseFloat(le)||0)*t).toFixed(0)),K&&Q(((parseFloat(K)||0)*t).toFixed(2)),Z&&J(((parseFloat(Z)||0)*t).toFixed(2)),ee&&te(((parseFloat(ee)||0)*t).toFixed(2)),re&&oe(((parseFloat(re)||0)*t).toFixed(2)),se&&ae(((parseFloat(se)||0)*t).toFixed(2)),ne&&ie(((parseFloat(ne)||0)*t).toFixed(0)),de&&ue(((parseFloat(de)||0)*t).toFixed(0)),me&&fe(((parseFloat(me)||0)*t).toFixed(0)),pe&&he(((parseFloat(pe)||0)*t).toFixed(0)),ge&&ve(((parseFloat(ge)||0)*t).toFixed(0)),xe&&be(((parseFloat(xe)||0)*t).toFixed(0)),Se&&_e(((parseFloat(Se)||0)*t).toFixed(0)),je&&Fe(((parseFloat(je)||0)*t).toFixed(0)),ye&&Ne(((parseFloat(ye)||0)*t).toFixed(0)),we&&Ce(((parseFloat(we)||0)*t).toFixed(0)),$e&&Ee(((parseFloat($e)||0)*t).toFixed(0)),Pe&&Ae(((parseFloat(Pe)||0)*t).toFixed(0)),Te&&Re(((parseFloat(Te)||0)*t).toFixed(0))}V(w)}},[w,T,A]),r.useEffect(()=>{if(Y&&C&&$&&_){let a=parseFloat(C)||0,t=parseFloat($)||0,m=parseFloat(_)||0;const b=a*4+t*4+m*9;k(Math.round(b*100)/100)}},[C,$,_,Y,w,A]);const Ot=a=>{if(!a)return null;if(w==="portion"&&A>0){const t=100/A;return parseFloat(a)*t}return parseFloat(a)},it=a=>{switch(a){case 1:return x.trim().length>0;case 2:return x.trim().length>0&&C&&$&&_&&P;case 3:case 4:case 5:return!0;default:return!1}},lt=()=>{c<g&&(it(c)?h(c+1):d({title:"Campos obrigat√≥rios",description:"Preencha todos os campos obrigat√≥rios antes de continuar.",variant:"destructive"}))},It=()=>{c>1&&h(c-1)},Vt=[{label:"Colher de Sopa",grams:15},{label:"Colher de Ch√°",grams:5},{label:"X√≠cara",grams:200},{label:"Unidade",grams:1},{label:"Fatia",grams:30},{label:"Colher de Servir",grams:20}],Bt=a=>{if(D.some(m=>m.label===a.label)){d({title:"Medida j√° adicionada",description:`${a.label} j√° est√° na lista.`,variant:"default"});return}Ge([...D,a])},Dt=a=>{Ge(D.filter((t,m)=>m!==a))},ct=a=>{const t=a.nutriments||{};a.product_name&&v(a.product_name),a.brands&&y(a.brands.split(",")[0].trim());let m=null;t.serving_size!==void 0&&t.serving_size>0?m=t.serving_size:a.serving_size!==void 0&&a.serving_size>0?m=a.serving_size:a.serving_quantity!==void 0&&a.serving_quantity_unit==="g"&&a.serving_quantity>0&&(m=a.serving_quantity);const b=t.proteins_serving!==void 0||t.carbohydrates_serving!==void 0||t.fat_serving!==void 0||t.energy_kcal_serving!==void 0;if(b&&m&&t.proteins_serving!==void 0){const p=100/m;R((t.proteins_serving*p).toFixed(2))}else t.proteins_100g!==void 0&&R(t.proteins_100g.toString());if(b&&m&&t.carbohydrates_serving!==void 0){const p=100/m;z((t.carbohydrates_serving*p).toFixed(2))}else t.carbohydrates_100g!==void 0&&z(t.carbohydrates_100g.toString());if(b&&m&&t.fat_serving!==void 0){const p=100/m;E((t.fat_serving*p).toFixed(2))}else t.fat_100g!==void 0&&E(t.fat_100g.toString());if(b&&m&&t.energy_kcal_serving!==void 0){const p=100/m;k((t.energy_kcal_serving*p).toFixed(2)),B(!1)}else if(b&&m&&t.energy_serving!==void 0){const p=100/m,He=t.energy_serving*p/4.184;k(He.toFixed(2)),B(!1)}else if(t.energy_kcal_100g!==void 0)k(t.energy_kcal_100g.toString()),B(!1);else if(t.energy_100g!==void 0){const p=t.energy_100g/4.184;k(p.toFixed(2)),B(!1)}if(b&&m&&t.fiber_serving!==void 0){const p=100/m;G((t.fiber_serving*p).toFixed(2))}else t.fiber_100g!==void 0&&G(t.fiber_100g.toString());if(b&&m&&t.sodium_serving!==void 0){const p=100/m;ce((t.sodium_serving*p*1e3).toFixed(0))}else t.sodium_100g!==void 0&&ce((t.sodium_100g*1e3).toString());if(b&&m&&t.sugars_serving!==void 0){const p=100/m;Q((t.sugars_serving*p).toFixed(2))}else t.sugars_100g!==void 0&&Q(t.sugars_100g.toString());if(b&&m&&t.saturated_fat_serving!==void 0){const p=100/m;J((t.saturated_fat_serving*p).toFixed(2))}else t.saturated_fat_100g!==void 0&&J(t.saturated_fat_100g.toString());if(b&&m&&t.trans_fat_serving!==void 0){const p=100/m;te((t.trans_fat_serving*p).toFixed(2))}else t.trans_fat_100g!==void 0&&te(t.trans_fat_100g.toString());if(b&&m&&t.monounsaturated_fat_serving!==void 0){const p=100/m;oe((t.monounsaturated_fat_serving*p).toFixed(2))}else t.monounsaturated_fat_100g!==void 0&&oe(t.monounsaturated_fat_100g.toString());if(b&&m&&t.polyunsaturated_fat_serving!==void 0){const p=100/m;ae((t.polyunsaturated_fat_serving*p).toFixed(2))}else t.polyunsaturated_fat_100g!==void 0&&ae(t.polyunsaturated_fat_100g.toString());if(b&&m&&t.cholesterol_serving!==void 0){const p=100/m;ie((t.cholesterol_serving*p).toFixed(0))}else t.cholesterol_100g!==void 0&&ie((t.cholesterol_100g*1e3).toFixed(0));if(b&&m&&t.calcium_serving!==void 0){const p=100/m;ue((t.calcium_serving*p*1e3).toFixed(0))}else t.calcium_100g!==void 0&&ue((t.calcium_100g*1e3).toString());if(b&&m&&t.iron_serving!==void 0){const p=100/m;fe((t.iron_serving*p*1e3).toFixed(0))}else t.iron_100g!==void 0&&fe((t.iron_100g*1e3).toString());if(b&&m&&t.vitamin_c_serving!==void 0){const p=100/m;Ne((t.vitamin_c_serving*p*1e3).toFixed(0))}else t.vitamin_c_100g!==void 0&&Ne((t.vitamin_c_100g*1e3).toString());if(b&&m&&t.vitamin_a_serving!==void 0){const p=100/m;Fe((t.vitamin_a_serving*p*1e3).toFixed(0))}else t.vitamin_a_100g!==void 0&&Fe((t.vitamin_a_100g*1e3).toString());if(b&&m&&t.vitamin_d_serving!==void 0){const p=100/m;Ce((t.vitamin_d_serving*p*1e3).toFixed(0))}else t.vitamin_d_100g!==void 0&&Ce((t.vitamin_d_100g*1e3).toString());if(b&&m&&t.vitamin_e_serving!==void 0){const p=100/m;Ee((t.vitamin_e_serving*p*1e3).toFixed(0))}else t.vitamin_e_100g!==void 0&&Ee((t.vitamin_e_100g*1e3).toString());if(b&&m&&t.vitamin_b12_serving!==void 0){const p=100/m;Ae((t.vitamin_b12_serving*p*1e3).toFixed(0))}else t.vitamin_b12_100g!==void 0&&Ae((t.vitamin_b12_100g*1e3).toString());if(b&&m&&t.folate_serving!==void 0){const p=100/m;Re((t.folate_serving*p*1e3).toFixed(0))}else t.folate_100g!==void 0&&Re((t.folate_100g*1e3).toString());if(b&&m&&t.magnesium_serving!==void 0){const p=100/m;he((t.magnesium_serving*p*1e3).toFixed(0))}else t.magnesium_100g!==void 0&&he((t.magnesium_100g*1e3).toString());if(b&&m&&t.phosphorus_serving!==void 0){const p=100/m;ve((t.phosphorus_serving*p*1e3).toFixed(0))}else t.phosphorus_100g!==void 0&&ve((t.phosphorus_100g*1e3).toString());if(b&&m&&t.potassium_serving!==void 0){const p=100/m;be((t.potassium_serving*p*1e3).toFixed(0))}else t.potassium_100g!==void 0&&be((t.potassium_100g*1e3).toString());if(b&&m&&t.zinc_serving!==void 0){const p=100/m;_e((t.zinc_serving*p*1e3).toFixed(0))}else t.zinc_100g!==void 0&&_e((t.zinc_100g*1e3).toString());L("100g"),V("100g"),m&&m>0&&m!==100?I(m):I(100)},Ht=a=>{const t=a.trim().replace(/\s/g,"");return/^\d{8,13}$/.test(t)},dt=async()=>{if(!De.trim()){d({title:"Erro",description:"Digite um c√≥digo de barras ou nome do produto.",variant:"destructive"});return}const a=De.trim();if(Ht(a)){Me(!0);try{const m=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${a}.json`)).json();if(m.status===0||!m.product){d({title:"Produto n√£o encontrado",description:"N√£o foi poss√≠vel encontrar este produto no OpenFoodFacts.",variant:"default"});return}ct(m.product),Ke(""),d({title:"Produto encontrado!",description:"Campos preenchidos automaticamente."})}catch(t){console.error("Erro ao buscar produto:",t),d({title:"Erro",description:"N√£o foi poss√≠vel buscar o produto. Verifique sua conex√£o.",variant:"destructive"})}finally{Me(!1)}}else{if(a.length<3){d({title:"Erro",description:"Digite pelo menos 3 caracteres para buscar por nome.",variant:"destructive"});return}Me(!0);try{const m=await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(a)}&json=1&page_size=20&fields=product_name,brands,code,image_url,nutriments`)).json();if(!m.products||m.products.length===0){d({title:"Nenhum produto encontrado",description:"N√£o foi poss√≠vel encontrar produtos com este nome no OpenFoodFacts.",variant:"default"});return}const b=m.products.filter(p=>p.product_name&&p.product_name.trim().length>0);if(b.length===0){d({title:"Nenhum produto v√°lido encontrado",description:"Os produtos encontrados n√£o possuem informa√ß√µes suficientes.",variant:"default"});return}nt(b),Ze(!0)}catch(t){console.error("Erro ao buscar produtos:",t),d({title:"Erro",description:"N√£o foi poss√≠vel buscar produtos. Verifique sua conex√£o.",variant:"destructive"})}finally{Me(!1)}}},ut=async a=>{Me(!0);try{const m=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${a}.json`)).json();if(m.status===0||!m.product){d({title:"Erro",description:"N√£o foi poss√≠vel carregar os dados do produto selecionado.",variant:"destructive"});return}ct(m.product),Ke(""),Ze(!1),nt([]),d({title:"Produto selecionado!",description:"Campos preenchidos automaticamente."})}catch(t){console.error("Erro ao carregar produto:",t),d({title:"Erro",description:"N√£o foi poss√≠vel carregar o produto. Verifique sua conex√£o.",variant:"destructive"})}finally{Me(!1)}},mt=async()=>{if(!it(2)){d({title:"Erro",description:"Preencha todos os campos obrigat√≥rios (Nome, Prote√≠na, Carboidratos, Gorduras, Calorias).",variant:"destructive"});return}if(w==="portion"&&(!A||parseFloat(A)<=0)){d({title:"Erro",description:"Informe o tamanho da por√ß√£o do r√≥tulo.",variant:"destructive"});return}st(!0);try{const a=b=>b?Ot(b):null,t={name:x.trim(),description:S.trim()?`Marca: ${S.trim()}`:null,calories:Math.round(a(P)*100)/100,protein:Math.round(a(C)*100)/100,carbs:Math.round(a($)*100)/100,fat:Math.round(a(_)*100)/100,fiber:a(q),sodium:a(le),sugar:a(K),saturated_fat:a(Z),trans_fat:a(ee),monounsaturated_fat:a(re),polyunsaturated_fat:a(se),cholesterol:a(ne),calcium:a(de),iron:a(me),magnesium:a(pe),phosphorus:a(ge),potassium:a(xe),zinc:a(Se),vitamin_a:a(je),vitamin_c:a(ye),vitamin_d:a(we),vitamin_e:a($e),vitamin_b12:a(Pe),folate:a(Te),portion_size:100,source:"custom",nutritionist_id:f?.id||null,group:"Personalizado",is_active:!0};let m;if(s){const{data:b,error:p}=await Je.from("foods").update(t).eq("id",s.id).select("id, name, group, description, source, calories, protein, carbs, fat, fiber, sodium, portion_size").single();if(p)throw p;m=b}else{const{data:b,error:p}=await ir(t);if(p)throw p;if(!b)throw new Error("Alimento criado mas n√£o retornado");m=b}if(D.length>0){s&&await Je.from("food_measures").delete().eq("food_id",m.id);const b=D.map(He=>({food_id:m.id,measure_label:He.label,quantity_grams:He.grams})),{error:p}=await Je.from("food_measures").insert(b);p&&console.warn("Erro ao criar medidas caseiras:",p)}d({title:s?"Alimento atualizado!":"Alimento criado!",description:`${x} foi ${s?"atualizado":"adicionado"} ao banco de dados.`}),n&&n(m)}catch(a){console.error("Erro ao salvar alimento:",a),d({title:"Erro",description:rr(a,"N√£o foi poss√≠vel salvar o alimento."),variant:"destructive"})}finally{st(!1)}};r.useImperativeHandle(u,()=>({submit:mt}));const Ut=l==="compact",ft=c/g*100,Wt=["B√°sico","Macronutrientes","Gorduras Detalhadas","Micronutrientes","Medidas Caseiras"];return e.jsxs("div",{className:Ut?"space-y-3":"space-y-6",children:[l!=="compact"&&e.jsx(Oe,{children:e.jsx(Ie,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-medium",children:["Passo ",c," de ",g,": ",Wt[c-1]]}),e.jsxs("span",{className:"text-muted-foreground",children:[Math.round(ft),"%"]})]}),e.jsx(sr,{value:ft,className:"h-2"})]})})}),e.jsxs(Oe,{children:[e.jsxs(pt,{children:[e.jsxs(ht,{className:"text-base",children:[c===1&&"1/5 - Informa√ß√µes B√°sicas",c===2&&"2/5 - Macronutrientes",c===3&&"3/5 - Gorduras Detalhadas e Outros (Opcional)",c===4&&"4/5 - Micronutrientes (Opcional)",c===5&&"5/5 - Medidas Caseiras (Opcional)"]}),e.jsxs(gt,{children:[c===1&&"Dados essenciais do alimento",c===2&&"Valores nutricionais principais (obrigat√≥rios)",c===3&&"Informa√ß√µes adicionais sobre gorduras e outros componentes",c===4&&"Vitaminas e minerais do alimento",c===5&&"Medidas caseiras para facilitar o uso"]})]}),e.jsxs(Ie,{className:"space-y-4",children:[c===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"name",children:["Nome do Alimento ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(F,{id:"name",value:x,onChange:a=>v(a.target.value),placeholder:"Ex: Bolo de Chocolate",autoFocus:!s})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"brand",children:"Marca (opcional)"}),e.jsx(F,{id:"brand",value:S,onChange:a=>y(a.target.value),placeholder:"Ex: Marca X"})]})]}),c===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ar,{value:w,onValueChange:L,className:"w-full",children:[e.jsxs(nr,{className:"grid w-full grid-cols-2",children:[e.jsx(xt,{value:"100g",children:"Dados por 100g"}),e.jsx(xt,{value:"portion",children:"Dados do R√≥tulo (Por√ß√£o)"})]}),e.jsx(bt,{value:"100g",className:"space-y-4 mt-4",children:e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Informe os valores nutricionais por 100g do alimento"]})})}),e.jsxs(bt,{value:"portion",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"labelPortionSize",children:["Tamanho da Por√ß√£o do R√≥tulo (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(F,{id:"labelPortionSize",type:"number",value:A,onChange:a=>I(a.target.value),placeholder:"Ex: 30"})]}),ze&&e.jsxs("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-emerald-900 dark:text-emerald-100 mb-2",children:"Equivalente por 100g:"}),e.jsxs("div",{className:"text-xs text-emerald-800 dark:text-emerald-200 space-y-1",children:[e.jsxs("p",{children:["Prote√≠na: ",ze.protein,"g"]}),e.jsxs("p",{children:["Carboidratos: ",ze.carbs,"g"]}),e.jsxs("p",{children:["Gorduras: ",ze.fat,"g"]}),ze.calories&&e.jsxs("p",{children:["Calorias: ",ze.calories," kcal"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"protein",children:["Prote√≠na (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(F,{id:"protein",type:"number",step:"0.1",value:C,onChange:a=>R(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"carbs",children:["Carboidratos (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(F,{id:"carbs",type:"number",step:"0.1",value:$,onChange:a=>z(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"fat",children:["Gorduras (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(F,{id:"fat",type:"number",step:"0.1",value:_,onChange:a=>E(a.target.value),placeholder:"0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(j,{htmlFor:"calories",children:["Calorias (kcal) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"autoCalc",checked:Y,onChange:a=>B(a.target.checked),className:"w-4 h-4"}),e.jsx(j,{htmlFor:"autoCalc",className:"text-sm font-normal cursor-pointer",children:"Calcular automaticamente"})]})]}),e.jsx(F,{id:"calories",type:"number",step:"0.1",value:P,onChange:a=>{k(a.target.value),B(!1)},placeholder:"0",disabled:Y,className:Y?"bg-muted":""}),Y&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"C√°lculo: (Prote√≠na √ó 4) + (Carboidratos √ó 4) + (Gorduras √ó 9)"})]})]}),c===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Esta etapa √© opcional. Voc√™ pode pular se n√£o tiver essas informa√ß√µes."]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"fiber",children:"Fibra (g)"}),e.jsx(F,{id:"fiber",type:"number",step:"0.1",value:q,onChange:a=>G(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"sugar",children:"A√ß√∫cares (g)"}),e.jsx(F,{id:"sugar",type:"number",step:"0.1",value:K,onChange:a=>Q(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"saturatedFat",children:"Gordura Saturada (g)"}),e.jsx(F,{id:"saturatedFat",type:"number",step:"0.1",value:Z,onChange:a=>J(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"transFat",children:"Gordura Trans (g)"}),e.jsx(F,{id:"transFat",type:"number",step:"0.1",value:ee,onChange:a=>te(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"monounsaturatedFat",children:"Gordura Monoinsaturada (g)"}),e.jsx(F,{id:"monounsaturatedFat",type:"number",step:"0.1",value:re,onChange:a=>oe(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"polyunsaturatedFat",children:"Gordura Poliinsaturada (g)"}),e.jsx(F,{id:"polyunsaturatedFat",type:"number",step:"0.1",value:se,onChange:a=>ae(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"cholesterol",children:"Colesterol (mg)"}),e.jsx(F,{id:"cholesterol",type:"number",step:"0.1",value:ne,onChange:a=>ie(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"sodium",children:"S√≥dio (mg)"}),e.jsx(F,{id:"sodium",type:"number",step:"0.1",value:le,onChange:a=>ce(a.target.value),placeholder:"0"})]})]})]}),c===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Esta etapa √© opcional. Voc√™ pode pular se n√£o tiver essas informa√ß√µes."]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:"Minerais (mg)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"calcium",children:"C√°lcio (mg)"}),e.jsx(F,{id:"calcium",type:"number",step:"0.1",value:de,onChange:a=>ue(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"iron",children:"Ferro (mg)"}),e.jsx(F,{id:"iron",type:"number",step:"0.1",value:me,onChange:a=>fe(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"magnesium",children:"Magn√©sio (mg)"}),e.jsx(F,{id:"magnesium",type:"number",step:"0.1",value:pe,onChange:a=>he(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"phosphorus",children:"F√≥sforo (mg)"}),e.jsx(F,{id:"phosphorus",type:"number",step:"0.1",value:ge,onChange:a=>ve(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"potassium",children:"Pot√°ssio (mg)"}),e.jsx(F,{id:"potassium",type:"number",step:"0.1",value:xe,onChange:a=>be(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"zinc",children:"Zinco (mg)"}),e.jsx(F,{id:"zinc",type:"number",step:"0.1",value:Se,onChange:a=>_e(a.target.value),placeholder:"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:"Vitaminas (mg)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"vitaminA",children:"Vitamina A (mg)"}),e.jsx(F,{id:"vitaminA",type:"number",step:"0.1",value:je,onChange:a=>Fe(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"vitaminC",children:"Vitamina C (mg)"}),e.jsx(F,{id:"vitaminC",type:"number",step:"0.1",value:ye,onChange:a=>Ne(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"vitaminD",children:"Vitamina D (mg)"}),e.jsx(F,{id:"vitaminD",type:"number",step:"0.1",value:we,onChange:a=>Ce(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"vitaminE",children:"Vitamina E (mg)"}),e.jsx(F,{id:"vitaminE",type:"number",step:"0.1",value:$e,onChange:a=>Ee(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"vitaminB12",children:"Vitamina B12 (mg)"}),e.jsx(F,{id:"vitaminB12",type:"number",step:"0.1",value:Pe,onChange:a=>Ae(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"folate",children:"Folato (mg)"}),e.jsx(F,{id:"folate",type:"number",step:"0.1",value:Te,onChange:a=>Re(a.target.value),placeholder:"0"})]})]})]})]}),c===5&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Esta etapa √© opcional. Voc√™ pode pular se n√£o quiser adicionar medidas caseiras."]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Vt.map((a,t)=>e.jsxs(or,{variant:"outline",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors px-3 py-1",onClick:()=>Bt(a),children:[e.jsx(lr,{className:"h-3 w-3 mr-1"}),a.label," (",a.grams,"g)"]},t))}),D.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{className:"text-sm",children:"Medidas Adicionadas:"}),e.jsx("div",{className:"space-y-2",children:D.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg bg-muted/30",children:[e.jsxs("span",{className:"text-sm",children:[a.label," - ",a.grams,"g"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>Dt(t),className:"h-6 w-6 p-0",children:e.jsx(Gt,{className:"h-3 w-3"})})]},t))})]})]})]})]}),l!=="compact"&&c===1&&e.jsxs(Oe,{className:"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",children:[e.jsxs(pt,{className:"pb-3",children:[e.jsxs(ht,{className:"text-base flex items-center gap-2 text-green-900 dark:text-green-100",children:[e.jsx(St,{className:"h-4 w-4"}),"Buscar no Banco de Alimentos P√∫blicos"]}),e.jsxs(gt,{className:"text-green-800 dark:text-green-200",children:[e.jsx("p",{className:"mb-1",children:"Busque por c√≥digo de barras (EAN) ou nome do produto"}),e.jsx("p",{className:"text-xs mt-1 opacity-75",children:"Utilizamos a plataforma OpenFoodFacts. Os dados podem ter imprecis√µes e devem ser verificados."})]})]}),e.jsxs(Ie,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(F,{id:"searchQuery",placeholder:"Digite o c√≥digo de barras (ex: 7891000100103) ou nome do produto (ex: Whey Protein)",value:De,onChange:a=>Ke(a.target.value),onKeyDown:a=>{a.key==="Enter"&&!Qe&&dt()},className:"flex-1 w-full"}),e.jsx(H,{onClick:dt,disabled:Qe||!De.trim(),className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto flex-shrink-0",children:Qe?e.jsx(vt,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(St,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Buscar"}),e.jsx("span",{className:"sm:hidden",children:"Buscar"})]})})]}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-300 break-words",children:"üí° Dica: Digite apenas n√∫meros para buscar por c√≥digo de barras, ou texto para buscar por nome do produto"})]})]}),e.jsx(Kt,{open:Lt,onOpenChange:Ze,children:e.jsxs(Qt,{className:"max-w-2xl max-h-[90vh] w-[95vw] sm:w-full p-4 sm:p-6 flex flex-col",children:[e.jsxs(Zt,{className:"pb-3 flex-shrink-0",children:[e.jsx(Jt,{className:"text-base sm:text-lg",children:"Selecione o Produto"}),e.jsxs(er,{className:"text-xs sm:text-sm",children:["Encontramos ",at.length," produto(s). Selecione o produto correto para preencher os dados automaticamente."]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto pr-2 sm:pr-4",children:e.jsx("div",{className:"space-y-2",children:at.map(a=>e.jsx(Oe,{className:"cursor-pointer hover:bg-muted transition-colors",onClick:()=>ut(a.code),children:e.jsx(Ie,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[a.image_url&&e.jsx("img",{src:a.image_url,alt:a.product_name,className:"w-12 h-12 sm:w-16 sm:h-16 object-cover rounded-lg flex-shrink-0",onError:t=>{t.target.style.display="none"}}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1 pr-2",children:[e.jsx("h4",{className:"font-semibold text-xs sm:text-sm break-words line-clamp-2 leading-tight",children:a.product_name||"Produto sem nome"}),a.brands&&e.jsxs("p",{className:"text-xs text-muted-foreground break-words line-clamp-1",children:["Marca: ",a.brands.split(",")[0].trim()]}),a.code&&e.jsxs("p",{className:"text-xs text-muted-foreground break-all",children:["C√≥digo: ",a.code]})]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:t=>{t.stopPropagation(),ut(a.code)},className:"flex-shrink-0 self-start whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:"Selecionar"}),e.jsx("span",{className:"sm:hidden",children:"OK"})]})]})})},a.code))})})]})}),l!=="compact"&&e.jsx(Oe,{children:e.jsx(Ie,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"flex gap-2",children:c>1&&e.jsxs(H,{variant:"outline",onClick:It,disabled:Le,size:"lg",children:[e.jsx(cr,{className:"h-4 w-4 mr-2"}),"Anterior"]})}),e.jsxs("div",{className:"flex gap-2",children:[(c===3||c===4||c===5)&&e.jsx(H,{variant:"ghost",onClick:lt,disabled:Le,size:"lg",children:"Pular"}),c<g?e.jsxs(H,{onClick:lt,disabled:Le,size:"lg",children:["Pr√≥ximo",e.jsx(tr,{className:"h-4 w-4 ml-2"})]}):e.jsx(H,{onClick:mt,disabled:Le,size:"lg",children:Le?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),s?"Atualizando...":"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dr,{className:"h-4 w-4 mr-2"}),s?"Atualizar Alimento":"Criar Alimento"]})})]})]})})})]})});export{to as S,Br as a};
