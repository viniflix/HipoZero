import{q as ns,r as t,a as ls,u as cs,j as e,C as se,e as ae,c as Ke,d as Ue,w as Ze,B as v,L as te,X as ds,M as ms,s as re}from"./index-CjuzupBo.js";import{I as n}from"./input-BW5PO48F.js";import{L as o}from"./label-Du8MEY0y.js";import{B as us}from"./badge-B7dL6Zq-.js";import{P as ps}from"./progress-DPAzLdXC.js";import{c as hs}from"./foodService-BG7WaLX-.js";import{S as We}from"./search-CNOpevo-.js";import{I as E}from"./info-C2It1f9Q.js";import{P as gs}from"./plus-ZIzWuj6X.js";import{C as xs}from"./chevron-left-BTmotyML.js";import{C as vs}from"./check-circle-2-DFZlAWio.js";const js=ns("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]),Es=t.forwardRef(function({initialData:r=null,onSuccess:oe,mode:Je="full",initialName:z=""},Qe){const{toast:c}=ls(),{user:Ye}=cs(),[i,ie]=t.useState(1),w=5,[S,k]=t.useState(""),[V,B]=t.useState(""),[j,A]=t.useState("100g"),[m,ne]=t.useState(100),[u,T]=t.useState(""),[p,I]=t.useState(""),[h,L]=t.useState(""),[f,C]=t.useState(""),[b,_]=t.useState(!0),[le,q]=t.useState(""),[ce,G]=t.useState(""),[de,O]=t.useState(""),[me,ue]=t.useState(""),[pe,he]=t.useState(""),[ge,xe]=t.useState(""),[ve,je]=t.useState(""),[fe,R]=t.useState(""),[be,$]=t.useState(""),[Ne,H]=t.useState(""),[ye,X]=t.useState(""),[Se,K]=t.useState(""),[Ce,U]=t.useState(""),[_e,Z]=t.useState(""),[Fe,W]=t.useState(""),[we,J]=t.useState(""),[ke,Q]=t.useState(""),[Me,Y]=t.useState(""),[Pe,D]=t.useState(""),[Ee,ee]=t.useState(""),[x,ze]=t.useState([]),[F,Ve]=t.useState(!1),[M,De]=t.useState(""),[N,es]=t.useState(""),[Be,Ae]=t.useState(!1),[Te,Ie]=t.useState(!1);t.useEffect(()=>{r?(k(r.name||""),B(r.description?.replace("Marca: ","")||""),T(r.protein?.toString()||""),I(r.carbs?.toString()||""),L(r.fat?.toString()||""),C(r.calories?.toString()||""),q(r.fiber?.toString()||""),R(r.sodium?.toString()||""),G(r.sugar?.toString()||""),O(r.saturated_fat?.toString()||""),ue(r.trans_fat?.toString()||""),he(r.monounsaturated_fat?.toString()||""),xe(r.polyunsaturated_fat?.toString()||""),je(r.cholesterol?.toString()||""),$(r.calcium?.toString()||""),H(r.iron?.toString()||""),X(r.magnesium?.toString()||""),K(r.phosphorus?.toString()||""),U(r.potassium?.toString()||""),Z(r.zinc?.toString()||""),W(r.vitamin_a?.toString()||""),J(r.vitamin_c?.toString()||""),Q(r.vitamin_d?.toString()||""),Y(r.vitamin_e?.toString()||""),D(r.vitamin_b12?.toString()||""),ee(r.folate?.toString()||""),_(!1),A("100g")):z&&k(z)},[r,z]);const y=t.useMemo(()=>{if(j==="portion"&&m>0){const s=100/m;return{protein:u?((parseFloat(u)||0)*s).toFixed(2):"",carbs:p?((parseFloat(p)||0)*s).toFixed(2):"",fat:h?((parseFloat(h)||0)*s).toFixed(2):"",calories:f?((parseFloat(f)||0)*s).toFixed(2):""}}return null},[j,m,u,p,h,f]);t.useEffect(()=>{if(b&&u&&p&&h){let s=parseFloat(u)||0,a=parseFloat(p)||0,l=parseFloat(h)||0;const d=s*4+a*4+l*9;C(Math.round(d*100)/100)}},[u,p,h,b,j,m]);const ss=s=>{if(!s)return null;if(j==="portion"&&m>0){const a=100/m;return parseFloat(s)*a}return parseFloat(s)},Le=s=>{switch(s){case 1:return S.trim().length>0;case 2:return S.trim().length>0&&u&&p&&h&&f;case 3:case 4:case 5:return!0;default:return!1}},qe=()=>{i<w&&(Le(i)?ie(i+1):c({title:"Campos obrigatórios",description:"Preencha todos os campos obrigatórios antes de continuar.",variant:"destructive"}))},as=()=>{i>1&&ie(i-1)},ts=[{label:"Colher de Sopa",grams:15},{label:"Colher de Chá",grams:5},{label:"Xícara",grams:200},{label:"Unidade",grams:1},{label:"Fatia",grams:30},{label:"Colher de Servir",grams:20}],rs=s=>{if(x.some(l=>l.label===s.label)){c({title:"Medida já adicionada",description:`${s.label} já está na lista.`,variant:"default"});return}ze([...x,s])},os=s=>{ze(x.filter((a,l)=>l!==s))},Ge=s=>{const a=s.nutriments||{};if(s.product_name&&k(s.product_name),s.brands&&B(s.brands.split(",")[0].trim()),a.proteins_100g!==void 0&&T(a.proteins_100g.toString()),a.carbohydrates_100g!==void 0&&I(a.carbohydrates_100g.toString()),a.fat_100g!==void 0&&L(a.fat_100g.toString()),a.fiber_100g!==void 0&&q(a.fiber_100g.toString()),a.sodium_100g!==void 0&&R((a.sodium_100g*1e3).toString()),a.sugars_100g!==void 0&&G(a.sugars_100g.toString()),a.saturated_fat_100g!==void 0&&O(a.saturated_fat_100g.toString()),a.calcium_100g!==void 0&&$((a.calcium_100g*1e3).toString()),a.iron_100g!==void 0&&H((a.iron_100g*1e3).toString()),a.vitamin_c_100g!==void 0&&J((a.vitamin_c_100g*1e3).toString()),a.vitamin_a_100g!==void 0&&W((a.vitamin_a_100g*1e3).toString()),a.vitamin_d_100g!==void 0&&Q((a.vitamin_d_100g*1e3).toString()),a.vitamin_e_100g!==void 0&&Y((a.vitamin_e_100g*1e3).toString()),a.vitamin_b12_100g!==void 0&&D((a.vitamin_b12_100g*1e3).toString()),a.folate_100g!==void 0&&ee((a.folate_100g*1e3).toString()),a.magnesium_100g!==void 0&&X((a.magnesium_100g*1e3).toString()),a.phosphorus_100g!==void 0&&K((a.phosphorus_100g*1e3).toString()),a.potassium_100g!==void 0&&U((a.potassium_100g*1e3).toString()),a.zinc_100g!==void 0&&Z((a.zinc_100g*1e3).toString()),a.energy_kcal_100g!==void 0)C(a.energy_kcal_100g.toString()),_(!1);else if(a.energy_100g!==void 0){const l=a.energy_100g/4.184;C(l.toFixed(2)),_(!1)}A("100g"),ne(100)},Oe=async()=>{if(!M.trim()){c({title:"Erro",description:"Digite um código de barras válido.",variant:"destructive"});return}Ae(!0);try{const a=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${M.trim()}.json`)).json();if(a.status===0||!a.product){c({title:"Produto não encontrado",description:"Não foi possível encontrar este produto no OpenFoodFacts.",variant:"default"});return}Ge(a.product),c({title:"Produto encontrado!",description:"Campos preenchidos automaticamente."})}catch(s){console.error("Erro ao buscar produto:",s),c({title:"Erro",description:"Não foi possível buscar o produto. Verifique sua conexão.",variant:"destructive"})}finally{Ae(!1)}},Re=async()=>{if(!N.trim()||N.length<3){c({title:"Erro",description:"Digite pelo menos 3 caracteres para buscar.",variant:"destructive"});return}Ie(!0);try{const a=await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(N.trim())}&json=1&page_size=1`)).json();if(!a.products||a.products.length===0){c({title:"Produto não encontrado",description:"Não foi possível encontrar este produto no OpenFoodFacts.",variant:"default"});return}const l=a.products[0];Ge(l),c({title:"Produto encontrado!",description:`${l.product_name||"Produto"} encontrado e preenchido automaticamente.`})}catch(s){console.error("Erro ao buscar produto:",s),c({title:"Erro",description:"Não foi possível buscar o produto. Verifique sua conexão.",variant:"destructive"})}finally{Ie(!1)}},$e=async()=>{if(!Le(2)){c({title:"Erro",description:"Preencha todos os campos obrigatórios (Nome, Proteína, Carboidratos, Gorduras, Calorias).",variant:"destructive"});return}if(j==="portion"&&(!m||parseFloat(m)<=0)){c({title:"Erro",description:"Informe o tamanho da porção do rótulo.",variant:"destructive"});return}Ve(!0);try{const s=d=>d?ss(d):null,a={name:S.trim(),description:V.trim()?`Marca: ${V.trim()}`:null,calories:Math.round(s(f)*100)/100,protein:Math.round(s(u)*100)/100,carbs:Math.round(s(p)*100)/100,fat:Math.round(s(h)*100)/100,fiber:s(le),sodium:s(fe),sugar:s(ce),saturated_fat:s(de),trans_fat:s(me),monounsaturated_fat:s(pe),polyunsaturated_fat:s(ge),cholesterol:s(ve),calcium:s(be),iron:s(Ne),magnesium:s(ye),phosphorus:s(Se),potassium:s(Ce),zinc:s(_e),vitamin_a:s(Fe),vitamin_c:s(we),vitamin_d:s(ke),vitamin_e:s(Me),vitamin_b12:s(Pe),folate:s(Ee),portion_size:100,source:"custom",nutritionist_id:Ye?.id||null,group:"Personalizado",is_active:!0};let l;if(r){const{data:d,error:g}=await re.from("foods").update(a).eq("id",r.id).select("id, name, group, description, source, calories, protein, carbs, fat, fiber, sodium, portion_size").single();if(g)throw g;l=d}else{const{data:d,error:g}=await hs(a);if(g)throw g;if(!d)throw new Error("Alimento criado mas não retornado");l=d}if(x.length>0){r&&await re.from("food_measures").delete().eq("food_id",l.id);const d=x.map(Xe=>({food_id:l.id,measure_label:Xe.label,quantity_grams:Xe.grams})),{error:g}=await re.from("food_measures").insert(d);g&&console.warn("Erro ao criar medidas caseiras:",g)}c({title:r?"Alimento atualizado!":"Alimento criado!",description:`${S} foi ${r?"atualizado":"adicionado"} ao banco de dados.`}),oe&&oe(l)}catch(s){console.error("Erro ao salvar alimento:",s),c({title:"Erro",description:s.message||"Não foi possível salvar o alimento.",variant:"destructive"})}finally{Ve(!1)}};t.useImperativeHandle(Qe,()=>({submit:$e}));const P=Je==="compact",He=i/w*100,is=["Básico","Macronutrientes","Gorduras Detalhadas","Micronutrientes","Medidas Caseiras"];return e.jsxs("div",{className:P?"space-y-3":"space-y-6",children:[!P&&e.jsx(se,{children:e.jsx(ae,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-medium",children:["Passo ",i," de ",w,": ",is[i-1]]}),e.jsxs("span",{className:"text-muted-foreground",children:[Math.round(He),"%"]})]}),e.jsx(ps,{value:He,className:"h-2"})]})})}),!P&&i===1&&e.jsxs(se,{children:[e.jsxs(Ke,{className:"pb-3",children:[e.jsxs(Ue,{className:"text-base flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"Buscar Produto no OpenFoodFacts"]}),e.jsx(Ze,{children:"Busque por código de barras ou nome do produto para preencher automaticamente"})]}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"barcode",children:"Código de Barras (EAN)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{id:"barcode",placeholder:"Ex: 7891000100103",value:M,onChange:s=>De(s.target.value),onKeyDown:s=>{s.key==="Enter"&&Oe()}}),e.jsx(v,{onClick:Oe,disabled:Be||!M.trim(),variant:"outline",children:Be?e.jsx(te,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Buscar"]})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"ou"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"searchTerm",children:"Nome do Produto"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{id:"searchTerm",placeholder:"Ex: Nutella",value:N,onChange:s=>es(s.target.value),onKeyDown:s=>{s.key==="Enter"&&Re()}}),e.jsx(v,{onClick:Re,disabled:Te||!N.trim()||N.length<3,variant:"outline",children:Te?e.jsx(te,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Buscar"]})})]})]})]})]}),e.jsxs(se,{children:[e.jsxs(Ke,{children:[e.jsxs(Ue,{className:"text-base",children:[i===1&&"1/5 - Informações Básicas",i===2&&"2/5 - Macronutrientes",i===3&&"3/5 - Gorduras Detalhadas e Outros (Opcional)",i===4&&"4/5 - Micronutrientes (Opcional)",i===5&&"5/5 - Medidas Caseiras (Opcional)"]}),e.jsxs(Ze,{children:[i===1&&"Dados essenciais do alimento",i===2&&"Valores nutricionais principais (obrigatórios)",i===3&&"Informações adicionais sobre gorduras e outros componentes",i===4&&"Vitaminas e minerais do alimento",i===5&&"Medidas caseiras para facilitar o uso"]})]}),e.jsxs(ae,{className:"space-y-4",children:[i===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"name",children:["Nome do Alimento ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(n,{id:"name",value:S,onChange:s=>k(s.target.value),placeholder:"Ex: Bolo de Chocolate",autoFocus:!r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"brand",children:"Marca (opcional)"}),e.jsx(n,{id:"brand",value:V,onChange:s=>B(s.target.value),placeholder:"Ex: Marca X"})]})]}),i===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Tabs,{value:j,onValueChange:A,className:"w-full",children:[e.jsxs(TabsList,{className:"grid w-full grid-cols-2",children:[e.jsx(TabsTrigger,{value:"100g",children:"Dados por 100g"}),e.jsx(TabsTrigger,{value:"portion",children:"Dados do Rótulo (Porção)"})]}),e.jsx(TabsContent,{value:"100g",className:"space-y-4 mt-4",children:e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100 flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Informe os valores nutricionais por 100g do alimento"]})})}),e.jsxs(TabsContent,{value:"portion",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"labelPortionSize",children:["Tamanho da Porção do Rótulo (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(n,{id:"labelPortionSize",type:"number",value:m,onChange:s=>ne(s.target.value),placeholder:"Ex: 30"})]}),y&&e.jsxs("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-emerald-900 dark:text-emerald-100 mb-2",children:"Equivalente por 100g:"}),e.jsxs("div",{className:"text-xs text-emerald-800 dark:text-emerald-200 space-y-1",children:[e.jsxs("p",{children:["Proteína: ",y.protein,"g"]}),e.jsxs("p",{children:["Carboidratos: ",y.carbs,"g"]}),e.jsxs("p",{children:["Gorduras: ",y.fat,"g"]}),y.calories&&e.jsxs("p",{children:["Calorias: ",y.calories," kcal"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"protein",children:["Proteína (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(n,{id:"protein",type:"number",step:"0.1",value:u,onChange:s=>T(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"carbs",children:["Carboidratos (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(n,{id:"carbs",type:"number",step:"0.1",value:p,onChange:s=>I(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"fat",children:["Gorduras (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(n,{id:"fat",type:"number",step:"0.1",value:h,onChange:s=>L(s.target.value),placeholder:"0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{htmlFor:"calories",children:["Calorias (kcal) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"autoCalc",checked:b,onChange:s=>_(s.target.checked),className:"w-4 h-4"}),e.jsx(o,{htmlFor:"autoCalc",className:"text-sm font-normal cursor-pointer",children:"Calcular automaticamente"})]})]}),e.jsx(n,{id:"calories",type:"number",step:"0.1",value:f,onChange:s=>{C(s.target.value),_(!1)},placeholder:"0",disabled:b,className:b?"bg-muted":""}),b&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cálculo: (Proteína × 4) + (Carboidratos × 4) + (Gorduras × 9)"})]})]}),i===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Esta etapa é opcional. Você pode pular se não tiver essas informações."]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"fiber",children:"Fibra (g)"}),e.jsx(n,{id:"fiber",type:"number",step:"0.1",value:le,onChange:s=>q(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"sugar",children:"Açúcares (g)"}),e.jsx(n,{id:"sugar",type:"number",step:"0.1",value:ce,onChange:s=>G(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"saturatedFat",children:"Gordura Saturada (g)"}),e.jsx(n,{id:"saturatedFat",type:"number",step:"0.1",value:de,onChange:s=>O(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"transFat",children:"Gordura Trans (g)"}),e.jsx(n,{id:"transFat",type:"number",step:"0.1",value:me,onChange:s=>ue(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"monounsaturatedFat",children:"Gordura Monoinsaturada (g)"}),e.jsx(n,{id:"monounsaturatedFat",type:"number",step:"0.1",value:pe,onChange:s=>he(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"polyunsaturatedFat",children:"Gordura Poliinsaturada (g)"}),e.jsx(n,{id:"polyunsaturatedFat",type:"number",step:"0.1",value:ge,onChange:s=>xe(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"cholesterol",children:"Colesterol (mg)"}),e.jsx(n,{id:"cholesterol",type:"number",step:"0.1",value:ve,onChange:s=>je(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"sodium",children:"Sódio (mg)"}),e.jsx(n,{id:"sodium",type:"number",step:"0.1",value:fe,onChange:s=>R(s.target.value),placeholder:"0"})]})]})]}),i===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Esta etapa é opcional. Você pode pular se não tiver essas informações."]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:"Minerais (mg)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"calcium",children:"Cálcio (mg)"}),e.jsx(n,{id:"calcium",type:"number",step:"0.1",value:be,onChange:s=>$(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"iron",children:"Ferro (mg)"}),e.jsx(n,{id:"iron",type:"number",step:"0.1",value:Ne,onChange:s=>H(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"magnesium",children:"Magnésio (mg)"}),e.jsx(n,{id:"magnesium",type:"number",step:"0.1",value:ye,onChange:s=>X(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"phosphorus",children:"Fósforo (mg)"}),e.jsx(n,{id:"phosphorus",type:"number",step:"0.1",value:Se,onChange:s=>K(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"potassium",children:"Potássio (mg)"}),e.jsx(n,{id:"potassium",type:"number",step:"0.1",value:Ce,onChange:s=>U(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"zinc",children:"Zinco (mg)"}),e.jsx(n,{id:"zinc",type:"number",step:"0.1",value:_e,onChange:s=>Z(s.target.value),placeholder:"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:"Vitaminas (mg)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"vitaminA",children:"Vitamina A (mg)"}),e.jsx(n,{id:"vitaminA",type:"number",step:"0.1",value:Fe,onChange:s=>W(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"vitaminC",children:"Vitamina C (mg)"}),e.jsx(n,{id:"vitaminC",type:"number",step:"0.1",value:we,onChange:s=>J(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"vitaminD",children:"Vitamina D (mg)"}),e.jsx(n,{id:"vitaminD",type:"number",step:"0.1",value:ke,onChange:s=>Q(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"vitaminE",children:"Vitamina E (mg)"}),e.jsx(n,{id:"vitaminE",type:"number",step:"0.1",value:Me,onChange:s=>Y(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"vitaminB12",children:"Vitamina B12 (mg)"}),e.jsx(n,{id:"vitaminB12",type:"number",step:"0.1",value:Pe,onChange:s=>D(s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"folate",children:"Folato (mg)"}),e.jsx(n,{id:"folate",type:"number",step:"0.1",value:Ee,onChange:s=>ee(s.target.value),placeholder:"0"})]})]})]})]}),i===5&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Esta etapa é opcional. Você pode pular se não quiser adicionar medidas caseiras."]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ts.map((s,a)=>e.jsxs(us,{variant:"outline",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors px-3 py-1",onClick:()=>rs(s),children:[e.jsx(gs,{className:"h-3 w-3 mr-1"}),s.label," (",s.grams,"g)"]},a))}),x.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{className:"text-sm",children:"Medidas Adicionadas:"}),e.jsx("div",{className:"space-y-2",children:x.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg bg-muted/30",children:[e.jsxs("span",{className:"text-sm",children:[s.label," - ",s.grams,"g"]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>os(a),className:"h-6 w-6 p-0",children:e.jsx(ds,{className:"h-3 w-3"})})]},a))})]})]})]})]}),!P&&e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-4 border-t",children:[e.jsx("div",{className:"flex gap-2",children:i>1&&e.jsxs(v,{variant:"outline",onClick:as,disabled:F,children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Anterior"]})}),e.jsxs("div",{className:"flex gap-2",children:[(i===3||i===4||i===5)&&e.jsx(v,{variant:"ghost",onClick:qe,disabled:F,children:"Pular"}),i<w?e.jsxs(v,{onClick:qe,disabled:F,children:["Próximo",e.jsx(ms,{className:"h-4 w-4 ml-2"})]}):e.jsx(v,{onClick:$e,disabled:F,size:"lg",children:F?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}),r?"Atualizando...":"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),r?"Atualizar Alimento":"Criar Alimento"]})})]})]})]})});export{Es as S};
