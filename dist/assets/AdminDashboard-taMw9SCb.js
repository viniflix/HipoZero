import{q as A,Z as X,bf as je,s as ye,u as ve,b as Ne,a as be,r as g,j as e,C as l,e as c,B as C,O as R,H as Q,m as d,ar as E,c as m,d as x,E as Z,w as y}from"./index-BMu6LTXa.js";import{B as U}from"./badge-0cJv7S-m.js";import{A as we,a as De,b as Ae}from"./avatar-6DUWzYv2.js";import{S as h}from"./skeleton-BA-qU3JR.js";import"./input-CXSA6UoP.js";import{T as Ce}from"./textarea-h0Xz8eoo.js";import{T as Se,a as Me,b as B,c as L}from"./tabs-BbqWwJ4a.js";import{S as W}from"./shield-alert-BhX1vR5W.js";import{S as ke}from"./stethoscope-BsZdOwy5.js";import{U as $}from"./users-BLQ0bruO.js";import{A as Pe}from"./activity-CIBRJ92P.js";import{n as Te,o as Re,R as H,T as _,l as Ee,p as Ue,B as Be}from"./generateCategoricalChart-CQ5WRpTv.js";import{A as ae}from"./Area-BC2IBqUf.js";import{X as z,Y as q}from"./YAxis-Cs7tBHT6.js";import{C as ee}from"./CartesianGrid-BkEhVOUh.js";import{P as Le,a as $e}from"./PieChart-C8aJU8t9.js";import{B as He}from"./BarChart-BPDm7Ann.js";import{S as _e}from"./send-M2WN8zuq.js";import{I as Fe}from"./info-BU-ZT46u.js";import{A as Oe}from"./alert-triangle-B847Zgs4.js";import{A as Ie}from"./alert-circle-CajVSNi-.js";import{s as ze}from"./subMonths-X3KzWMak.js";import"./addMonths-qUKDtvWx.js";const qe=A("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),F=A("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ge=A("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),O=A("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),Ve=A("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function Ke(a,r){const o=X(a),n=X(r),v=se(o,n),f=Math.abs(je(o,n));o.setDate(o.getDate()-v*f);const b=+(se(o,n)===-v),p=v*(f-b);return p===0?0:p}function se(a,r){const o=a.getFullYear()-r.getFullYear()||a.getMonth()-r.getMonth()||a.getDate()-r.getDate()||a.getHours()-r.getHours()||a.getMinutes()-r.getMinutes()||a.getSeconds()-r.getSeconds()||a.getMilliseconds()-r.getMilliseconds();return o<0?-1:o>0?1:o}var Ye=Te({chartName:"AreaChart",GraphicalChild:ae,axisComponents:[{axisType:"xAxis",AxisComp:z},{axisType:"yAxis",AxisComp:q}],formatAxisMap:Re});async function Je(){try{const{data:a,error:r}=await ye.rpc("get_admin_dashboard_stats");return console.log("[adminService] RPC Response:",{data:a,error:r}),r?(console.error("[adminService] Erro ao buscar estatísticas:",r),{data:null,error:r}):(a&&console.log("[adminService] Data structure:",JSON.stringify(a,null,2)),{data:a,error:null})}catch(a){return console.error("[adminService] Erro inesperado:",a),{data:null,error:a}}}const te=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],I=[{type:"info",message:"Registro de refeição: Café da manhã completo",user:"Maria Silva"},{type:"info",message:"Sessão iniciada: Nutricionista autenticado",user:"Dr. João Santos"},{type:"info",message:"Hidratação registrada: 500ml de água",user:"Ana Costa"},{type:"info",message:"Acesso ao painel: Dashboard de pacientes",user:"Dr. Pedro Lima"},{type:"info",message:"Atualização antropométrica: Peso registrado",user:"Carlos Souza"},{type:"warning",message:"Tentativa de autenticação falhou: Credenciais inválidas",user:"Sistema"},{type:"info",message:"Nova mensagem: Chat entre paciente e nutricionista",user:"Julia Ferreira"},{type:"error",message:"Erro de servidor: Timeout na requisição /api/meals",user:"Sistema"},{type:"info",message:"Questionário completado: Anamnese nutricional",user:"Roberto Alves"},{type:"info",message:"Agendamento criado: Consulta para próxima semana",user:"Dr. Fernanda Rocha"},{type:"info",message:"Plano alimentar atualizado: Nova prescrição",user:"Dr. Lucas Mendes"},{type:"info",message:"Progresso registrado: Meta de proteínas atingida",user:"Patricia Oliveira"},{type:"info",message:"Upload realizado: Foto de progresso adicionada",user:"Ricardo Almeida"},{type:"warning",message:"Alerta: Paciente sem registro há 7 dias",user:"Sistema"},{type:"info",message:"Exportação de dados: Relatório gerado",user:"Dr. Camila Rodrigues"}];function ys(){const{user:a}=ve(),r=Ne(),{toast:o}=be(),[n,v]=g.useState(!0),[f,b]=g.useState(null),[p,G]=g.useState(""),[V,S]=g.useState([]),w=g.useRef(null),[M,re]=g.useState("overview"),N=a?.profile?.is_admin===!0;g.useEffect(()=>{if(a&&!N){o({title:"Acesso Negado",description:"Esta página é restrita a administradores.",variant:"destructive"}),r("/nutritionist",{replace:!0});return}N&&oe()},[a,N,r,o]);const ie=(s,i=50)=>{if(!s)return!1;const{scrollHeight:t,scrollTop:u,clientHeight:D}=s;return t-u-D<=i},K=()=>{w.current&&w.current.scrollTo({top:w.current.scrollHeight,behavior:"smooth"})};g.useEffect(()=>{if(M!=="system"||!N)return;const s=I.slice(0,5).map((t,u)=>({id:`log-${Date.now()}-${u}`,type:t.type,message:t.message,user:t.user,timestamp:new Date(Date.now()-(5-u)*1e4).toISOString()}));S(s),setTimeout(()=>K(),100);const i=setInterval(()=>{const t=ie(w.current,50),u=I[Math.floor(Math.random()*I.length)],D={id:`log-${Date.now()}`,type:u.type,message:u.message,user:u.user,timestamp:new Date().toISOString()};S(T=>{const fe=[D,...T].slice(0,50);return t&&setTimeout(()=>K(),50),fe})},Math.random()*4e3+8e3);return()=>clearInterval(i)},[M,N]);const oe=async()=>{v(!0);try{const{data:s,error:i}=await Je();if(i){console.error("[AdminDashboard] Erro ao carregar estatísticas:",i),o({title:"Erro",description:"Não foi possível carregar as estatísticas do dashboard.",variant:"destructive"}),b({kpis:{totalNutritionists:0,totalPatients:0,totalMeals:0,activePatients:0},growthData:[],goalsDistribution:[],recentUsers:[]});return}console.log("[AdminDashboard] Received stats data:",s);let t=null;s&&(s.kpis||s.counts||s.totalNutritionists!==void 0?t={kpis:{totalNutritionists:s.kpis?.totalNutritionists||s.counts?.nutritionists||s.totalNutritionists||0,totalPatients:s.kpis?.totalPatients||s.counts?.patients||s.totalPatients||0,totalMeals:s.kpis?.totalMeals||s.counts?.meals||s.totalMeals||0,activePatients:s.kpis?.activePatients||s.counts?.activePatients||s.activePatients||0},growthData:s.growthData||s.growth||s.userGrowth||[],goalsDistribution:s.goalsDistribution||s.goals||s.patientGoals||[],recentUsers:s.recentUsers||s.users||s.newUsers||[]}:t={kpis:{totalNutritionists:s.totalNutritionists||s.nutritionists||0,totalPatients:s.totalPatients||s.patients||0,totalMeals:s.totalMeals||s.meals||0,activePatients:s.activePatients||0},growthData:s.growthData||[],goalsDistribution:s.goalsDistribution||[],recentUsers:s.recentUsers||[]}),console.log("[AdminDashboard] Processed stats:",t),b(t||{kpis:{totalNutritionists:0,totalPatients:0,totalMeals:0,activePatients:0},growthData:[],goalsDistribution:[],recentUsers:[]})}catch(s){console.error("[AdminDashboard] Erro inesperado:",s),o({title:"Erro",description:"Ocorreu um erro inesperado ao carregar os dados.",variant:"destructive"}),b({kpis:{totalNutritionists:0,totalPatients:0,totalMeals:0,activePatients:0},growthData:[],goalsDistribution:[],recentUsers:[]})}finally{v(!1)}},ne=()=>{if(!p.trim()){o({title:"Mensagem vazia",description:"Por favor, digite uma mensagem para enviar.",variant:"destructive"});return}console.log(`[BROADCAST SENT]: ${p}`),o({title:"Broadcast Enviado",description:`Mensagem enviada para todos os usuários: "${p}"`,duration:5e3});const s={id:`log-broadcast-${Date.now()}`,type:"info",message:`Broadcast enviado: ${p}`,user:"Sistema",timestamp:new Date().toISOString()};S(i=>[s,...i].slice(0,50)),G("")};if(!a||!N)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(l,{className:"max-w-md",children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsx(W,{className:"w-12 h-12 text-destructive"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Acesso Negado"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Esta página é restrita a administradores."})]}),e.jsx(C,{onClick:()=>r("/nutritionist"),children:"Voltar ao Dashboard"})]})})})});const j=f?.kpis||{totalNutritionists:0,totalPatients:0,totalMeals:0,activePatients:0},le=f?.growthData||[],ce=f?.goalsDistribution||[],Y=f?.recentUsers||[],k=j.totalNutritionists*97,de=j.totalNutritionists>0?k/j.totalNutritionists:0,me=2.5,xe=Array.from({length:6},(s,i)=>{const t=ze(new Date,5-i),u=R(t,"MMM",{locale:Q}),D=k*.8,T=(5-i)*.05;return{month:u.charAt(0).toUpperCase()+u.slice(1),receita:Math.round(D*(1+T))}}),J=le.map(s=>({month:s.month||s.period||"N/A",users:s.users||s.count||0})),P=ce.map(s=>({name:s.name||s.goal||"Outros",value:s.value||s.count||0})),he=s=>{try{const i=new Date(s),t=Ke(new Date,i);return t===0?"Hoje":t===1?"Há 1 dia":t<7?`Há ${t} dias`:t<30?`Há ${Math.floor(t/7)} semanas`:t<365?`Há ${Math.floor(t/30)} meses`:`Há ${Math.floor(t/365)} anos`}catch{return"Data inválida"}},ue=s=>{try{return R(new Date(s),"HH:mm:ss")}catch{return"--:--:--"}},pe=s=>{switch(s){case"error":return e.jsx(Ie,{className:"w-3.5 h-3.5 text-red-500"});case"warning":return e.jsx(Oe,{className:"w-3.5 h-3.5 text-yellow-500"});default:return e.jsx(Fe,{className:"w-3.5 h-3.5 text-blue-500"})}},ge=s=>{switch(s){case"error":return"destructive";case"warning":return"warning";default:return"secondary"}};return e.jsx("div",{className:"flex flex-col min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full px-4 md:px-8 py-8 space-y-8",children:[e.jsx(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Painel de Controle Executivo"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:R(new Date,"EEEE, d 'de' MMMM 'de' yyyy",{locale:Q})})]}),e.jsxs(U,{variant:"outline",className:"text-sm",children:[e.jsx(W,{className:"w-3.5 h-3.5 mr-1.5"}),"Administrador"]})]})}),e.jsxs(Se,{defaultValue:"overview",value:M,onValueChange:re,className:"space-y-6",children:[e.jsxs(Me,{className:"grid w-full grid-cols-3",children:[e.jsxs(B,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Visão Geral"]}),e.jsxs(B,{value:"finance",className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Financeiro"]}),e.jsxs(B,{value:"system",className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"Sistema & Logs"]})]}),e.jsxs(L,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(l,{className:"hover:shadow-lg transition-shadow border-l-4 border-l-blue-500",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium text-muted-foreground",children:"Total Nutricionistas"}),e.jsx(ke,{className:"h-5 w-5 text-blue-500"})]}),e.jsxs(c,{children:[n?e.jsx(h,{className:"h-8 w-20"}):e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:j.totalNutritionists}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Profissionais cadastrados"})]})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(l,{className:"hover:shadow-lg transition-shadow border-l-4 border-l-green-500",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium text-muted-foreground",children:"Total Pacientes"}),e.jsx($,{className:"h-5 w-5 text-green-500"})]}),e.jsxs(c,{children:[n?e.jsx(h,{className:"h-8 w-20"}):e.jsx("div",{className:"text-3xl font-bold text-green-600",children:j.totalPatients}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Usuários cadastrados"})]})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(l,{className:"hover:shadow-lg transition-shadow border-l-4 border-l-orange-500",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium text-muted-foreground",children:"Refeições Registradas"}),e.jsx(Z,{className:"h-5 w-5 text-orange-500"})]}),e.jsxs(c,{children:[n?e.jsx(h,{className:"h-8 w-20"}):e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:j.totalMeals.toLocaleString("pt-BR")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total de registros"})]})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs(l,{className:"hover:shadow-lg transition-shadow border-l-4 border-l-purple-500",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium text-muted-foreground",children:"Taxa de Atividade"}),e.jsx(Pe,{className:"h-5 w-5 text-purple-500"})]}),e.jsxs(c,{children:[n?e.jsx(h,{className:"h-8 w-20"}):e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:j.activePatients}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pacientes ativos"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"lg:col-span-2",children:e.jsxs(l,{children:[e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-primary"}),e.jsx(x,{children:"Crescimento da Plataforma"})]}),e.jsx(y,{children:"Evolução do número de usuários ao longo do tempo"})]}),e.jsx(c,{children:n?e.jsx(h,{className:"h-[300px] w-full"}):J.length>0?e.jsx(H,{width:"100%",height:300,children:e.jsxs(Ye,{data:J,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})}),e.jsx(ee,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(z,{dataKey:"month",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(q,{className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(_,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(ae,{type:"monotone",dataKey:"users",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorUsers)"})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:e.jsx("p",{children:"Nenhum dado disponível"})})})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsxs(l,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Objetivos dos Pacientes"}),e.jsx(y,{children:"Distribuição por tipo de meta"})]}),e.jsx(c,{children:n?e.jsx(h,{className:"h-[300px] w-full"}):P.length>0?e.jsx(H,{width:"100%",height:300,children:e.jsxs(Le,{children:[e.jsx($e,{data:P,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:i})=>`${s}: ${(i*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:P.map((s,i)=>e.jsx(Ee,{fill:te[i%te.length]},`cell-${i}`))}),e.jsx(_,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(Ue,{verticalAlign:"bottom",height:36,formatter:s=>s})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:e.jsx("p",{children:"Nenhum dado disponível"})})})]})})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsxs(l,{children:[e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-primary"}),e.jsx(x,{children:"Novos Usuários"})]}),e.jsx(y,{children:"Últimos 5 usuários cadastrados na plataforma"})]}),e.jsx(c,{children:n?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(s=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(h,{className:"h-4 w-32"}),e.jsx(h,{className:"h-3 w-24"})]})]},s))}):Y.length>0?e.jsx("div",{className:"space-y-4",children:Y.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs(we,{className:"h-10 w-10",children:[e.jsx(De,{src:s.avatar_url,alt:s.name}),e.jsx(Ae,{children:s.name?.charAt(0).toUpperCase()||"U"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:s.name||"Sem nome"}),e.jsx(U,{variant:s.user_type==="nutritionist"?"default":s.user_type==="patient"?"secondary":"outline",className:"text-xs",children:s.user_type==="nutritionist"?"Nutricionista":s.user_type==="patient"?"Paciente":s.user_type||"Usuário"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Entrou ",he(s.created_at)]})]})]},s.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[e.jsx($,{className:"h-12 w-12 mb-2 opacity-50"}),e.jsx("p",{children:"Nenhum usuário recente"})]})})]})})]}),e.jsxs(L,{value:"finance",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(l,{className:"hover:shadow-lg transition-shadow border-l-4 border-l-emerald-500",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium text-muted-foreground",children:"MRR Estimado"}),e.jsx(F,{className:"h-5 w-5 text-emerald-500"})]}),e.jsxs(c,{children:[n?e.jsx(h,{className:"h-8 w-32"}):e.jsxs("div",{className:"text-3xl font-bold text-emerald-600",children:["R$ ",k.toLocaleString("pt-BR")]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Receita mensal recorrente"})]})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(l,{className:"hover:shadow-lg transition-shadow border-l-4 border-l-blue-500",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium text-muted-foreground",children:"Ticket Médio"}),e.jsx(qe,{className:"h-5 w-5 text-blue-500"})]}),e.jsxs(c,{children:[n?e.jsx(h,{className:"h-8 w-32"}):e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:["R$ ",de.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Por nutricionista/mês"})]})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(l,{className:"hover:shadow-lg transition-shadow border-l-4 border-l-red-500",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium text-muted-foreground",children:"Churn Rate"}),e.jsx(E,{className:"h-5 w-5 text-red-500 rotate-180"})]}),e.jsxs(c,{children:[n?e.jsx(h,{className:"h-8 w-32"}):e.jsxs("div",{className:"text-3xl font-bold text-red-600",children:[me,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Taxa de cancelamento"})]})]})})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs(l,{children:[e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-primary"}),e.jsx(x,{children:"Receita por Mês"})]}),e.jsx(y,{children:"Últimos 6 meses de receita estimada"})]}),e.jsx(c,{children:n?e.jsx(h,{className:"h-[300px] w-full"}):e.jsx(H,{width:"100%",height:300,children:e.jsxs(He,{data:xe,children:[e.jsx(ee,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(z,{dataKey:"month",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(q,{className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"},tickFormatter:s=>`R$ ${(s/1e3).toFixed(0)}k`}),e.jsx(_,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:s=>[`R$ ${s.toLocaleString("pt-BR")}`,"Receita"]}),e.jsx(Be,{dataKey:"receita",fill:"#10b981",radius:[8,8,0,0]})]})})})]})})]}),e.jsx(L,{value:"system",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(l,{children:[e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5 text-primary"}),e.jsx(x,{children:"Broadcast"})]}),e.jsx(y,{children:"Envie uma mensagem para todos os usuários da plataforma"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsx(Ce,{placeholder:"Digite sua mensagem de broadcast aqui...",value:p,onChange:s=>G(s.target.value),className:"min-h-[120px] font-mono text-sm"}),e.jsxs(C,{onClick:ne,className:"w-full",disabled:!p.trim(),children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Enviar para Todos"]})]})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(l,{children:[e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-primary"}),e.jsx(x,{children:"Live Audit Log"})]}),e.jsx(y,{children:"Eventos do sistema em tempo real"})]}),e.jsx(c,{children:e.jsx("div",{ref:w,className:"bg-slate-950 rounded-lg p-4 h-[400px] overflow-y-auto font-mono text-xs",children:V.length===0?e.jsxs("div",{className:"text-muted-foreground text-center py-8",children:[e.jsx(O,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Aguardando eventos..."})]}):e.jsx("div",{className:"space-y-2",children:V.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-2 rounded hover:bg-slate-900/50 transition-colors",children:[e.jsx("div",{className:"mt-0.5",children:pe(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-slate-400",children:ue(s.timestamp)}),e.jsx(U,{variant:ge(s.type),className:"text-xs",children:s.type.toUpperCase()})]}),e.jsx("p",{className:"text-slate-300",children:s.message}),e.jsxs("p",{className:"text-slate-500 text-[10px] mt-1",children:["Usuário: ",s.user]})]})]},s.id))})})})]})})]})})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:e.jsxs(l,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Ações Rápidas"}),e.jsx(y,{children:"Ferramentas de gerenciamento da plataforma"})]}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(C,{variant:"outline",size:"lg",className:"h-auto p-6 flex flex-col items-start justify-start hover:bg-primary/5 hover:border-primary transition-colors",onClick:()=>r("/nutritionist/foods"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Z,{className:"w-6 h-6 text-primary"}),e.jsx("span",{className:"text-lg font-semibold",children:"Gerenciar Alimentos"})]}),e.jsx("p",{className:"text-sm text-muted-foreground text-left",children:"Adicionar e editar medidas caseiras dos alimentos"})]}),e.jsxs(C,{variant:"outline",size:"lg",className:"h-auto p-6 flex flex-col items-start justify-start hover:bg-primary/5 hover:border-primary transition-colors",onClick:()=>{o({title:"Em breve",description:"A funcionalidade de gerenciamento de usuários estará disponível em breve."})},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx($,{className:"w-6 h-6 text-primary"}),e.jsx("span",{className:"text-lg font-semibold",children:"Gerenciar Usuários"})]}),e.jsx("p",{className:"text-sm text-muted-foreground text-left",children:"Visualizar e gerenciar contas de usuários"})]})]})})]})})]})})}export{ys as default};
