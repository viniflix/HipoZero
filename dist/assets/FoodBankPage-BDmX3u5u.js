import{j as e,m as K,C as l,e as r,B as m,F as xe,ai as S,aj as _,ak as A,al as D,au as E,c as f,d as C,u as me,a as oe,r as t,s as Z,X as ue,L as he}from"./index-BR6RRKhy.js";import{I as pe}from"./input-Dw1LZ4d-.js";import{B as g}from"./badge-DqtpEwzX.js";import{S as ge,a as je,b as Ne,c as be,d as ve}from"./select-KGG1MGa7.js";import{T as Q,a as W,b as y,c as k}from"./tabs-BrrTuIi-.js";import{E as fe}from"./eye-D4X56Lig.js";import{P as Ce}from"./pen-square-vsc50uQc.js";import{a as ye,S as J}from"./SmartFoodForm-BLyKHi8Y.js";import{P as B,D as T}from"./package-Bxf_-3lK.js";import{I as ke}from"./info-CBT9DKKF.js";import{u as Fe}from"./useDebounce-DFdaEjbs.js";import{P as V}from"./plus-DNhEjNKI.js";import{S as we}from"./search-Diz8sOGw.js";import{F as Te}from"./filter--CuGq-Az.js";import"./extends-CF3RwP-h.js";import"./label-CMl3sQfF.js";import"./progress-CEg4uOya.js";import"./foodService-DVDJOfWQ.js";import"./chevron-left-DDwluKWd.js";import"./check-circle-2-DSGM8FJf.js";const M=({food:s,isCustom:c=!1,onView:n,onEdit:o,onDelete:u})=>{const x={TACO:"TACO",IBGE:"IBGE",USDA:"USDA",Tucunduva:"Tucunduva",TBCA:"TBCA",custom:"Personalizado"},h={TACO:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",IBGE:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",USDA:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",Tucunduva:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",TBCA:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300",custom:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300"};return e.jsx(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:e.jsx(l,{className:"hover:shadow-lg transition-all duration-200 border-l-4 border-l-primary",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base text-foreground mb-1 line-clamp-2",children:s.name}),s.group&&e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:s.group})]}),s.source&&e.jsx(g,{variant:"outline",className:`${h[s.source]||"bg-gray-100 text-gray-700"} text-xs flex-shrink-0`,children:x[s.source]||s.source})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-0.5",children:"Calorias"}),e.jsx("p",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:s.calories?Math.round(s.calories):"—"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"kcal"})]}),e.jsxs("div",{className:"text-center p-2 bg-purple-50 dark:bg-purple-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-0.5",children:"Proteína"}),e.jsx("p",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:s.protein?s.protein.toFixed(1):"—"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"g"})]}),e.jsxs("div",{className:"text-center p-2 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-0.5",children:"Carbs"}),e.jsx("p",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:s.carbs?s.carbs.toFixed(1):"—"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"g"})]}),e.jsxs("div",{className:"text-center p-2 bg-orange-50 dark:bg-orange-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-0.5",children:"Gorduras"}),e.jsx("p",{className:"text-sm font-bold text-orange-600 dark:text-orange-400",children:s.fat?s.fat.toFixed(1):"—"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"g"})]})]}),(s.fiber||s.sodium)&&e.jsxs("div",{className:"flex gap-3 text-xs text-muted-foreground",children:[s.fiber&&e.jsxs("span",{children:["Fibra: ",s.fiber.toFixed(1),"g"]}),s.sodium&&e.jsxs("span",{children:["Sódio: ",s.sodium.toFixed(0),"mg"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 flex-shrink-0",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>n&&n(s),className:"w-full",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Ver Detalhes"]}),c&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>o&&o(s),className:"w-full",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Editar"]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>u&&u(s),className:"w-full text-destructive hover:text-destructive",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Excluir"]})]})]})]})})})})},Se=({food:s,open:c,onOpenChange:n})=>{if(!s)return null;const o={TACO:"TACO - Tabela Brasileira de Composição de Alimentos",IBGE:"IBGE - Instituto Brasileiro de Geografia e Estatística",USDA:"USDA - United States Department of Agriculture",Tucunduva:"Tucunduva",TBCA:"TBCA - Tabela Brasileira de Composição de Alimentos",custom:"Personalizado"},u={TACO:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",IBGE:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",USDA:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",Tucunduva:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",TBCA:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300",custom:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300"};return e.jsx(S,{open:c,onOpenChange:n,children:e.jsxs(_,{className:"max-w-4xl max-h-[90vh]",children:[e.jsxs(A,{children:[e.jsxs(D,{className:"text-xl flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),s.name]}),e.jsxs(E,{children:[s.group&&e.jsx("span",{className:"block",children:s.group}),s.source&&e.jsx(g,{variant:"outline",className:`${u[s.source]||""} mt-2`,children:o[s.source]||s.source})]})]}),e.jsx(ye,{className:"max-h-[70vh] pr-4",children:e.jsxs(Q,{defaultValue:"macros",className:"w-full",children:[e.jsxs(W,{className:"grid w-full grid-cols-3",children:[e.jsx(y,{value:"macros",children:"Macronutrientes"}),e.jsx(y,{value:"micros",children:"Micronutrientes"}),e.jsx(y,{value:"info",children:"Informações"})]}),e.jsxs(k,{value:"macros",className:"space-y-4 mt-4",children:[e.jsxs(l,{children:[e.jsx(f,{children:e.jsx(C,{className:"text-base",children:"Valores por 100g"})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Calorias"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:s.calories?Math.round(s.calories):"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"kcal"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Proteína"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:s.protein?s.protein.toFixed(1):"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"g"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Carboidratos"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.carbs?s.carbs.toFixed(1):"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"g"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Gorduras"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:s.fat?s.fat.toFixed(1):"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"g"})]})]})})]}),(s.saturated_fat||s.trans_fat||s.monounsaturated_fat||s.polyunsaturated_fat||s.cholesterol||s.fiber||s.sugar||s.sodium)&&e.jsxs(l,{children:[e.jsx(f,{children:e.jsx(C,{className:"text-base",children:"Gorduras Detalhadas e Outros"})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.fiber&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fibra"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.fiber.toFixed(1)," g"]})]}),s.sugar&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Açúcares"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.sugar.toFixed(1)," g"]})]}),s.saturated_fat&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gordura Saturada"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.saturated_fat.toFixed(1)," g"]})]}),s.trans_fat&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gordura Trans"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.trans_fat.toFixed(1)," g"]})]}),s.monounsaturated_fat&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gordura Monoinsaturada"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.monounsaturated_fat.toFixed(1)," g"]})]}),s.polyunsaturated_fat&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gordura Poliinsaturada"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.polyunsaturated_fat.toFixed(1)," g"]})]}),s.cholesterol&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Colesterol"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.cholesterol.toFixed(0)," mg"]})]}),s.sodium&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sódio"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.sodium.toFixed(0)," mg"]})]})]})})]})]}),e.jsx(k,{value:"micros",className:"space-y-4 mt-4",children:s.calcium||s.iron||s.magnesium||s.phosphorus||s.potassium||s.zinc||s.vitamin_a||s.vitamin_c||s.vitamin_d||s.vitamin_e||s.vitamin_b12||s.folate?e.jsxs(e.Fragment,{children:[(s.calcium||s.iron||s.magnesium||s.phosphorus||s.potassium||s.zinc)&&e.jsxs(l,{children:[e.jsx(f,{children:e.jsx(C,{className:"text-base",children:"Minerais (mg por 100g)"})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.calcium&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cálcio"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.calcium.toFixed(1)," mg"]})]}),s.iron&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ferro"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.iron.toFixed(1)," mg"]})]}),s.magnesium&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Magnésio"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.magnesium.toFixed(1)," mg"]})]}),s.phosphorus&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fósforo"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.phosphorus.toFixed(1)," mg"]})]}),s.potassium&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Potássio"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.potassium.toFixed(1)," mg"]})]}),s.zinc&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Zinco"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.zinc.toFixed(1)," mg"]})]})]})})]}),(s.vitamin_a||s.vitamin_c||s.vitamin_d||s.vitamin_e||s.vitamin_b12||s.folate)&&e.jsxs(l,{children:[e.jsx(f,{children:e.jsx(C,{className:"text-base",children:"Vitaminas (mg por 100g)"})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.vitamin_a&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vitamina A"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.vitamin_a.toFixed(1)," mg"]})]}),s.vitamin_c&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vitamina C"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.vitamin_c.toFixed(1)," mg"]})]}),s.vitamin_d&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vitamina D"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.vitamin_d.toFixed(1)," mg"]})]}),s.vitamin_e&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vitamina E"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.vitamin_e.toFixed(1)," mg"]})]}),s.vitamin_b12&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vitamina B12"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.vitamin_b12.toFixed(1)," mg"]})]}),s.folate&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Folato"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.folate.toFixed(1)," mg"]})]})]})})]})]}):e.jsx(l,{children:e.jsxs(r,{className:"py-8 text-center",children:[e.jsx(ke,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum micronutriente cadastrado para este alimento"})]})})}),e.jsx(k,{value:"info",className:"space-y-4 mt-4",children:e.jsxs(l,{children:[e.jsx(f,{children:e.jsx(C,{className:"text-base",children:"Informações Gerais"})}),e.jsxs(r,{className:"space-y-4",children:[s.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Descrição"}),e.jsx("p",{className:"text-sm",children:s.description})]}),s.preparation&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Modo de Preparo"}),e.jsx("p",{className:"text-sm",children:s.preparation})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Porção Padrão"}),e.jsxs("p",{className:"text-sm font-semibold",children:[s.portion_size||100,"g"]})]}),s.source&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Fonte"}),e.jsx(g,{variant:"outline",className:u[s.source],children:o[s.source]||s.source})]})]}),s.food_measures&&s.food_measures.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Medidas Caseiras Cadastradas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.food_measures.map(x=>e.jsxs(g,{variant:"outline",children:[x.measure_label," (",x.quantity_grams,"g)"]},x.id))})]})]})]})})]})})]})})},Je=()=>{const{user:s}=me(),{toast:c}=oe(),[n,o]=t.useState([]),[u,x]=t.useState(!0),[h,L]=t.useState(""),[j,Y]=t.useState("all"),[ee,se]=t.useState(null),[ae,q]=t.useState(!1),[te,F]=t.useState(!1),[le,O]=t.useState(!1),[U,$]=t.useState(null),[re,w]=t.useState(!1),[P,z]=t.useState(null),G=Fe(h,300),ie=[{value:"all",label:"Todas as Fontes"},{value:"custom",label:"Meus Alimentos Personalizados"},{value:"TACO",label:"TACO"},{value:"IBGE",label:"IBGE"},{value:"USDA",label:"USDA"},{value:"Tucunduva",label:"Tucunduva"},{value:"TBCA",label:"TBCA"}],N=t.useCallback(async()=>{x(!0);try{let a=Z.from("foods").select("*, food_measures(*)").eq("is_active",!0).order("source",{ascending:!0}).order("name",{ascending:!0});j!=="all"?j==="custom"?a=a.eq("nutritionist_id",s.id):a=a.eq("source",j):a=a.or(`source.eq.custom,nutritionist_id.eq.${s.id},source.neq.custom`);const{data:b,error:p}=await a;if(p)throw p;o(b||[])}catch(a){console.error("Erro ao buscar alimentos:",a),c({title:"Erro",description:"Não foi possível carregar os alimentos.",variant:"destructive"})}finally{x(!1)}},[s.id,j,c]);t.useEffect(()=>{N()},[N]);const i=t.useMemo(()=>{let a=n;if(G.trim()){const d=G.toLowerCase();a=a.filter(v=>v.name.toLowerCase().includes(d)||v.group&&v.group.toLowerCase().includes(d)||v.description&&v.description.toLowerCase().includes(d))}const b=a.filter(d=>d.source==="custom"||d.nutritionist_id===s.id),p=a.filter(d=>d.source!=="custom"&&d.nutritionist_id!==s.id);return{customFoods:b,otherFoods:p,all:a}},[n,G,s.id]),I=a=>{se(a),q(!0)},H=a=>{$(a),O(!0)},R=a=>{z(a),w(!0)},ce=async()=>{if(P)try{const{error:a}=await Z.from("foods").delete().eq("id",P.id);if(a)throw a;c({title:"Sucesso!",description:"Alimento excluído com sucesso."}),N(),w(!1),z(null)}catch(a){console.error("Erro ao excluir alimento:",a),c({title:"Erro",description:"Não foi possível excluir o alimento.",variant:"destructive"})}},ne=()=>{F(!1),N(),c({title:"Sucesso!",description:"Alimento criado com sucesso."})},de=()=>{O(!1),$(null),N(),c({title:"Sucesso!",description:"Alimento atualizado com sucesso."})},X=t.useMemo(()=>{const a=n.filter(p=>p.source==="custom"||p.nutritionist_id===s.id).length,b=n.length;return{custom:a,total:b}},[n,s.id]);return e.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto w-full px-4 md:px-8 pt-8 pb-12 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(T,{className:"w-8 h-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Banco de Alimentos"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie seus alimentos personalizados e consulte o banco público de alimentos"})]}),e.jsxs(m,{onClick:()=>F(!0),size:"lg",children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),"Novo Alimento"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Meus Alimentos Personalizados"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:X.custom})]}),e.jsx(B,{className:"w-10 h-10 text-primary opacity-50"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total de Alimentos"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:X.total})]}),e.jsx(T,{className:"w-10 h-10 text-primary opacity-50"})]})})})]}),e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(we,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),e.jsx(pe,{placeholder:"Buscar alimento por nome, grupo ou descrição...",value:h,onChange:a=>L(a.target.value),className:"pl-10"})]}),e.jsxs(ge,{value:j,onValueChange:Y,children:[e.jsxs(je,{className:"w-full sm:w-[250px]",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),e.jsx(Ne,{placeholder:"Filtrar por fonte"})]}),e.jsx(be,{children:ie.map(a=>e.jsx(ve,{value:a.value,children:a.label},a.value))})]})]}),h&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(g,{variant:"outline",children:[i.all.length," resultado(s) encontrado(s)"]}),e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>L(""),children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"Limpar busca"]})]})]})})}),u?e.jsx(l,{children:e.jsx(r,{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(he,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando alimentos..."})]})})}):e.jsxs(Q,{defaultValue:"all",className:"w-full",children:[e.jsxs(W,{className:"grid w-full grid-cols-2",children:[e.jsxs(y,{value:"all",children:["Todos (",i.all.length,")"]}),e.jsxs(y,{value:"custom",children:["Meus Alimentos (",i.customFoods.length,")"]})]}),e.jsxs(k,{value:"all",className:"space-y-6 mt-6",children:[i.customFoods.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-emerald-600"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Meus Alimentos Personalizados"}),e.jsx(g,{variant:"outline",className:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300",children:i.customFoods.length})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.customFoods.map(a=>e.jsx(M,{food:a,isCustom:!0,onView:I,onEdit:H,onDelete:R},a.id))})]}),i.otherFoods.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Banco de Dados Público"}),e.jsx(g,{variant:"outline",children:i.otherFoods.length})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.otherFoods.map(a=>e.jsx(M,{food:a,isCustom:!1,onView:I},a.id))})]}),i.all.length===0&&e.jsx(l,{children:e.jsxs(r,{className:"py-12 text-center",children:[e.jsx(T,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h?`Nenhum alimento encontrado para "${h}"`:"Nenhum alimento encontrado"})]})})]}),e.jsx(k,{value:"custom",className:"space-y-6 mt-6",children:i.customFoods.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.customFoods.map(a=>e.jsx(M,{food:a,isCustom:!0,onView:I,onEdit:H,onDelete:R},a.id))}):e.jsx(l,{children:e.jsxs(r,{className:"py-12 text-center",children:[e.jsx(B,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Você ainda não criou nenhum alimento personalizado"}),e.jsxs(m,{onClick:()=>F(!0),children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Criar Primeiro Alimento"]})]})})})]})]}),e.jsx(Se,{food:ee,open:ae,onOpenChange:q}),e.jsx(S,{open:te,onOpenChange:F,children:e.jsxs(_,{className:"max-w-4xl max-h-[95vh] overflow-y-auto",children:[e.jsxs(A,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Novo Alimento Personalizado"]}),e.jsx(E,{children:"Crie um alimento customizado com busca por código de barras e cálculo automático"})]}),e.jsx(J,{mode:"full",onSuccess:ne})]})}),e.jsx(S,{open:le,onOpenChange:O,children:e.jsxs(_,{className:"max-w-4xl max-h-[95vh] overflow-y-auto",children:[e.jsxs(A,{children:[e.jsx(D,{className:"flex items-center gap-2",children:"Editar Alimento"}),e.jsx(E,{children:"Edite as informações nutricionais e medidas caseiras"})]}),U&&e.jsx(J,{mode:"full",initialData:U,onSuccess:de})]})}),e.jsx(S,{open:re,onOpenChange:w,children:e.jsxs(_,{children:[e.jsxs(A,{children:[e.jsx(D,{children:"Confirmar Exclusão"}),e.jsxs(E,{children:['Tem certeza que deseja excluir o alimento "',P?.name,'"? Esta ação não pode ser desfeita.']})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(m,{variant:"outline",onClick:()=>{w(!1),z(null)},children:"Cancelar"}),e.jsx(m,{variant:"destructive",onClick:ce,children:"Excluir"})]})]})})]})};export{Je as default};
