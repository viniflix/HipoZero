import{q as Re,az as ee,r as i,aD as Fe,j as e,aB as Ee,aC as D,ax as U,aE as ae,aA as se,aL as Ie,ay as re,aK as Pe,ap as oe,aq as Se,a as Te,V as Ae,W as Me,Y as De,Z as Oe,B as K,aw as Ge,C as $,c as W,d as z,w as H,e as Y,_ as Le,X as Ue}from"./index-CzP_nI2M.js";import{I as A}from"./input-DpEF2plu.js";import{L as R}from"./label-DACsPsNs.js";import{u as Ve}from"./index-DmlFzBo4.js";import{S as X}from"./slider-6VrimJFB.js";import{P as Ke,a as Be,b as qe}from"./popover-CMpKjhKQ.js";import"./alert-ChBjVLQz.js";import{getReferenceValues as $e,saveReferenceValues as We}from"./meal-plan-queries-Be17qUdJ.js";import{I as ze}from"./info-Bh3uY1d-.js";import{S as He}from"./save-CLkVNunr.js";const Ye=Re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function T(a,s,{checkForDefaultPrevented:o=!0}={}){return function(l){if(a?.(l),o===!1||!l.defaultPrevented)return s?.(l)}}var Q="rovingFocusGroup.onEntryFocus",Xe={bubbles:!1,cancelable:!0},V="RovingFocusGroup",[Z,ne,Qe]=Fe(V),[Ze,ce]=ee(V,[Qe]),[Je,et]=Ze(V),ie=i.forwardRef((a,s)=>e.jsx(Z.Provider,{scope:a.__scopeRovingFocusGroup,children:e.jsx(Z.Slot,{scope:a.__scopeRovingFocusGroup,children:e.jsx(tt,{...a,ref:s})})}));ie.displayName=V;var tt=i.forwardRef((a,s)=>{const{__scopeRovingFocusGroup:o,orientation:c,loop:l=!1,dir:p,currentTabStopId:_,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:t,onEntryFocus:d,preventScrollOnEntryFocus:n=!1,...f}=a,b=i.useRef(null),u=U(s,b),h=ae(p),[N,g]=se({prop:_,defaultProp:v??null,onChange:t,caller:V}),[I,O]=i.useState(!1),F=Ie(d),P=ne(o),M=i.useRef(!1),[S,G]=i.useState(0);return i.useEffect(()=>{const r=b.current;if(r)return r.addEventListener(Q,F),()=>r.removeEventListener(Q,F)},[F]),e.jsx(Je,{scope:o,orientation:c,dir:h,loop:l,currentTabStopId:N,onItemFocus:i.useCallback(r=>g(r),[g]),onItemShiftTab:i.useCallback(()=>O(!0),[]),onFocusableItemAdd:i.useCallback(()=>G(r=>r+1),[]),onFocusableItemRemove:i.useCallback(()=>G(r=>r-1),[]),children:e.jsx(D.div,{tabIndex:I||S===0?-1:0,"data-orientation":c,...f,ref:u,style:{outline:"none",...a.style},onMouseDown:T(a.onMouseDown,()=>{M.current=!0}),onFocus:T(a.onFocus,r=>{const m=!M.current;if(r.target===r.currentTarget&&m&&!I){const x=new CustomEvent(Q,Xe);if(r.currentTarget.dispatchEvent(x),!x.defaultPrevented){const j=P().filter(E=>E.focusable),k=j.find(E=>E.active),y=j.find(E=>E.id===N),w=[k,y,...j].filter(Boolean).map(E=>E.ref.current);ue(w,n)}}M.current=!1}),onBlur:T(a.onBlur,()=>O(!1))})})}),le="RovingFocusGroupItem",de=i.forwardRef((a,s)=>{const{__scopeRovingFocusGroup:o,focusable:c=!0,active:l=!1,tabStopId:p,children:_,...v}=a,t=Ee(),d=p||t,n=et(le,o),f=n.currentTabStopId===d,b=ne(o),{onFocusableItemAdd:u,onFocusableItemRemove:h,currentTabStopId:N}=n;return i.useEffect(()=>{if(c)return u(),()=>h()},[c,u,h]),e.jsx(Z.ItemSlot,{scope:o,id:d,focusable:c,active:l,children:e.jsx(D.span,{tabIndex:f?0:-1,"data-orientation":n.orientation,...v,ref:s,onMouseDown:T(a.onMouseDown,g=>{c?n.onItemFocus(d):g.preventDefault()}),onFocus:T(a.onFocus,()=>n.onItemFocus(d)),onKeyDown:T(a.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){n.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const I=st(g,n.orientation,n.dir);if(I!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let F=b().filter(P=>P.focusable).map(P=>P.ref.current);if(I==="last")F.reverse();else if(I==="prev"||I==="next"){I==="prev"&&F.reverse();const P=F.indexOf(g.currentTarget);F=n.loop?ot(F,P+1):F.slice(P+1)}setTimeout(()=>ue(F))}}),children:typeof _=="function"?_({isCurrentTabStop:f,hasTabStop:N!=null}):_})})});de.displayName=le;var rt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function at(a,s){return s!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function st(a,s,o){const c=at(a.key,o);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(c))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(c)))return rt[c]}function ue(a,s=!1){const o=document.activeElement;for(const c of a)if(c===o||(c.focus({preventScroll:s}),document.activeElement!==o))return}function ot(a,s){return a.map((o,c)=>a[(s+c)%a.length])}var nt=ie,ct=de;function it(a,s){return i.useReducer((o,c)=>s[o][c]??o,a)}var pe=a=>{const{present:s,children:o}=a,c=lt(s),l=typeof o=="function"?o({present:c.isPresent}):i.Children.only(o),p=U(c.ref,dt(l));return typeof o=="function"||c.isPresent?i.cloneElement(l,{ref:p}):null};pe.displayName="Presence";function lt(a){const[s,o]=i.useState(),c=i.useRef(null),l=i.useRef(a),p=i.useRef("none"),_=a?"mounted":"unmounted",[v,t]=it(_,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const d=B(c.current);p.current=v==="mounted"?d:"none"},[v]),re(()=>{const d=c.current,n=l.current;if(n!==a){const b=p.current,u=B(d);a?t("MOUNT"):u==="none"||d?.display==="none"?t("UNMOUNT"):t(n&&b!==u?"ANIMATION_OUT":"UNMOUNT"),l.current=a}},[a,t]),re(()=>{if(s){let d;const n=s.ownerDocument.defaultView??window,f=u=>{const N=B(c.current).includes(CSS.escape(u.animationName));if(u.target===s&&N&&(t("ANIMATION_END"),!l.current)){const g=s.style.animationFillMode;s.style.animationFillMode="forwards",d=n.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=g)})}},b=u=>{u.target===s&&(p.current=B(c.current))};return s.addEventListener("animationstart",b),s.addEventListener("animationcancel",f),s.addEventListener("animationend",f),()=>{n.clearTimeout(d),s.removeEventListener("animationstart",b),s.removeEventListener("animationcancel",f),s.removeEventListener("animationend",f)}}else t("ANIMATION_END")},[s,t]),{isPresent:["mounted","unmountSuspended"].includes(v),ref:i.useCallback(d=>{c.current=d?getComputedStyle(d):null,o(d)},[])}}function B(a){return a?.animationName||"none"}function dt(a){let s=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,o=s&&"isReactWarning"in s&&s.isReactWarning;return o?a.ref:(s=Object.getOwnPropertyDescriptor(a,"ref")?.get,o=s&&"isReactWarning"in s&&s.isReactWarning,o?a.props.ref:a.props.ref||a.ref)}var te="Radio",[ut,me]=ee(te),[pt,mt]=ut(te),ge=i.forwardRef((a,s)=>{const{__scopeRadio:o,name:c,checked:l=!1,required:p,disabled:_,value:v="on",onCheck:t,form:d,...n}=a,[f,b]=i.useState(null),u=U(s,g=>b(g)),h=i.useRef(!1),N=f?d||!!f.closest("form"):!0;return e.jsxs(pt,{scope:o,checked:l,disabled:_,children:[e.jsx(D.button,{type:"button",role:"radio","aria-checked":l,"data-state":he(l),"data-disabled":_?"":void 0,disabled:_,value:v,...n,ref:u,onClick:T(a.onClick,g=>{l||t?.(),N&&(h.current=g.isPropagationStopped(),h.current||g.stopPropagation())})}),N&&e.jsx(_e,{control:f,bubbles:!h.current,name:c,value:v,checked:l,required:p,disabled:_,form:d,style:{transform:"translateX(-100%)"}})]})});ge.displayName=te;var xe="RadioIndicator",fe=i.forwardRef((a,s)=>{const{__scopeRadio:o,forceMount:c,...l}=a,p=mt(xe,o);return e.jsx(pe,{present:c||p.checked,children:e.jsx(D.span,{"data-state":he(p.checked),"data-disabled":p.disabled?"":void 0,...l,ref:s})})});fe.displayName=xe;var gt="RadioBubbleInput",_e=i.forwardRef(({__scopeRadio:a,control:s,checked:o,bubbles:c=!0,...l},p)=>{const _=i.useRef(null),v=U(_,p),t=Ve(o),d=Pe(s);return i.useEffect(()=>{const n=_.current;if(!n)return;const f=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(f,"checked").set;if(t!==o&&u){const h=new Event("click",{bubbles:c});u.call(n,o),n.dispatchEvent(h)}},[t,o,c]),e.jsx(D.input,{type:"radio","aria-hidden":!0,defaultChecked:o,...l,tabIndex:-1,ref:v,style:{...l.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});_e.displayName=gt;function he(a){return a?"checked":"unchecked"}var xt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],q="RadioGroup",[ft]=ee(q,[ce,me]),ve=ce(),be=me(),[_t,ht]=ft(q),je=i.forwardRef((a,s)=>{const{__scopeRadioGroup:o,name:c,defaultValue:l,value:p,required:_=!1,disabled:v=!1,orientation:t,dir:d,loop:n=!0,onValueChange:f,...b}=a,u=ve(o),h=ae(d),[N,g]=se({prop:p,defaultProp:l??null,onChange:f,caller:q});return e.jsx(_t,{scope:o,name:c,required:_,disabled:v,value:N,onValueChange:g,children:e.jsx(nt,{asChild:!0,...u,orientation:t,dir:h,loop:n,children:e.jsx(D.div,{role:"radiogroup","aria-required":_,"aria-orientation":t,"data-disabled":v?"":void 0,dir:h,...b,ref:s})})})});je.displayName=q;var Ne="RadioGroupItem",ke=i.forwardRef((a,s)=>{const{__scopeRadioGroup:o,disabled:c,...l}=a,p=ht(Ne,o),_=p.disabled||c,v=ve(o),t=be(o),d=i.useRef(null),n=U(s,d),f=p.value===l.value,b=i.useRef(!1);return i.useEffect(()=>{const u=N=>{xt.includes(N.key)&&(b.current=!0)},h=()=>b.current=!1;return document.addEventListener("keydown",u),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",h)}},[]),e.jsx(ct,{asChild:!0,...v,focusable:!_,active:f,children:e.jsx(ge,{disabled:_,required:p.required,checked:f,...t,...l,name:p.name,ref:n,onCheck:()=>p.onValueChange(l.value),onKeyDown:T(u=>{u.key==="Enter"&&u.preventDefault()}),onFocus:T(l.onFocus,()=>{b.current&&d.current?.click()})})})});ke.displayName=Ne;var vt="RadioGroupIndicator",ye=i.forwardRef((a,s)=>{const{__scopeRadioGroup:o,...c}=a,l=be(o);return e.jsx(fe,{...l,...c,ref:s})});ye.displayName=vt;var we=je,Ce=ke,bt=ye;const J=i.forwardRef(({className:a,...s},o)=>e.jsx(we,{className:oe("grid gap-2",a),...s,ref:o}));J.displayName=we.displayName;const L=i.forwardRef(({className:a,...s},o)=>e.jsx(Ce,{ref:o,className:oe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:e.jsx(bt,{className:"flex items-center justify-center",children:e.jsx(Se,{className:"h-2.5 w-2.5 fill-current text-current"})})}));L.displayName=Ce.displayName;const Pt=({isOpen:a,onClose:s,planId:o})=>{const{toast:c}=Te(),[l,p]=i.useState(!1),[_,v]=i.useState(null),[t,d]=i.useState({weight_kg:"",weight_type:"current",total_energy_kcal:"",macro_mode:"percentage",protein_pct:33.3,carbs_pct:33.3,fat_pct:33.3,protein_g_per_kg:"",carbs_g_per_kg:"",fat_g_per_kg:""}),[n,f]=i.useState({});i.useEffect(()=>{a&&o&&b()},[a,o]);const b=async()=>{p(!0);try{const{data:r}=await $e(o);r&&(d({weight_kg:r.weight_kg||"",weight_type:r.weight_type||"current",total_energy_kcal:r.total_energy_kcal||"",macro_mode:r.macro_mode||"percentage",protein_pct:r.protein_percentage?r.protein_percentage*100:33.3,carbs_pct:r.carbs_percentage?r.carbs_percentage*100:33.3,fat_pct:r.fat_percentage?r.fat_percentage*100:33.3,protein_g_per_kg:r.protein_g_per_kg||"",carbs_g_per_kg:r.carbs_g_per_kg||"",fat_g_per_kg:r.fat_g_per_kg||""}),v(r))}catch(r){console.error("Erro ao carregar valores:",r)}finally{p(!1)}},u=(r,m)=>{d(x=>({...x,[r]:m})),n[r]&&f(x=>({...x,[r]:null}))},h=r=>{const m=r[0],x=100-m,j=t.protein_pct,k=t.fat_pct,y=j+k;let C,w;y>0?(C=j/y*x,w=k/y*x):(C=x/2,w=x/2),d(E=>({...E,carbs_pct:m,protein_pct:Math.round(C*10)/10,fat_pct:Math.round(w*10)/10}))},N=r=>{const m=r[0],x=100-m,j=t.carbs_pct,k=t.fat_pct,y=j+k;let C,w;y>0?(C=j/y*x,w=k/y*x):(C=x/2,w=x/2),d(E=>({...E,protein_pct:m,carbs_pct:Math.round(C*10)/10,fat_pct:Math.round(w*10)/10}))},g=r=>{const m=r[0],x=100-m,j=t.protein_pct,k=t.carbs_pct,y=j+k;let C,w;y>0?(C=j/y*x,w=k/y*x):(C=x/2,w=x/2),d(E=>({...E,fat_pct:m,protein_pct:Math.round(C*10)/10,carbs_pct:Math.round(w*10)/10}))},I=()=>{const r=parseFloat(t.weight_kg),m=parseFloat(t.total_energy_kcal);if(!r||!m)return null;let x,j,k;if(t.macro_mode==="percentage"){const y=t.protein_pct/100,C=t.carbs_pct/100,w=t.fat_pct/100;x=m*y/4,j=m*C/4,k=m*w/9}else x=r*(parseFloat(t.protein_g_per_kg)||0),j=r*(parseFloat(t.carbs_g_per_kg)||0),k=r*(parseFloat(t.fat_g_per_kg)||0);return{protein:x.toFixed(1),carbs:j.toFixed(1),fat:k.toFixed(1),proteinCal:(x*4).toFixed(0),carbsCal:(j*4).toFixed(0),fatCal:(k*9).toFixed(0),totalCal:(x*4+j*4+k*9).toFixed(0)}},O=()=>{const r={};if((!t.weight_kg||parseFloat(t.weight_kg)<=0)&&(r.weight_kg="Peso é obrigatório e deve ser maior que zero"),(!t.total_energy_kcal||parseFloat(t.total_energy_kcal)<=0)&&(r.total_energy_kcal="Energia é obrigatória e deve ser maior que zero"),t.macro_mode==="percentage"){const m=t.protein_pct+t.carbs_pct+t.fat_pct;Math.abs(m-100)>.5&&(r.macro_sum=`Soma dos percentuais deve ser 100% (atual: ${m.toFixed(1)}%)`)}else t.protein_g_per_kg||(r.protein_g_per_kg="Obrigatório"),t.carbs_g_per_kg||(r.carbs_g_per_kg="Obrigatório"),t.fat_g_per_kg||(r.fat_g_per_kg="Obrigatório");return f(r),Object.keys(r).length===0},F=async()=>{if(O()){p(!0);try{const r={weight_kg:parseFloat(t.weight_kg),weight_type:t.weight_type,total_energy_kcal:parseFloat(t.total_energy_kcal),macro_mode:t.macro_mode,protein_percentage:t.macro_mode==="percentage"?t.protein_pct/100:null,carbs_percentage:t.macro_mode==="percentage"?t.carbs_pct/100:null,fat_percentage:t.macro_mode==="percentage"?t.fat_pct/100:null,protein_g_per_kg:t.macro_mode==="g_per_kg"?parseFloat(t.protein_g_per_kg):null,carbs_g_per_kg:t.macro_mode==="g_per_kg"?parseFloat(t.carbs_g_per_kg):null,fat_g_per_kg:t.macro_mode==="g_per_kg"?parseFloat(t.fat_g_per_kg):null},m=await We(o,r);if(m.error)throw m.error;c({title:"Sucesso",description:"Valores de referência salvos com sucesso",variant:"success"}),v(m.data),s()}catch(r){console.error("Erro ao salvar:",r),c({title:"Erro",description:"Não foi possível salvar os valores",variant:"destructive"})}finally{p(!1)}}},P=()=>{d({weight_kg:"",weight_type:"current",total_energy_kcal:"",macro_mode:"percentage",protein_pct:33.3,carbs_pct:33.3,fat_pct:33.3,protein_g_per_kg:"",carbs_g_per_kg:"",fat_g_per_kg:""}),f({})},M=()=>{f({}),s()},S=I(),G=t.protein_pct+t.carbs_pct+t.fat_pct;return e.jsx(Ae,{open:a,onOpenChange:M,children:e.jsxs(Me,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(De,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{children:"Valores de Referência Nutricional"}),e.jsxs(Ke,{children:[e.jsx(Be,{asChild:!0,children:e.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6",children:e.jsx(ze,{className:"h-4 w-4 text-blue-600"})})}),e.jsx(qe,{className:"w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Como funcionam os cálculos:"}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"text-foreground",children:"Percentuais:"})," Distribuição da energia total.",e.jsx("br",{}),"Ex: 20% de proteínas em 2000kcal = 400kcal ÷ 4kcal/g = 100g"]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-foreground",children:"Gramas/Kg:"})," Quantidade por peso corporal.",e.jsx("br",{}),"Ex: 2g/kg × 70kg = 140g de proteínas"]}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-foreground",children:"Valores calóricos:"}),e.jsx("br",{}),"Proteínas e Carboidratos = 4kcal/g",e.jsx("br",{}),"Gorduras = 9kcal/g"]})]})]})})]})]}),e.jsx(Ge,{children:"Configure os valores de referência para análise e comparação do plano alimentar"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(W,{children:[e.jsx(z,{className:"text-base",children:"Dados do Paciente"}),e.jsx(H,{children:"Informações básicas para o cálculo"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(R,{htmlFor:"weight",children:["Peso (kg) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(A,{id:"weight",type:"number",step:"0.1",placeholder:"Ex: 70.5",value:t.weight_kg,onChange:r=>u("weight_kg",r.target.value),className:n.weight_kg?"border-destructive":""}),n.weight_kg&&e.jsx("p",{className:"text-xs text-destructive",children:n.weight_kg})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:"Tipo de Peso"}),e.jsxs(J,{value:t.weight_type,onValueChange:r=>u("weight_type",r),className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{value:"current",id:"current"}),e.jsx(R,{htmlFor:"current",className:"font-normal cursor-pointer",children:"Peso Atual"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{value:"desired",id:"desired"}),e.jsx(R,{htmlFor:"desired",className:"font-normal cursor-pointer",children:"Peso Desejado"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(R,{htmlFor:"energy",children:["Energia Total Diária (kcal) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(A,{id:"energy",type:"number",placeholder:"Ex: 2000",value:t.total_energy_kcal,onChange:r=>u("total_energy_kcal",r.target.value),className:n.total_energy_kcal?"border-destructive":""}),n.total_energy_kcal&&e.jsx("p",{className:"text-xs text-destructive",children:n.total_energy_kcal}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gasto energético total estimado (TEE) do paciente"})]})]})]}),e.jsxs($,{children:[e.jsxs(W,{children:[e.jsx(z,{className:"text-base",children:"Distribuição de Macronutrientes"}),e.jsx(H,{children:"Escolha como deseja configurar os macronutrientes"})]}),e.jsxs(Y,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{children:"Modo de Configuração"}),e.jsxs(J,{value:t.macro_mode,onValueChange:r=>u("macro_mode",r),className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx(L,{value:"percentage",id:"percentage",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{htmlFor:"percentage",className:"font-semibold cursor-pointer",children:"Percentuais da Energia Total"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Distribua a energia em porcentagens (recomendado para maioria dos casos)"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-muted/50 cursor-pointer",children:[e.jsx(L,{value:"g_per_kg",id:"g_per_kg",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{htmlFor:"g_per_kg",className:"font-semibold cursor-pointer",children:"Gramas por Kg de Peso"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Configure baseado no peso corporal (ideal para atletas e hipertrofia)"})]})]})]})]}),t.macro_mode==="percentage"&&e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(R,{className:"flex-1",children:"Proteínas"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{type:"number",min:"5",max:"50",step:"0.1",value:t.protein_pct,onChange:r=>{const m=parseFloat(r.target.value)||0;N([Math.max(5,Math.min(50,m))])},className:"w-20 text-center"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"%"})]})]}),e.jsx(X,{value:[t.protein_pct],onValueChange:N,min:5,max:50,step:.1,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Arraste ou digite o valor. Os outros macros ajustam automaticamente."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(R,{className:"flex-1",children:"Carboidratos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{type:"number",min:"5",max:"75",step:"0.1",value:t.carbs_pct,onChange:r=>{const m=parseFloat(r.target.value)||0;h([Math.max(5,Math.min(75,m))])},className:"w-20 text-center"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"%"})]})]}),e.jsx(X,{value:[t.carbs_pct],onValueChange:h,min:5,max:75,step:.1,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Arraste ou digite o valor. Os outros macros ajustam automaticamente."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(R,{className:"flex-1",children:"Gorduras"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{type:"number",min:"5",max:"50",step:"0.1",value:t.fat_pct,onChange:r=>{const m=parseFloat(r.target.value)||0;g([Math.max(5,Math.min(50,m))])},className:"w-20 text-center"}),e.jsx("span",{className:"text-sm font-medium text-orange-600",children:"%"})]})]}),e.jsx(X,{value:[t.fat_pct],onValueChange:g,min:5,max:50,step:.1,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Arraste ou digite o valor. Os outros macros ajustam automaticamente."})]}),e.jsxs("div",{className:`p-3 rounded-lg ${Math.abs(G-100)<=.5?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total:"}),e.jsxs("span",{className:"text-lg font-bold",children:[G.toFixed(1),"%"]})]}),n.macro_sum&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:n.macro_sum})]})]}),t.macro_mode==="g_per_kg"&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(R,{htmlFor:"protein_gkg",children:["Proteínas (g/kg) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(A,{id:"protein_gkg",type:"number",step:"0.1",placeholder:"Ex: 2.0",value:t.protein_g_per_kg,onChange:r=>u("protein_g_per_kg",r.target.value),className:n.protein_g_per_kg?"border-destructive":""}),n.protein_g_per_kg&&e.jsx("p",{className:"text-xs text-destructive",children:n.protein_g_per_kg})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(R,{htmlFor:"carbs_gkg",children:["Carboidratos (g/kg) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(A,{id:"carbs_gkg",type:"number",step:"0.1",placeholder:"Ex: 4.0",value:t.carbs_g_per_kg,onChange:r=>u("carbs_g_per_kg",r.target.value),className:n.carbs_g_per_kg?"border-destructive":""}),n.carbs_g_per_kg&&e.jsx("p",{className:"text-xs text-destructive",children:n.carbs_g_per_kg})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(R,{htmlFor:"fat_gkg",children:["Gorduras (g/kg) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(A,{id:"fat_gkg",type:"number",step:"0.1",placeholder:"Ex: 1.0",value:t.fat_g_per_kg,onChange:r=>u("fat_g_per_kg",r.target.value),className:n.fat_g_per_kg?"border-destructive":""}),n.fat_g_per_kg&&e.jsx("p",{className:"text-xs text-destructive",children:n.fat_g_per_kg})]})]})]})]}),S&&e.jsxs($,{className:"bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20",children:[e.jsxs(W,{children:[e.jsx(z,{className:"text-base",children:"Metas Calculadas"}),e.jsx(H,{children:"Valores alvo diários em gramas"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-white rounded-lg border",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mb-1",children:"Proteínas"}),e.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-blue-600 break-words",children:[S.protein,"g"]}),e.jsxs("div",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 break-words",children:[S.proteinCal," kcal (",t.macro_mode==="percentage"?`${t.protein_pct.toFixed(1)}%`:`${t.protein_g_per_kg}g/kg`,")"]})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-white rounded-lg border",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mb-1",children:"Carboidratos"}),e.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 break-words",children:[S.carbs,"g"]}),e.jsxs("div",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 break-words",children:[S.carbsCal," kcal (",t.macro_mode==="percentage"?`${t.carbs_pct.toFixed(1)}%`:`${t.carbs_g_per_kg}g/kg`,")"]})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-white rounded-lg border",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mb-1",children:"Gorduras"}),e.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-orange-600 break-words",children:[S.fat,"g"]}),e.jsxs("div",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 break-words",children:[S.fatCal," kcal (",t.macro_mode==="percentage"?`${t.fat_pct.toFixed(1)}%`:`${t.fat_g_per_kg}g/kg`,")"]})]})]}),e.jsxs("div",{className:"text-center text-xs sm:text-sm text-muted-foreground",children:["Total energético calculado: ",e.jsxs("strong",{children:[S.totalCal," kcal"]})]})]})]})]}),e.jsxs(Le,{className:"gap-2",children:[e.jsxs(K,{variant:"outline",onClick:P,disabled:l,children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Limpar"]}),e.jsxs(K,{variant:"outline",onClick:M,disabled:l,children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),e.jsxs(K,{onClick:F,disabled:l,children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),l?"Salvando...":"Salvar"]})]})]})})};export{Pt as R};
