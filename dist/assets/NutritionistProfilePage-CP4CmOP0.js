import{q as ee,u as pe,a as X,r as c,j as e,C as N,c as S,d as b,w as D,e as F,U as Z,B as j,L as z,s as L,v as se,R as ae,F as ie,V as re,W as te,Y as le,Z as ne,_ as ce,A as Pe,h as Te,i as ke,k as _e,l as Ae,n as Re,o as ze,p as Ge,m as qe,$ as Me}from"./index-D4vQBr8M.js";import{T as Le,a as Ue,b as H,c as I}from"./tabs-Bwnqs6mR.js";import{I as h}from"./input-C4rIJ1KO.js";import{L as o}from"./label-CXskT8CG.js";import{T as Ve}from"./textarea-DZPFEgcz.js";import{S as Q,a as W,b as Y,c as J,d as O}from"./select-IIt_Ztzm.js";import{U as Ke}from"./upload-COVdEdir.js";import{P as Oe,M as $e}from"./phone-DVD9tDEM.js";import{I as He}from"./info-PhO-nbON.js";import{C as Ie}from"./checkbox-Bi9Xf9W5.js";import{g as je,u as ge,a as Be,s as Qe,d as We}from"./profile-queries-DsaJUTos.js";import{C as Ye}from"./clock-BDGWZJVb.js";import{T as oe,a as de,b as B,c as P,d as me,e as T}from"./table-k_mjCIzg.js";import{g as Je,s as Xe,d as Ze}from"./financial-queries-DhllnLz2.js";import{C as es,D as ve}from"./dollar-sign-sq8JWNv3.js";import{P as he}from"./plus-BDzwSSrb.js";import{P as ue}from"./pen-square-CgPYEJlI.js";import"./extends-CF3RwP-h.js";import"./index-DYdiva6l.js";import"./startOfMonth-CC2MBgMy.js";import"./parseISO-xF-pTD1Y.js";const ss=ee("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),as=ee("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),is=ee("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),rs=["Nutrição Clínica","Nutrição Esportiva","Nutrição Materno-Infantil","Saúde Pública","Comportamento Alimentar"];function ts({profile:i,onUpdate:C}){const{user:n,updateUserProfile:k}=pe(),{toast:g}=X(),[v,f]=c.useState(!1),[d,u]=c.useState(!1),R=c.useRef(null),[m,x]=c.useState({name:i?.name||"",crn:i?.crn||"",phone:i?.phone||"",education:i?.education||"",bio:i?.bio||"",address:i?.address||{street:"",city:"",state:"",zip:""},specialties:i?.specialties||[],avatar_url:i?.avatar_url||""}),r=async a=>{const t=a.target.files[0];if(t){u(!0);try{const{data:w}=await L.storage.from("avatars").list(n.id);if(w&&w.length>0){const E=w.map(y=>`${n.id}/${y.name}`);await L.storage.from("avatars").remove(E)}const G=`${n.id}/${Date.now()}_${t.name}`,{error:U}=await L.storage.from("avatars").upload(G,t);if(U)throw U;const{data:{publicUrl:q}}=L.storage.from("avatars").getPublicUrl(G),{data:$,error:_}=await L.from("user_profiles").update({avatar_url:q}).eq("id",n.id).select().single();if(_)throw _;k($),x(E=>({...E,avatar_url:q})),g({title:"Foto de perfil atualizada!"})}catch{g({title:"Erro",description:"Não foi possível fazer upload da foto.",variant:"destructive"})}finally{u(!1)}}},p=async()=>{f(!0);try{const{data:a,error:t}=await L.from("user_profiles").update({name:m.name,crn:m.crn,phone:m.phone,education:m.education,bio:m.bio,address:m.address,specialties:m.specialties}).eq("id",n.id).select().single();if(t)throw t;k(a),C&&C(a),g({title:"Perfil atualizado!",description:"Suas informações foram salvas com sucesso."})}catch{g({title:"Erro",description:"Não foi possível salvar as alterações.",variant:"destructive"})}finally{f(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(N,{children:[e.jsxs(S,{children:[e.jsx(b,{children:"Foto de Perfil / Logo"}),e.jsx(D,{children:"Faça upload da sua foto ou logo do consultório"})]}),e.jsx(F,{children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-primary/20 bg-secondary flex items-center justify-center overflow-hidden",children:m.avatar_url?e.jsx("img",{src:m.avatar_url,alt:"Foto de perfil",className:"w-full h-full object-cover"}):e.jsx(Z,{className:"w-16 h-16 text-muted-foreground"})}),e.jsx("input",{type:"file",ref:R,onChange:r,accept:"image/*",className:"hidden",disabled:d}),e.jsx(j,{size:"icon",className:"absolute bottom-0 right-0 rounded-full h-10 w-10",onClick:()=>R.current?.click(),disabled:d,children:d?e.jsx(z,{className:"w-4 h-4 animate-spin"}):e.jsx(Ke,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clique no ícone de upload para alterar sua foto. Formatos aceitos: JPG, PNG (máx. 5MB)"})})]})})]}),e.jsxs(N,{children:[e.jsxs(S,{children:[e.jsx(b,{children:"Informações Pessoais"}),e.jsx(D,{children:"Dados básicos do nutricionista"})]}),e.jsxs(F,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Nome Completo *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(h,{id:"name",value:m.name,onChange:a=>x(t=>({...t,name:a.target.value})),placeholder:"Seu nome completo"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"crn",children:"CRN *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(h,{id:"crn",value:m.crn,onChange:a=>x(t=>({...t,crn:a.target.value})),placeholder:"Ex: CRN-3 12345"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"phone",children:"Telefone"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(h,{id:"phone",value:m.phone,onChange:a=>x(t=>({...t,phone:a.target.value})),placeholder:"(00) 00000-0000"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"education",children:"Formação Acadêmica"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(h,{id:"education",value:m.education,onChange:a=>x(t=>({...t,education:a.target.value})),placeholder:"Ex: Graduação em Nutrição - UFMG"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Especialidades"}),e.jsxs(Q,{value:m.specialties[0]||"none",onValueChange:a=>{x(t=>({...t,specialties:a&&a!=="none"?[a]:[]}))},children:[e.jsx(W,{children:e.jsx(Y,{placeholder:"Selecione uma especialidade"})}),e.jsxs(J,{children:[e.jsx(O,{value:"none",children:"Nenhuma"}),rs.map(a=>e.jsx(O,{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"bio",children:"Biografia Profissional"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-muted-foreground mt-2 flex-shrink-0"}),e.jsx(Ve,{id:"bio",value:m.bio,onChange:a=>x(t=>({...t,bio:a.target.value})),placeholder:"Descreva sua experiência profissional...",rows:4})]})]})]})]}),e.jsxs(N,{children:[e.jsxs(S,{children:[e.jsx(b,{children:"Endereço Completo do Consultório"}),e.jsx(D,{children:"Usado em recibos e documentos oficiais"})]}),e.jsx(F,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(o,{htmlFor:"street",children:"Rua / Avenida"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(h,{id:"street",value:m.address.street,onChange:a=>x(t=>({...t,address:{...t.address,street:a.target.value}})),placeholder:"Rua, número, complemento"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"city",children:"Cidade"}),e.jsx(h,{id:"city",value:m.address.city,onChange:a=>x(t=>({...t,address:{...t.address,city:a.target.value}})),placeholder:"Cidade"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"state",children:"Estado"}),e.jsx(h,{id:"state",value:m.address.state,onChange:a=>x(t=>({...t,address:{...t.address,state:a.target.value}})),placeholder:"UF",maxLength:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"zip",children:"CEP"}),e.jsx(h,{id:"zip",value:m.address.zip,onChange:a=>x(t=>({...t,address:{...t.address,zip:a.target.value}})),placeholder:"00000-000"})]})]})})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(j,{onClick:p,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Salvar Alterações"})})]})}const ls=[{value:"monday",label:"Segunda-feira"},{value:"tuesday",label:"Terça-feira"},{value:"wednesday",label:"Quarta-feira"},{value:"thursday",label:"Quinta-feira"},{value:"friday",label:"Sexta-feira"},{value:"saturday",label:"Sábado"},{value:"sunday",label:"Domingo"}],ns=[{value:30,label:"30 minutos"},{value:45,label:"45 minutos"},{value:60,label:"1 hora"},{value:90,label:"1 hora e 30 minutos"}];function cs({userId:i,onUpdate:C}){const{toast:n}=X(),[k,g]=c.useState(!1),[v,f]=c.useState(!1),[d,u]=c.useState({startTime:"08:00",endTime:"18:00",workingDays:["monday","tuesday","wednesday","thursday","friday"],slotDuration:60});c.useEffect(()=>{R()},[i]);const R=async()=>{if(i){g(!0);try{const r=await je(i);r.agenda&&u({startTime:r.agenda.startTime||"08:00",endTime:r.agenda.endTime||"18:00",workingDays:r.agenda.workingDays||["monday","tuesday","wednesday","thursday","friday"],slotDuration:r.agenda.slotDuration||60})}catch(r){console.error("Error loading agenda settings:",r)}finally{g(!1)}}},m=r=>{u(p=>({...p,workingDays:p.workingDays.includes(r)?p.workingDays.filter(a=>a!==r):[...p.workingDays,r]}))},x=async()=>{if(i){f(!0);try{await ge(i,{agenda:{startTime:d.startTime,endTime:d.endTime,workingDays:d.workingDays,slotDuration:d.slotDuration}}),n({title:"Configurações salvas!",description:"As configurações de agenda foram atualizadas com sucesso."}),C&&C()}catch{n({title:"Erro",description:"Não foi possível salvar as configurações.",variant:"destructive"})}finally{f(!1)}}};return k?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(z,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(N,{children:[e.jsxs(S,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),"Horário de Funcionamento"]}),e.jsx(D,{children:"Defina os horários de atendimento do seu consultório"})]}),e.jsx(F,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"startTime",children:"Horário de Início"}),e.jsx(h,{id:"startTime",type:"time",value:d.startTime,onChange:r=>u(p=>({...p,startTime:r.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"endTime",children:"Horário de Término"}),e.jsx(h,{id:"endTime",type:"time",value:d.endTime,onChange:r=>u(p=>({...p,endTime:r.target.value}))})]})]})})]}),e.jsxs(N,{children:[e.jsxs(S,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Dias da Semana"]}),e.jsx(D,{children:"Selecione os dias em que você atende"})]}),e.jsx(F,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ls.map(r=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{id:r.value,checked:d.workingDays.includes(r.value),onCheckedChange:()=>m(r.value)}),e.jsx(o,{htmlFor:r.value,className:"text-sm font-normal cursor-pointer",children:r.label})]},r.value))})})]}),e.jsxs(N,{children:[e.jsxs(S,{children:[e.jsx(b,{children:"Duração dos Slots"}),e.jsx(D,{children:"Tempo padrão de cada consulta/agendamento"})]}),e.jsx(F,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"slotDuration",children:"Duração (minutos)"}),e.jsxs(Q,{value:d.slotDuration.toString(),onValueChange:r=>u(p=>({...p,slotDuration:parseInt(r)})),children:[e.jsx(W,{children:e.jsx(Y,{})}),e.jsx(J,{children:ns.map(r=>e.jsx(O,{value:r.value.toString(),children:r.label},r.value))})]})]})})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(j,{onClick:x,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Salvar Configurações"})})]})}const xe=[{value:"consulta",label:"Consulta"},{value:"plano_mensal",label:"Plano Mensal"},{value:"outros",label:"Outros"}];function os({userId:i,onUpdate:C}){const{toast:n}=X(),[k,g]=c.useState(!1),[v,f]=c.useState(!1),[d,u]=c.useState({defaultPixKey:"",defaultFeePercentage:"",monthlyFinancialGoal:1e4}),[R,m]=c.useState([]),[x,r]=c.useState([]),[p,a]=c.useState(!1),[t,w]=c.useState(!1),[G,U]=c.useState(null),[q,$]=c.useState(null),[_,E]=c.useState({type:null,id:null}),[y,M]=c.useState({name:"",description:"",price:"",category:"consulta"}),[A,V]=c.useState({description:"",value:"",day_of_month:"1"});c.useEffect(()=>{i&&K()},[i]);const K=async()=>{if(i){g(!0);try{const[s,l,Ee]=await Promise.all([je(i),Je(i),Be(i)]);u({defaultPixKey:s.defaultPixKey||"",defaultFeePercentage:s.defaultFeePercentage||"",monthlyFinancialGoal:s.monthlyFinancialGoal||1e4}),m(l),r(Ee)}catch(s){console.error("Error loading financial data:",s),n({title:"Erro",description:"Não foi possível carregar os dados.",variant:"destructive"})}finally{g(!1)}}},fe=async()=>{if(i){f(!0);try{await ge(i,{defaultPixKey:d.defaultPixKey,defaultFeePercentage:d.defaultFeePercentage?parseFloat(d.defaultFeePercentage):null,monthlyFinancialGoal:d.monthlyFinancialGoal?parseFloat(d.monthlyFinancialGoal):1e4}),n({title:"Configurações salvas!",description:"As configurações financeiras foram atualizadas."}),C&&C()}catch{n({title:"Erro",description:"Não foi possível salvar as configurações.",variant:"destructive"})}finally{f(!1)}}},ye=()=>{U(null),M({name:"",description:"",price:"",category:"consulta"}),a(!0)},Ne=s=>{U(s),M({name:s.name,description:s.description||"",price:s.price.toString(),category:s.category||"consulta"}),a(!0)},Ce=async s=>{if(s.preventDefault(),!y.name||!y.price){n({title:"Erro",description:"Preencha todos os campos obrigatórios.",variant:"destructive"});return}try{await Xe({id:G?.id,nutritionist_id:i,name:y.name,description:y.description,price:parseFloat(y.price),category:y.category}),n({title:"Sucesso!",description:`Serviço ${G?"atualizado":"criado"} com sucesso.`}),a(!1),K()}catch{n({title:"Erro",description:"Não foi possível salvar o serviço.",variant:"destructive"})}},Se=async s=>{try{await Ze(s),n({title:"Sucesso!",description:"Serviço excluído com sucesso."}),E({type:null,id:null}),K()}catch{n({title:"Erro",description:"Não foi possível excluir o serviço.",variant:"destructive"})}},be=()=>{$(null),V({description:"",value:"",day_of_month:"1"}),w(!0)},De=s=>{$(s),V({description:s.description,value:s.value.toString(),day_of_month:s.day_of_month.toString()}),w(!0)},Fe=async s=>{if(s.preventDefault(),!A.description||!A.value){n({title:"Erro",description:"Preencha todos os campos obrigatórios.",variant:"destructive"});return}try{await Qe(i,{id:q?.id,description:A.description,value:parseFloat(A.value),day_of_month:parseInt(A.day_of_month)}),n({title:"Sucesso!",description:`Despesa recorrente ${q?"atualizada":"criada"} com sucesso.`}),w(!1),K()}catch{n({title:"Erro",description:"Não foi possível salvar a despesa.",variant:"destructive"})}},we=async s=>{try{await We(i,s),n({title:"Sucesso!",description:"Despesa excluída com sucesso."}),E({type:null,id:null}),K()}catch{n({title:"Erro",description:"Não foi possível excluir a despesa.",variant:"destructive"})}};return k?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(z,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(N,{children:[e.jsxs(S,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"w-5 h-5"}),"Configurações Gerais"]}),e.jsx(D,{children:"Configurações padrão para transações financeiras"})]}),e.jsxs(F,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"defaultPixKey",children:"Chave PIX Padrão"}),e.jsx(h,{id:"defaultPixKey",value:d.defaultPixKey,onChange:s=>u(l=>({...l,defaultPixKey:s.target.value})),placeholder:"CPF, E-mail, Telefone ou Chave Aleatória"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"defaultFeePercentage",children:"Taxa Padrão de Maquininha (%)"}),e.jsx(h,{id:"defaultFeePercentage",type:"number",step:"0.01",min:"0",max:"100",value:d.defaultFeePercentage,onChange:s=>u(l=>({...l,defaultFeePercentage:s.target.value})),placeholder:"Ex: 2.5"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"monthlyFinancialGoal",children:"Meta Financeira Mensal (R$)"}),e.jsx(h,{id:"monthlyFinancialGoal",type:"number",step:"100",min:"0",value:d.monthlyFinancialGoal,onChange:s=>u(l=>({...l,monthlyFinancialGoal:parseFloat(s.target.value)||0})),placeholder:"Ex: 10000"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Meta de receita mensal para acompanhamento no dashboard financeiro"})]}),e.jsx(j,{onClick:fe,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Salvar Configurações"})]})]}),e.jsxs(N,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5"}),"Meus Serviços"]}),e.jsx(D,{children:"Gerencie seus serviços e preços padrão"})]}),e.jsxs(j,{onClick:ye,children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Novo Serviço"]})]})}),e.jsx(F,{children:R.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'Nenhum serviço cadastrado. Clique em "Novo Serviço" para começar.'}):e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(B,{children:[e.jsx(P,{children:"Nome"}),e.jsx(P,{children:"Descrição"}),e.jsx(P,{children:"Categoria"}),e.jsx(P,{className:"text-right",children:"Preço"}),e.jsx(P,{className:"text-right",children:"Ações"})]})}),e.jsx(me,{children:R.map(s=>e.jsxs(B,{children:[e.jsx(T,{className:"font-medium",children:s.name}),e.jsx(T,{className:"max-w-[300px] truncate",children:s.description||"-"}),e.jsx(T,{children:xe.find(l=>l.value===s.category)?.label||s.category}),e.jsx(T,{className:"text-right font-semibold",children:ae(s.price)}),e.jsx(T,{children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>Ne(s),className:"h-8 w-8",children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>E({type:"service",id:s.id}),className:"h-8 w-8 text-destructive hover:text-destructive",children:e.jsx(ie,{className:"h-4 w-4"})})]})})]},s.id))})]})})]}),e.jsxs(N,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Despesas Fixas (Recorrência)"]}),e.jsx(D,{children:"Despesas que se repetem mensalmente"})]}),e.jsxs(j,{onClick:be,children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Nova Despesa"]})]})}),e.jsx(F,{children:x.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma despesa recorrente cadastrada."}):e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(B,{children:[e.jsx(P,{children:"Descrição"}),e.jsx(P,{className:"text-right",children:"Valor"}),e.jsx(P,{className:"text-right",children:"Dia do Mês"}),e.jsx(P,{className:"text-right",children:"Ações"})]})}),e.jsx(me,{children:x.map(s=>e.jsxs(B,{children:[e.jsx(T,{className:"font-medium",children:s.description}),e.jsx(T,{className:"text-right font-semibold",children:ae(s.value)}),e.jsxs(T,{className:"text-right",children:["Dia ",s.day_of_month]}),e.jsx(T,{children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>De(s),className:"h-8 w-8",children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>E({type:"expense",id:s.id}),className:"h-8 w-8 text-destructive hover:text-destructive",children:e.jsx(ie,{className:"h-4 w-4"})})]})})]},s.id))})]})})]}),e.jsx(re,{open:p,onOpenChange:a,children:e.jsxs(te,{children:[e.jsx(le,{children:e.jsx(ne,{children:G?"Editar Serviço":"Novo Serviço"})}),e.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"serviceName",children:"Nome do Serviço *"}),e.jsx(h,{id:"serviceName",required:!0,value:y.name,onChange:s=>M(l=>({...l,name:s.target.value})),placeholder:"Ex: Consulta Individual"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"serviceDescription",children:"Descrição"}),e.jsx(h,{id:"serviceDescription",value:y.description,onChange:s=>M(l=>({...l,description:s.target.value})),placeholder:"Descrição opcional"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"serviceCategory",children:"Categoria *"}),e.jsxs(Q,{required:!0,value:y.category,onValueChange:s=>M(l=>({...l,category:s})),children:[e.jsx(W,{children:e.jsx(Y,{})}),e.jsx(J,{children:xe.map(s=>e.jsx(O,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"servicePrice",children:"Preço (R$) *"}),e.jsx(h,{id:"servicePrice",type:"number",step:"0.01",min:"0",required:!0,value:y.price,onChange:s=>M(l=>({...l,price:s.target.value})),placeholder:"0.00"})]})]}),e.jsxs(ce,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),e.jsx(j,{type:"submit",children:"Salvar"})]})]})]})}),e.jsx(re,{open:t,onOpenChange:w,children:e.jsxs(te,{children:[e.jsx(le,{children:e.jsx(ne,{children:q?"Editar Despesa Recorrente":"Nova Despesa Recorrente"})}),e.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"expenseDescription",children:"Descrição *"}),e.jsx(h,{id:"expenseDescription",required:!0,value:A.description,onChange:s=>V(l=>({...l,description:s.target.value})),placeholder:"Ex: Aluguel do Consultório"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"expenseValue",children:"Valor (R$) *"}),e.jsx(h,{id:"expenseValue",type:"number",step:"0.01",min:"0",required:!0,value:A.value,onChange:s=>V(l=>({...l,value:s.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"expenseDay",children:"Dia do Mês *"}),e.jsxs(Q,{required:!0,value:A.day_of_month,onValueChange:s=>V(l=>({...l,day_of_month:s})),children:[e.jsx(W,{children:e.jsx(Y,{})}),e.jsx(J,{children:Array.from({length:31},(s,l)=>l+1).map(s=>e.jsxs(O,{value:s.toString(),children:["Dia ",s]},s))})]})]})]}),e.jsxs(ce,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancelar"}),e.jsx(j,{type:"submit",children:"Salvar"})]})]})]})}),e.jsx(Pe,{open:!!_.type,onOpenChange:s=>!s&&E({type:null,id:null}),children:e.jsxs(Te,{children:[e.jsxs(ke,{children:[e.jsx(_e,{children:"Confirmar Exclusão"}),e.jsxs(Ae,{children:["Tem certeza que deseja excluir este ",_.type==="service"?"serviço":"despesa","? Esta ação não pode ser desfeita."]})]}),e.jsxs(Re,{children:[e.jsx(ze,{children:"Cancelar"}),e.jsx(Ge,{onClick:()=>{_.type==="service"?Se(_.id):we(_.id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}const ks=()=>{const{user:i,updateUserProfile:C}=pe();X();const[n,k]=c.useState(!0),[g,v]=c.useState(null);c.useEffect(()=>{i&&(i.profile?v(i.profile):v({}),k(!1))},[i]);const f=u=>{v(u),C&&C(u)};if(n||!i)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(z,{className:"w-8 h-8 animate-spin text-muted-foreground"})});const d=g||{};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsx(N,{children:e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsx(Me,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx(b,{className:"text-3xl",children:"Ajustes do Consultório"}),e.jsx(D,{className:"text-base mt-1",children:"Configure todas as informações e preferências do seu consultório em um só lugar"})]})]})})}),e.jsx(N,{children:e.jsx(F,{className:"p-0",children:e.jsxs(Le,{defaultValue:"personal",className:"w-full",children:[e.jsxs(Ue,{className:"grid w-full grid-cols-4 h-auto p-1",children:[e.jsxs(H,{value:"personal",className:"flex items-center gap-2 py-3",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Dados & Branding"}),e.jsx("span",{className:"sm:hidden",children:"Dados"})]}),e.jsxs(H,{value:"agenda",className:"flex items-center gap-2 py-3",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Agenda & Horários"}),e.jsx("span",{className:"sm:hidden",children:"Agenda"})]}),e.jsxs(H,{value:"financial",className:"flex items-center gap-2 py-3",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Financeiro & Serviços"}),e.jsx("span",{className:"sm:hidden",children:"Financeiro"})]}),e.jsxs(H,{value:"account",className:"flex items-center gap-2 py-3",children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Conta"}),e.jsx("span",{className:"sm:hidden",children:"Conta"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(I,{value:"personal",className:"mt-0",children:e.jsx(ts,{profile:d,onUpdate:f})}),e.jsx(I,{value:"agenda",className:"mt-0",children:e.jsx(cs,{userId:i.id,onUpdate:f})}),e.jsx(I,{value:"financial",className:"mt-0",children:e.jsx(os,{userId:i.id,onUpdate:f})}),e.jsx(I,{value:"account",className:"mt-0",children:e.jsxs(N,{children:[e.jsxs(S,{children:[e.jsx(b,{children:"Configurações da Conta"}),e.jsx(D,{children:"Gerencie sua senha e preferências de conta"})]}),e.jsxs(F,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"E-mail"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.email})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Para alterar sua senha, entre em contato com o suporte ou use a funcionalidade de recuperação de senha na página de login."})})]})]})})]})]})})})]})})})};export{ks as default};
