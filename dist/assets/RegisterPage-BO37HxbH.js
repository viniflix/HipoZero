import{q as D,r as d,u as q,a as I,b as T,j as e,m as N,C as _,c as L,d as R,e as V,U as M,v as U,B as A,g as O,t as z}from"./index-DL6VMzkS.js";import{D as H}from"./date-input-zI4YYSYu.js";import{I as o}from"./input-CMIeflfg.js";import{L as r}from"./label-c61kF7fH.js";import{S as p,a as x,b as g,c as j,d as i}from"./select-BdvFUaSV.js";import{M as B}from"./mail-BUMMEZb5.js";import{R as Z}from"./ruler-D1AldI3E.js";import{S as G}from"./scale-CMNH11Qj.js";import{T as J}from"./target-DxVIlGM1.js";import{L as y}from"./lock-tuEnNJuJ.js";import{E as w}from"./eye-off-BcnEknYg.js";import{E as b}from"./eye-DPN_ZxMD.js";import"./calendar-BOiwl0x6.js";import"./endOfMonth-fINJXo8H.js";import"./addMonths-Dpdm5UWc.js";import"./isSameDay-CfSWIrxC.js";import"./chevron-left-HK0xeE4r.js";import"./popover-D1PQqJd4.js";import"./extends-CF3RwP-h.js";import"./pt-BR-faZp8-Xc.js";import"./parseISO-DyXfBXdu.js";const W=D("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);function ge(){const[s,C]=d.useState({name:"",email:"",password:"",confirmPassword:"",type:"",birth_date:"",gender:"",height:"",weight:"",goal:""}),[m,S]=d.useState(!1),[h,P]=d.useState(!1),[f,n]=d.useState(!1),{signUp:E}=q(),{toast:c}=I(),F=T(),t=(a,l)=>{C(u=>({...u,[a]:l}))},k=async a=>{if(a.preventDefault(),n(!0),s.password!==s.confirmPassword){c({title:"Erro no cadastro",description:"As senhas não coincidem.",variant:"destructive"}),n(!1);return}const l=["patient","nutritionist"].includes(s.type)?s.type:"patient",u={full_name:s.name,name:s.name,display_name:s.name,role:l,user_type:l,crn:null,birth_date:s.type==="patient"?s.birth_date:null,gender:s.type==="patient"?s.gender:null,height:s.type==="patient"&&s.height?parseInt(s.height):null,weight:s.type==="patient"&&s.weight?parseFloat(s.weight):null,goal:s.type==="patient"?s.goal:null};if(!l||!["patient","nutritionist"].includes(l)){c({title:"Erro no cadastro",description:"Tipo de usuário inválido. Por favor, selecione um tipo válido.",variant:"destructive"}),n(!1);return}const{error:v}=await E({email:s.email,password:s.password,options:{data:u,emailRedirectTo:`${window.location.origin}/login`}});n(!1),v?c({title:"Erro no cadastro",description:z(v,"Não foi possível concluir o cadastro."),variant:"destructive"}):(c({title:"Cadastro realizado com sucesso!",description:"Enviamos um link de confirmação para o seu e-mail."}),F("/login"))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-2xl",children:[e.jsxs(_,{className:"bg-card shadow-card-dark border-border",children:[e.jsxs(L,{className:"space-y-4 pb-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"https://afyoidxrshkmplxhcyeh.supabase.co/storage/v1/object/public/IDV/HIPOZERO%20(2).png",alt:"HipoZero",className:"h-16 w-auto"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"text-2xl font-semibold text-foreground",children:"Criar Conta"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Preencha os dados para começar"})]})]}),e.jsxs(V,{children:[e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",className:"text-sm font-medium",children:"Nome completo"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(o,{id:"name",type:"text",placeholder:"Seu nome completo",value:s.name,onChange:a=>t("name",a.target.value),required:!0,className:"pl-10 h-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(o,{id:"email",type:"email",placeholder:"seu@email.com",value:s.email,onChange:a=>t("email",a.target.value),required:!0,className:"pl-10 h-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"type",className:"text-sm font-medium",children:"Tipo de usuário"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none"}),e.jsxs(p,{value:s.type,onValueChange:a=>t("type",a),children:[e.jsx(x,{className:"pl-10 h-10",children:e.jsx(g,{placeholder:"Selecione o tipo"})}),e.jsxs(j,{children:[e.jsx(i,{value:"nutritionist",children:"Nutricionista"}),e.jsx(i,{value:"patient",children:"Paciente"})]})]})]})]})]}),e.jsx(U,{mode:"wait",children:s.type==="patient"&&e.jsx(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"space-y-4 pt-2 border-t border-border",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"birthDate",className:"text-sm font-medium",children:"Data de nascimento"}),e.jsx(H,{id:"birthDate",value:s.birth_date,onChange:a=>t("birth_date",a),required:!0,className:"h-10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"gender",className:"text-sm font-medium",children:"Sexo"}),e.jsxs(p,{value:s.gender,onValueChange:a=>t("gender",a),required:!0,children:[e.jsx(x,{className:"h-10",children:e.jsx(g,{placeholder:"Selecione"})}),e.jsxs(j,{children:[e.jsx(i,{value:"male",children:"Masculino"}),e.jsx(i,{value:"female",children:"Feminino"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"height",className:"text-sm font-medium",children:["Altura (cm) ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(opcional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(o,{id:"height",type:"number",placeholder:"175",value:s.height,onChange:a=>t("height",a.target.value),className:"pl-10 h-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"weight",className:"text-sm font-medium",children:["Peso (kg) ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(opcional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(o,{id:"weight",type:"number",step:"0.1",placeholder:"70.5",value:s.weight,onChange:a=>t("weight",a.target.value),className:"pl-10 h-10"})]})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(r,{htmlFor:"goal",className:"text-sm font-medium",children:"Objetivo"}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none"}),e.jsxs(p,{value:s.goal,onValueChange:a=>t("goal",a),required:!0,children:[e.jsx(x,{className:"pl-10 h-10",children:e.jsx(g,{placeholder:"Selecione seu objetivo"})}),e.jsxs(j,{children:[e.jsx(i,{value:"lose",children:"Perder peso"}),e.jsx(i,{value:"maintain",children:"Manter peso"}),e.jsx(i,{value:"gain",children:"Ganhar peso"})]})]})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2 border-t border-border",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"password",className:"text-sm font-medium",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(o,{id:"password",type:m?"text":"password",placeholder:"••••••••",value:s.password,onChange:a=>t("password",a.target.value),required:!0,className:"pl-10 pr-10 h-10"}),e.jsx("button",{type:"button",onClick:()=>S(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:m?e.jsx(w,{className:"w-4 h-4"}):e.jsx(b,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirmar senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(o,{id:"confirmPassword",type:h?"text":"password",placeholder:"••••••••",value:s.confirmPassword,onChange:a=>t("confirmPassword",a.target.value),required:!0,className:"pl-10 pr-10 h-10"}),e.jsx("button",{type:"button",onClick:()=>P(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:h?e.jsx(w,{className:"w-4 h-4"}):e.jsx(b,{className:"w-4 h-4"})})]})]})]}),e.jsx(A,{type:"submit",className:"w-full h-10 bg-primary hover:bg-primary/90 text-white font-medium mt-6",disabled:f||!s.type,children:f?"Cadastrando...":"Criar conta"})]}),e.jsx("div",{className:"mt-6 text-center border-t border-border pt-6",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Já tem uma conta?"," ",e.jsx(O,{to:"/login",className:"text-primary hover:underline font-medium transition-colors",children:"Entrar"})]})})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Plataforma profissional de gestão nutricional"})})]})})}export{ge as default};
