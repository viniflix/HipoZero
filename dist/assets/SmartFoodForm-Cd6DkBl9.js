import{r,aP as Yt,j as e,R as jt,a as qt,u as Gt,C as Me,e as ze,c as pt,d as ht,w as gt,B as Y,X as Qt,L as vt,ai as Zt,aj as Kt,ak as Jt,al as er,au as tr,M as rr,s as Je}from"./index-D2NJdUSJ.js";import{I as j}from"./input-Cr1iH3ZE.js";import{L as _}from"./label-QWp1Wm8s.js";import{B as or}from"./badge-quOZaxai.js";import{P as sr}from"./progress-M5OS4qQN.js";import{T as ar,a as nr,b as xt,c as bt}from"./tabs-0BuTkdtm.js";import{_ as w}from"./extends-CF3RwP-h.js";import{c as ir}from"./foodService-DgcWp_QN.js";import{I as Ue}from"./info-2L85nFdh.js";import{P as lr}from"./plus-C4tpCd6P.js";import{S as St}from"./search-CagxFl4M.js";import{C as cr}from"./chevron-left-CMjaZDoo.js";import{C as dr}from"./check-circle-2-DDcrxKFQ.js";function ur(o,s){typeof o=="function"?o(s):o!=null&&(o.current=s)}function Ft(...o){return s=>o.forEach(n=>ur(n,s))}function Q(...o){return r.useCallback(Ft(...o),o)}const yt=r.forwardRef((o,s)=>{const{children:n,...l}=o,i=r.Children.toArray(n),u=i.find(fr);if(u){const d=u.props.children,m=i.map(c=>c===u?r.Children.count(d)>1?r.Children.only(null):r.isValidElement(d)?d.props.children:null:c);return r.createElement(et,w({},l,{ref:s}),r.isValidElement(d)?r.cloneElement(d,void 0,m):null)}return r.createElement(et,w({},l,{ref:s}),n)});yt.displayName="Slot";const et=r.forwardRef((o,s)=>{const{children:n,...l}=o;return r.isValidElement(n)?r.cloneElement(n,{...pr(l,n.props),ref:s?Ft(s,n.ref):n.ref}):r.Children.count(n)>1?r.Children.only(null):null});et.displayName="SlotClone";const mr=({children:o})=>r.createElement(r.Fragment,null,o);function fr(o){return r.isValidElement(o)&&o.type===mr}function pr(o,s){const n={...s};for(const l in s){const i=o[l],u=s[l];/^on[A-Z]/.test(l)?i&&u?n[l]=(...m)=>{u(...m),i(...m)}:i&&(n[l]=i):l==="style"?n[l]={...i,...u}:l==="className"&&(n[l]=[i,u].filter(Boolean).join(" "))}return{...o,...n}}const hr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ke=hr.reduce((o,s)=>{const n=r.forwardRef((l,i)=>{const{asChild:u,...d}=l,m=u?yt:s;return r.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),r.createElement(m,w({},d,{ref:i}))});return n.displayName=`Primitive.${s}`,{...o,[s]:n}},{}),tt=globalThis?.document?r.useLayoutEffect:()=>{};function gr(o,s){return r.useReducer((n,l)=>{const i=s[n][l];return i??n},o)}const Le=o=>{const{present:s,children:n}=o,l=vr(s),i=typeof n=="function"?n({present:l.isPresent}):r.Children.only(n),u=Q(l.ref,i.ref);return typeof n=="function"||l.isPresent?r.cloneElement(i,{ref:u}):null};Le.displayName="Presence";function vr(o){const[s,n]=r.useState(),l=r.useRef({}),i=r.useRef(o),u=r.useRef("none"),d=o?"mounted":"unmounted",[m,c]=gr(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const f=We(l.current);u.current=m==="mounted"?f:"none"},[m]),tt(()=>{const f=l.current,p=i.current;if(p!==o){const g=u.current,b=We(f);o?c("MOUNT"):b==="none"||f?.display==="none"?c("UNMOUNT"):c(p&&g!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=o}},[o,c]),tt(()=>{if(s){const f=v=>{const b=We(l.current).includes(v.animationName);v.target===s&&b&&Yt.flushSync(()=>c("ANIMATION_END"))},p=v=>{v.target===s&&(u.current=We(l.current))};return s.addEventListener("animationstart",p),s.addEventListener("animationcancel",f),s.addEventListener("animationend",f),()=>{s.removeEventListener("animationstart",p),s.removeEventListener("animationcancel",f),s.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:r.useCallback(f=>{f&&(l.current=getComputedStyle(f)),n(f)},[])}}function We(o){return o?.animationName||"none"}function xr(o,s=[]){let n=[];function l(u,d){const m=r.createContext(d),c=n.length;n=[...n,d];function f(v){const{scope:g,children:b,...y}=v,N=g?.[o][c]||m,L=r.useMemo(()=>y,Object.values(y));return r.createElement(N.Provider,{value:L},b)}function p(v,g){const b=g?.[o][c]||m,y=r.useContext(b);if(y)return y;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${u}\``)}return f.displayName=u+"Provider",[f,p]}const i=()=>{const u=n.map(d=>r.createContext(d));return function(m){const c=m?.[o]||u;return r.useMemo(()=>({[`__scope${o}`]:{...m,[o]:c}}),[m,c])}};return i.scopeName=o,[l,br(i,...s)]}function br(...o){const s=o[0];if(o.length===1)return s;const n=()=>{const l=o.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(u){const d=l.reduce((m,{useScope:c,scopeName:f})=>{const v=c(u)[`__scope${f}`];return{...m,...v}},{});return r.useMemo(()=>({[`__scope${s.scopeName}`]:d}),[d])}};return n.scopeName=s.scopeName,n}function q(o){const s=r.useRef(o);return r.useEffect(()=>{s.current=o}),r.useMemo(()=>(...n)=>{var l;return(l=s.current)===null||l===void 0?void 0:l.call(s,...n)},[])}const Sr=r.createContext(void 0);function _r(o){const s=r.useContext(Sr);return o||s||"ltr"}function jr(o,[s,n]){return Math.min(n,Math.max(s,o))}function G(o,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(o?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function Fr(o,s){return r.useReducer((n,l)=>{const i=s[n][l];return i??n},o)}const wt="ScrollArea",[Nt]=xr(wt),[yr,k]=Nt(wt),wr=r.forwardRef((o,s)=>{const{__scopeScrollArea:n,type:l="hover",dir:i,scrollHideDelay:u=600,...d}=o,[m,c]=r.useState(null),[f,p]=r.useState(null),[v,g]=r.useState(null),[b,y]=r.useState(null),[N,L]=r.useState(null),[R,V]=r.useState(0),[A,D]=r.useState(0),[$,T]=r.useState(!1),[E,M]=r.useState(!1),S=Q(s,P=>c(P)),C=_r(i);return r.createElement(yr,{scope:n,type:l,dir:C,scrollHideDelay:u,scrollArea:m,viewport:f,onViewportChange:p,content:v,onContentChange:g,scrollbarX:b,onScrollbarXChange:y,scrollbarXEnabled:$,onScrollbarXEnabledChange:T,scrollbarY:N,onScrollbarYChange:L,scrollbarYEnabled:E,onScrollbarYEnabledChange:M,onCornerWidthChange:V,onCornerHeightChange:D},r.createElement(ke.div,w({dir:C},d,{ref:S,style:{position:"relative","--radix-scroll-area-corner-width":R+"px","--radix-scroll-area-corner-height":A+"px",...o.style}})))}),Nr="ScrollAreaViewport",Cr=r.forwardRef((o,s)=>{const{__scopeScrollArea:n,children:l,...i}=o,u=k(Nr,n),d=r.useRef(null),m=Q(s,d,u.onViewportChange);return r.createElement(r.Fragment,null,r.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),r.createElement(ke.div,w({"data-radix-scroll-area-viewport":""},i,{ref:m,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...o.style}}),r.createElement("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"}},l)))}),I="ScrollAreaScrollbar",Ct=r.forwardRef((o,s)=>{const{forceMount:n,...l}=o,i=k(I,o.__scopeScrollArea),{onScrollbarXEnabledChange:u,onScrollbarYEnabledChange:d}=i,m=o.orientation==="horizontal";return r.useEffect(()=>(m?u(!0):d(!0),()=>{m?u(!1):d(!1)}),[m,u,d]),i.type==="hover"?r.createElement($r,w({},l,{ref:s,forceMount:n})):i.type==="scroll"?r.createElement(Er,w({},l,{ref:s,forceMount:n})):i.type==="auto"?r.createElement($t,w({},l,{ref:s,forceMount:n})):i.type==="always"?r.createElement(ot,w({},l,{ref:s})):null}),$r=r.forwardRef((o,s)=>{const{forceMount:n,...l}=o,i=k(I,o.__scopeScrollArea),[u,d]=r.useState(!1);return r.useEffect(()=>{const m=i.scrollArea;let c=0;if(m){const f=()=>{window.clearTimeout(c),d(!0)},p=()=>{c=window.setTimeout(()=>d(!1),i.scrollHideDelay)};return m.addEventListener("pointerenter",f),m.addEventListener("pointerleave",p),()=>{window.clearTimeout(c),m.removeEventListener("pointerenter",f),m.removeEventListener("pointerleave",p)}}},[i.scrollArea,i.scrollHideDelay]),r.createElement(Le,{present:n||u},r.createElement($t,w({"data-state":u?"visible":"hidden"},l,{ref:s})))}),Er=r.forwardRef((o,s)=>{const{forceMount:n,...l}=o,i=k(I,o.__scopeScrollArea),u=o.orientation==="horizontal",d=qe(()=>c("SCROLL_END"),100),[m,c]=Fr("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return r.useEffect(()=>{if(m==="idle"){const f=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(f)}},[m,i.scrollHideDelay,c]),r.useEffect(()=>{const f=i.viewport,p=u?"scrollLeft":"scrollTop";if(f){let v=f[p];const g=()=>{const b=f[p];v!==b&&(c("SCROLL"),d()),v=b};return f.addEventListener("scroll",g),()=>f.removeEventListener("scroll",g)}},[i.viewport,u,c,d]),r.createElement(Le,{present:n||m!=="hidden"},r.createElement(ot,w({"data-state":m==="hidden"?"hidden":"visible"},l,{ref:s,onPointerEnter:G(o.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:G(o.onPointerLeave,()=>c("POINTER_LEAVE"))})))}),$t=r.forwardRef((o,s)=>{const n=k(I,o.__scopeScrollArea),{forceMount:l,...i}=o,[u,d]=r.useState(!1),m=o.orientation==="horizontal",c=qe(()=>{if(n.viewport){const f=n.viewport.offsetWidth<n.viewport.scrollWidth,p=n.viewport.offsetHeight<n.viewport.scrollHeight;d(m?f:p)}},10);return Te(n.viewport,c),Te(n.content,c),r.createElement(Le,{present:l||u},r.createElement(ot,w({"data-state":u?"visible":"hidden"},i,{ref:s})))}),ot=r.forwardRef((o,s)=>{const{orientation:n="vertical",...l}=o,i=k(I,o.__scopeScrollArea),u=r.useRef(null),d=r.useRef(0),[m,c]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=Tt(m.viewport,m.content),p={...l,sizes:m,onSizesChange:c,hasThumb:f>0&&f<1,onThumbChange:g=>u.current=g,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:g=>d.current=g};function v(g,b){return Lr(g,d.current,m,b)}return n==="horizontal"?r.createElement(Pr,w({},p,{ref:s,onThumbPositionChange:()=>{if(i.viewport&&u.current){const g=i.viewport.scrollLeft,b=_t(g,m,i.dir);u.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollLeft=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollLeft=v(g,i.dir))}})):n==="vertical"?r.createElement(Ar,w({},p,{ref:s,onThumbPositionChange:()=>{if(i.viewport&&u.current){const g=i.viewport.scrollTop,b=_t(g,m);u.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollTop=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollTop=v(g))}})):null}),Pr=r.forwardRef((o,s)=>{const{sizes:n,onSizesChange:l,...i}=o,u=k(I,o.__scopeScrollArea),[d,m]=r.useState(),c=r.useRef(null),f=Q(s,c,u.onScrollbarXChange);return r.useEffect(()=>{c.current&&m(getComputedStyle(c.current))},[c]),r.createElement(Pt,w({"data-orientation":"horizontal"},i,{ref:f,sizes:n,style:{bottom:0,left:u.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:u.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ye(n)+"px",...o.style},onThumbPointerDown:p=>o.onThumbPointerDown(p.x),onDragScroll:p=>o.onDragScroll(p.x),onWheelScroll:(p,v)=>{if(u.viewport){const g=u.viewport.scrollLeft+p.deltaX;o.onWheelScroll(g),Mt(g,v)&&p.preventDefault()}},onResize:()=>{c.current&&u.viewport&&d&&l({content:u.viewport.scrollWidth,viewport:u.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Xe(d.paddingLeft),paddingEnd:Xe(d.paddingRight)}})}}))}),Ar=r.forwardRef((o,s)=>{const{sizes:n,onSizesChange:l,...i}=o,u=k(I,o.__scopeScrollArea),[d,m]=r.useState(),c=r.useRef(null),f=Q(s,c,u.onScrollbarYChange);return r.useEffect(()=>{c.current&&m(getComputedStyle(c.current))},[c]),r.createElement(Pt,w({"data-orientation":"vertical"},i,{ref:f,sizes:n,style:{top:0,right:u.dir==="ltr"?0:void 0,left:u.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ye(n)+"px",...o.style},onThumbPointerDown:p=>o.onThumbPointerDown(p.y),onDragScroll:p=>o.onDragScroll(p.y),onWheelScroll:(p,v)=>{if(u.viewport){const g=u.viewport.scrollTop+p.deltaY;o.onWheelScroll(g),Mt(g,v)&&p.preventDefault()}},onResize:()=>{c.current&&u.viewport&&d&&l({content:u.viewport.scrollHeight,viewport:u.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Xe(d.paddingTop),paddingEnd:Xe(d.paddingBottom)}})}}))}),[Tr,Et]=Nt(I),Pt=r.forwardRef((o,s)=>{const{__scopeScrollArea:n,sizes:l,hasThumb:i,onThumbChange:u,onThumbPointerUp:d,onThumbPointerDown:m,onThumbPositionChange:c,onDragScroll:f,onWheelScroll:p,onResize:v,...g}=o,b=k(I,n),[y,N]=r.useState(null),L=Q(s,S=>N(S)),R=r.useRef(null),V=r.useRef(""),A=b.viewport,D=l.content-l.viewport,$=q(p),T=q(c),E=qe(v,10);function M(S){if(R.current){const C=S.clientX-R.current.left,P=S.clientY-R.current.top;f({x:C,y:P})}}return r.useEffect(()=>{const S=C=>{const P=C.target;y?.contains(P)&&$(C,D)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[A,y,D,$]),r.useEffect(T,[l,T]),Te(y,E),Te(b.content,E),r.createElement(Tr,{scope:n,scrollbar:y,hasThumb:i,onThumbChange:q(u),onThumbPointerUp:q(d),onThumbPositionChange:T,onThumbPointerDown:q(m)},r.createElement(ke.div,w({},g,{ref:L,style:{position:"absolute",...g.style},onPointerDown:G(o.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),R.current=y.getBoundingClientRect(),V.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),M(S))}),onPointerMove:G(o.onPointerMove,M),onPointerUp:G(o.onPointerUp,S=>{const C=S.target;C.hasPointerCapture(S.pointerId)&&C.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=V.current,b.viewport&&(b.viewport.style.scrollBehavior=""),R.current=null})})))}),rt="ScrollAreaThumb",Rr=r.forwardRef((o,s)=>{const{forceMount:n,...l}=o,i=Et(rt,o.__scopeScrollArea);return r.createElement(Le,{present:n||i.hasThumb},r.createElement(Mr,w({ref:s},l)))}),Mr=r.forwardRef((o,s)=>{const{__scopeScrollArea:n,style:l,...i}=o,u=k(rt,n),d=Et(rt,n),{onThumbPositionChange:m}=d,c=Q(s,v=>d.onThumbChange(v)),f=r.useRef(),p=qe(()=>{f.current&&(f.current(),f.current=void 0)},100);return r.useEffect(()=>{const v=u.viewport;if(v){const g=()=>{if(p(),!f.current){const b=Or(v,m);f.current=b,m()}};return m(),v.addEventListener("scroll",g),()=>v.removeEventListener("scroll",g)}},[u.viewport,p,m]),r.createElement(ke.div,w({"data-state":d.hasThumb?"visible":"hidden"},i,{ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:G(o.onPointerDownCapture,v=>{const b=v.target.getBoundingClientRect(),y=v.clientX-b.left,N=v.clientY-b.top;d.onThumbPointerDown({x:y,y:N})}),onPointerUp:G(o.onPointerUp,d.onThumbPointerUp)}))}),At="ScrollAreaCorner",zr=r.forwardRef((o,s)=>{const n=k(At,o.__scopeScrollArea),l=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&l?r.createElement(kr,w({},o,{ref:s})):null}),kr=r.forwardRef((o,s)=>{const{__scopeScrollArea:n,...l}=o,i=k(At,n),[u,d]=r.useState(0),[m,c]=r.useState(0),f=!!(u&&m);return Te(i.scrollbarX,()=>{var p;const v=((p=i.scrollbarX)===null||p===void 0?void 0:p.offsetHeight)||0;i.onCornerHeightChange(v),c(v)}),Te(i.scrollbarY,()=>{var p;const v=((p=i.scrollbarY)===null||p===void 0?void 0:p.offsetWidth)||0;i.onCornerWidthChange(v),d(v)}),f?r.createElement(ke.div,w({},l,{ref:s,style:{width:u,height:m,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...o.style}})):null});function Xe(o){return o?parseInt(o,10):0}function Tt(o,s){const n=o/s;return isNaN(n)?0:n}function Ye(o){const s=Tt(o.viewport,o.content),n=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,l=(o.scrollbar.size-n)*s;return Math.max(l,18)}function Lr(o,s,n,l="ltr"){const i=Ye(n),u=i/2,d=s||u,m=i-d,c=n.scrollbar.paddingStart+d,f=n.scrollbar.size-n.scrollbar.paddingEnd-m,p=n.content-n.viewport,v=l==="ltr"?[0,p]:[p*-1,0];return Rt([c,f],v)(o)}function _t(o,s,n="ltr"){const l=Ye(s),i=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,u=s.scrollbar.size-i,d=s.content-s.viewport,m=u-l,c=n==="ltr"?[0,d]:[d*-1,0],f=jr(o,c);return Rt([0,d],[0,m])(f)}function Rt(o,s){return n=>{if(o[0]===o[1]||s[0]===s[1])return s[0];const l=(s[1]-s[0])/(o[1]-o[0]);return s[0]+l*(n-o[0])}}function Mt(o,s){return o>0&&o<s}const Or=(o,s=()=>{})=>{let n={left:o.scrollLeft,top:o.scrollTop},l=0;return(function i(){const u={left:o.scrollLeft,top:o.scrollTop},d=n.left!==u.left,m=n.top!==u.top;(d||m)&&s(),n=u,l=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(l)};function qe(o,s){const n=q(o),l=r.useRef(0);return r.useEffect(()=>()=>window.clearTimeout(l.current),[]),r.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(n,s)},[n,s])}function Te(o,s){const n=q(s);tt(()=>{let l=0;if(o){const i=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(n)});return i.observe(o),()=>{window.cancelAnimationFrame(l),i.unobserve(o)}}},[o,n])}const zt=wr,Ir=Cr,Vr=zr,kt=r.forwardRef(({className:o,children:s,...n},l)=>e.jsxs(zt,{ref:l,className:jt("relative overflow-hidden",o),...n,children:[e.jsx(Ir,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Lt,{}),e.jsx(Vr,{})]}));kt.displayName=zt.displayName;const Lt=r.forwardRef(({className:o,orientation:s="vertical",...n},l)=>e.jsx(Ct,{ref:l,orientation:s,className:jt("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",o),...n,children:e.jsx(Rr,{className:"relative flex-1 rounded-full bg-border"})}));Lt.displayName=Ct.displayName;const eo=r.forwardRef(function({initialData:s=null,onSuccess:n,mode:l="full",initialName:i=""},u){const{toast:d}=qt(),{user:m}=Gt(),[c,f]=r.useState(1),p=5,[v,g]=r.useState(""),[b,y]=r.useState(""),[N,L]=r.useState("100g"),[R,V]=r.useState("100g"),[A,D]=r.useState(100),[$,T]=r.useState(""),[E,M]=r.useState(""),[S,C]=r.useState(""),[P,z]=r.useState(""),[Z,O]=r.useState(!0),[K,B]=r.useState(""),[J,H]=r.useState(""),[ee,U]=r.useState(""),[te,Oe]=r.useState(""),[re,Ie]=r.useState(""),[oe,Ve]=r.useState(""),[se,De]=r.useState(""),[ae,W]=r.useState(""),[ne,ie]=r.useState(""),[le,ce]=r.useState(""),[de,ue]=r.useState(""),[me,fe]=r.useState(""),[pe,he]=r.useState(""),[ge,ve]=r.useState(""),[xe,be]=r.useState(""),[Se,_e]=r.useState(""),[je,Fe]=r.useState(""),[ye,we]=r.useState(""),[Ne,Ce]=r.useState(""),[$e,Ee]=r.useState(""),[X,Ge]=r.useState([]),[Re,st]=r.useState(!1),[Be,Qe]=r.useState(""),[Ze,Pe]=r.useState(!1),[at,nt]=r.useState([]),[Ot,Ke]=r.useState(!1);r.useEffect(()=>{s?(g(s.name||""),y(s.description?.replace("Marca: ","")||""),T(s.protein?.toString()||""),M(s.carbs?.toString()||""),C(s.fat?.toString()||""),z(s.calories?.toString()||""),B(s.fiber?.toString()||""),W(s.sodium?.toString()||""),H(s.sugar?.toString()||""),U(s.saturated_fat?.toString()||""),Oe(s.trans_fat?.toString()||""),Ie(s.monounsaturated_fat?.toString()||""),Ve(s.polyunsaturated_fat?.toString()||""),De(s.cholesterol?.toString()||""),ie(s.calcium?.toString()||""),ce(s.iron?.toString()||""),ue(s.magnesium?.toString()||""),fe(s.phosphorus?.toString()||""),he(s.potassium?.toString()||""),ve(s.zinc?.toString()||""),be(s.vitamin_a?.toString()||""),_e(s.vitamin_c?.toString()||""),Fe(s.vitamin_d?.toString()||""),we(s.vitamin_e?.toString()||""),Ce(s.vitamin_b12?.toString()||""),Ee(s.folate?.toString()||""),O(!1),L("100g"),s.food_measures&&Array.isArray(s.food_measures)&&Ge(s.food_measures.map(a=>({label:a.measure_label,grams:a.quantity_grams})))):i&&g(i)},[s,i]);const Ae=r.useMemo(()=>{if(N==="portion"&&A>0){const a=100/A;return{protein:$?((parseFloat($)||0)*a).toFixed(2):"",carbs:E?((parseFloat(E)||0)*a).toFixed(2):"",fat:S?((parseFloat(S)||0)*a).toFixed(2):"",calories:P?((parseFloat(P)||0)*a).toFixed(2):""}}return null},[N,A,$,E,S,P]);r.useEffect(()=>{if(N!==R&&A>0){const a=parseFloat(A)||100;if(R==="100g"&&N==="portion"){const t=a/100;$&&T(((parseFloat($)||0)*t).toFixed(2)),E&&M(((parseFloat(E)||0)*t).toFixed(2)),S&&C(((parseFloat(S)||0)*t).toFixed(2)),P&&z(((parseFloat(P)||0)*t).toFixed(2)),K&&B(((parseFloat(K)||0)*t).toFixed(2)),ae&&W(((parseFloat(ae)||0)*t).toFixed(0)),J&&H(((parseFloat(J)||0)*t).toFixed(2)),ee&&U(((parseFloat(ee)||0)*t).toFixed(2)),te&&Oe(((parseFloat(te)||0)*t).toFixed(2)),re&&Ie(((parseFloat(re)||0)*t).toFixed(2)),oe&&Ve(((parseFloat(oe)||0)*t).toFixed(2)),se&&De(((parseFloat(se)||0)*t).toFixed(0)),ne&&ie(((parseFloat(ne)||0)*t).toFixed(0)),le&&ce(((parseFloat(le)||0)*t).toFixed(0)),de&&ue(((parseFloat(de)||0)*t).toFixed(0)),me&&fe(((parseFloat(me)||0)*t).toFixed(0)),pe&&he(((parseFloat(pe)||0)*t).toFixed(0)),ge&&ve(((parseFloat(ge)||0)*t).toFixed(0)),xe&&be(((parseFloat(xe)||0)*t).toFixed(0)),Se&&_e(((parseFloat(Se)||0)*t).toFixed(0)),je&&Fe(((parseFloat(je)||0)*t).toFixed(0)),ye&&we(((parseFloat(ye)||0)*t).toFixed(0)),Ne&&Ce(((parseFloat(Ne)||0)*t).toFixed(0)),$e&&Ee(((parseFloat($e)||0)*t).toFixed(0))}else if(R==="portion"&&N==="100g"){const t=100/a;$&&T(((parseFloat($)||0)*t).toFixed(2)),E&&M(((parseFloat(E)||0)*t).toFixed(2)),S&&C(((parseFloat(S)||0)*t).toFixed(2)),P&&z(((parseFloat(P)||0)*t).toFixed(2)),K&&B(((parseFloat(K)||0)*t).toFixed(2)),ae&&W(((parseFloat(ae)||0)*t).toFixed(0)),J&&H(((parseFloat(J)||0)*t).toFixed(2)),ee&&U(((parseFloat(ee)||0)*t).toFixed(2)),te&&Oe(((parseFloat(te)||0)*t).toFixed(2)),re&&Ie(((parseFloat(re)||0)*t).toFixed(2)),oe&&Ve(((parseFloat(oe)||0)*t).toFixed(2)),se&&De(((parseFloat(se)||0)*t).toFixed(0)),ne&&ie(((parseFloat(ne)||0)*t).toFixed(0)),le&&ce(((parseFloat(le)||0)*t).toFixed(0)),de&&ue(((parseFloat(de)||0)*t).toFixed(0)),me&&fe(((parseFloat(me)||0)*t).toFixed(0)),pe&&he(((parseFloat(pe)||0)*t).toFixed(0)),ge&&ve(((parseFloat(ge)||0)*t).toFixed(0)),xe&&be(((parseFloat(xe)||0)*t).toFixed(0)),Se&&_e(((parseFloat(Se)||0)*t).toFixed(0)),je&&Fe(((parseFloat(je)||0)*t).toFixed(0)),ye&&we(((parseFloat(ye)||0)*t).toFixed(0)),Ne&&Ce(((parseFloat(Ne)||0)*t).toFixed(0)),$e&&Ee(((parseFloat($e)||0)*t).toFixed(0))}V(N)}},[N,R,A]),r.useEffect(()=>{if(Z&&$&&E&&S){let a=parseFloat($)||0,t=parseFloat(E)||0,F=parseFloat(S)||0;const x=a*4+t*4+F*9;z(Math.round(x*100)/100)}},[$,E,S,Z,N,A]);const It=a=>{if(!a)return null;if(N==="portion"&&A>0){const t=100/A;return parseFloat(a)*t}return parseFloat(a)},it=a=>{switch(a){case 1:return v.trim().length>0;case 2:return v.trim().length>0&&$&&E&&S&&P;case 3:case 4:case 5:return!0;default:return!1}},lt=()=>{c<p&&(it(c)?f(c+1):d({title:"Campos obrigat√≥rios",description:"Preencha todos os campos obrigat√≥rios antes de continuar.",variant:"destructive"}))},Vt=()=>{c>1&&f(c-1)},Dt=[{label:"Colher de Sopa",grams:15},{label:"Colher de Ch√°",grams:5},{label:"X√≠cara",grams:200},{label:"Unidade",grams:1},{label:"Fatia",grams:30},{label:"Colher de Servir",grams:20}],Bt=a=>{if(X.some(F=>F.label===a.label)){d({title:"Medida j√° adicionada",description:`${a.label} j√° est√° na lista.`,variant:"default"});return}Ge([...X,a])},Ht=a=>{Ge(X.filter((t,F)=>F!==a))},ct=a=>{const t=a.nutriments||{};a.product_name&&g(a.product_name),a.brands&&y(a.brands.split(",")[0].trim());const F=t.serving_size!==void 0||t.proteins_serving!==void 0||t.energy_kcal_serving!==void 0;let x=100;if(t.serving_size!==void 0?x=t.serving_size:a.serving_size!==void 0?x=a.serving_size:a.serving_quantity!==void 0&&a.serving_quantity_unit==="g"&&(x=a.serving_quantity),F&&x!==100){if(t.proteins_serving!==void 0)T(t.proteins_serving.toString());else if(t.proteins_100g!==void 0){const h=x/100;T((t.proteins_100g*h).toFixed(2))}if(t.carbohydrates_serving!==void 0)M(t.carbohydrates_serving.toString());else if(t.carbohydrates_100g!==void 0){const h=x/100;M((t.carbohydrates_100g*h).toFixed(2))}if(t.fat_serving!==void 0)C(t.fat_serving.toString());else if(t.fat_100g!==void 0){const h=x/100;C((t.fat_100g*h).toFixed(2))}if(t.fiber_serving!==void 0)B(t.fiber_serving.toString());else if(t.fiber_100g!==void 0){const h=x/100;B((t.fiber_100g*h).toFixed(2))}if(t.sodium_serving!==void 0)W((t.sodium_serving*1e3).toString());else if(t.sodium_100g!==void 0){const h=x/100;W((t.sodium_100g*h*1e3).toFixed(0))}if(t.sugars_serving!==void 0)H(t.sugars_serving.toString());else if(t.sugars_100g!==void 0){const h=x/100;H((t.sugars_100g*h).toFixed(2))}if(t.saturated_fat_serving!==void 0)U(t.saturated_fat_serving.toString());else if(t.saturated_fat_100g!==void 0){const h=x/100;U((t.saturated_fat_100g*h).toFixed(2))}if(t.calcium_100g!==void 0){const h=x/100;ie((t.calcium_100g*h*1e3).toFixed(0))}if(t.iron_100g!==void 0){const h=x/100;ce((t.iron_100g*h*1e3).toFixed(0))}if(t.vitamin_c_100g!==void 0){const h=x/100;_e((t.vitamin_c_100g*h*1e3).toFixed(0))}if(t.vitamin_a_100g!==void 0){const h=x/100;be((t.vitamin_a_100g*h*1e3).toFixed(0))}if(t.vitamin_d_100g!==void 0){const h=x/100;Fe((t.vitamin_d_100g*h*1e3).toFixed(0))}if(t.vitamin_e_100g!==void 0){const h=x/100;we((t.vitamin_e_100g*h*1e3).toFixed(0))}if(t.vitamin_b12_100g!==void 0){const h=x/100;Ce((t.vitamin_b12_100g*h*1e3).toFixed(0))}if(t.folate_100g!==void 0){const h=x/100;Ee((t.folate_100g*h*1e3).toFixed(0))}if(t.magnesium_100g!==void 0){const h=x/100;ue((t.magnesium_100g*h*1e3).toFixed(0))}if(t.phosphorus_100g!==void 0){const h=x/100;fe((t.phosphorus_100g*h*1e3).toFixed(0))}if(t.potassium_100g!==void 0){const h=x/100;he((t.potassium_100g*h*1e3).toFixed(0))}if(t.zinc_100g!==void 0){const h=x/100;ve((t.zinc_100g*h*1e3).toFixed(0))}if(t.energy_kcal_serving!==void 0)z(t.energy_kcal_serving.toString()),O(!1);else if(t.energy_serving!==void 0){const h=t.energy_serving/4.184;z(h.toFixed(2)),O(!1)}else if(t.energy_kcal_100g!==void 0){const h=x/100;z((t.energy_kcal_100g*h).toFixed(2)),O(!1)}else if(t.energy_100g!==void 0){const h=x/100,He=t.energy_100g*h/4.184;z(He.toFixed(2)),O(!1)}L("portion"),V("portion"),D(x)}else{if(t.proteins_100g!==void 0&&T(t.proteins_100g.toString()),t.carbohydrates_100g!==void 0&&M(t.carbohydrates_100g.toString()),t.fat_100g!==void 0&&C(t.fat_100g.toString()),t.fiber_100g!==void 0&&B(t.fiber_100g.toString()),t.sodium_100g!==void 0&&W((t.sodium_100g*1e3).toString()),t.sugars_100g!==void 0&&H(t.sugars_100g.toString()),t.saturated_fat_100g!==void 0&&U(t.saturated_fat_100g.toString()),t.calcium_100g!==void 0&&ie((t.calcium_100g*1e3).toString()),t.iron_100g!==void 0&&ce((t.iron_100g*1e3).toString()),t.vitamin_c_100g!==void 0&&_e((t.vitamin_c_100g*1e3).toString()),t.vitamin_a_100g!==void 0&&be((t.vitamin_a_100g*1e3).toString()),t.vitamin_d_100g!==void 0&&Fe((t.vitamin_d_100g*1e3).toString()),t.vitamin_e_100g!==void 0&&we((t.vitamin_e_100g*1e3).toString()),t.vitamin_b12_100g!==void 0&&Ce((t.vitamin_b12_100g*1e3).toString()),t.folate_100g!==void 0&&Ee((t.folate_100g*1e3).toString()),t.magnesium_100g!==void 0&&ue((t.magnesium_100g*1e3).toString()),t.phosphorus_100g!==void 0&&fe((t.phosphorus_100g*1e3).toString()),t.potassium_100g!==void 0&&he((t.potassium_100g*1e3).toString()),t.zinc_100g!==void 0&&ve((t.zinc_100g*1e3).toString()),t.energy_kcal_100g!==void 0)z(t.energy_kcal_100g.toString()),O(!1);else if(t.energy_100g!==void 0){const h=t.energy_100g/4.184;z(h.toFixed(2)),O(!1)}L("100g"),V("100g"),D(100)}},Ut=a=>{const t=a.trim().replace(/\s/g,"");return/^\d{8,13}$/.test(t)},dt=async()=>{if(!Be.trim()){d({title:"Erro",description:"Digite um c√≥digo de barras ou nome do produto.",variant:"destructive"});return}const a=Be.trim();if(Ut(a)){Pe(!0);try{const F=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${a}.json`)).json();if(F.status===0||!F.product){d({title:"Produto n√£o encontrado",description:"N√£o foi poss√≠vel encontrar este produto no OpenFoodFacts.",variant:"default"});return}ct(F.product),Qe(""),d({title:"Produto encontrado!",description:"Campos preenchidos automaticamente."})}catch(t){console.error("Erro ao buscar produto:",t),d({title:"Erro",description:"N√£o foi poss√≠vel buscar o produto. Verifique sua conex√£o.",variant:"destructive"})}finally{Pe(!1)}}else{if(a.length<3){d({title:"Erro",description:"Digite pelo menos 3 caracteres para buscar por nome.",variant:"destructive"});return}Pe(!0);try{const F=await(await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(a)}&json=1&page_size=20&fields=product_name,brands,code,image_url,nutriments`)).json();if(!F.products||F.products.length===0){d({title:"Nenhum produto encontrado",description:"N√£o foi poss√≠vel encontrar produtos com este nome no OpenFoodFacts.",variant:"default"});return}const x=F.products.filter(h=>h.product_name&&h.product_name.trim().length>0);if(x.length===0){d({title:"Nenhum produto v√°lido encontrado",description:"Os produtos encontrados n√£o possuem informa√ß√µes suficientes.",variant:"default"});return}nt(x),Ke(!0)}catch(t){console.error("Erro ao buscar produtos:",t),d({title:"Erro",description:"N√£o foi poss√≠vel buscar produtos. Verifique sua conex√£o.",variant:"destructive"})}finally{Pe(!1)}}},ut=async a=>{Pe(!0);try{const F=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${a}.json`)).json();if(F.status===0||!F.product){d({title:"Erro",description:"N√£o foi poss√≠vel carregar os dados do produto selecionado.",variant:"destructive"});return}ct(F.product),Qe(""),Ke(!1),nt([]),d({title:"Produto selecionado!",description:"Campos preenchidos automaticamente."})}catch(t){console.error("Erro ao carregar produto:",t),d({title:"Erro",description:"N√£o foi poss√≠vel carregar o produto. Verifique sua conex√£o.",variant:"destructive"})}finally{Pe(!1)}},mt=async()=>{if(!it(2)){d({title:"Erro",description:"Preencha todos os campos obrigat√≥rios (Nome, Prote√≠na, Carboidratos, Gorduras, Calorias).",variant:"destructive"});return}if(N==="portion"&&(!A||parseFloat(A)<=0)){d({title:"Erro",description:"Informe o tamanho da por√ß√£o do r√≥tulo.",variant:"destructive"});return}st(!0);try{const a=x=>x?It(x):null,t={name:v.trim(),description:b.trim()?`Marca: ${b.trim()}`:null,calories:Math.round(a(P)*100)/100,protein:Math.round(a($)*100)/100,carbs:Math.round(a(E)*100)/100,fat:Math.round(a(S)*100)/100,fiber:a(K),sodium:a(ae),sugar:a(J),saturated_fat:a(ee),trans_fat:a(te),monounsaturated_fat:a(re),polyunsaturated_fat:a(oe),cholesterol:a(se),calcium:a(ne),iron:a(le),magnesium:a(de),phosphorus:a(me),potassium:a(pe),zinc:a(ge),vitamin_a:a(xe),vitamin_c:a(Se),vitamin_d:a(je),vitamin_e:a(ye),vitamin_b12:a(Ne),folate:a($e),portion_size:100,source:"custom",nutritionist_id:m?.id||null,group:"Personalizado",is_active:!0};let F;if(s){const{data:x,error:h}=await Je.from("foods").update(t).eq("id",s.id).select("id, name, group, description, source, calories, protein, carbs, fat, fiber, sodium, portion_size").single();if(h)throw h;F=x}else{const{data:x,error:h}=await ir(t);if(h)throw h;if(!x)throw new Error("Alimento criado mas n√£o retornado");F=x}if(X.length>0){s&&await Je.from("food_measures").delete().eq("food_id",F.id);const x=X.map(He=>({food_id:F.id,measure_label:He.label,quantity_grams:He.grams})),{error:h}=await Je.from("food_measures").insert(x);h&&console.warn("Erro ao criar medidas caseiras:",h)}d({title:s?"Alimento atualizado!":"Alimento criado!",description:`${v} foi ${s?"atualizado":"adicionado"} ao banco de dados.`}),n&&n(F)}catch(a){console.error("Erro ao salvar alimento:",a),d({title:"Erro",description:a.message||"N√£o foi poss√≠vel salvar o alimento.",variant:"destructive"})}finally{st(!1)}};r.useImperativeHandle(u,()=>({submit:mt}));const Wt=l==="compact",ft=c/p*100,Xt=["B√°sico","Macronutrientes","Gorduras Detalhadas","Micronutrientes","Medidas Caseiras"];return e.jsxs("div",{className:Wt?"space-y-3":"space-y-6",children:[l!=="compact"&&e.jsx(Me,{children:e.jsx(ze,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-medium",children:["Passo ",c," de ",p,": ",Xt[c-1]]}),e.jsxs("span",{className:"text-muted-foreground",children:[Math.round(ft),"%"]})]}),e.jsx(sr,{value:ft,className:"h-2"})]})})}),e.jsxs(Me,{children:[e.jsxs(pt,{children:[e.jsxs(ht,{className:"text-base",children:[c===1&&"1/5 - Informa√ß√µes B√°sicas",c===2&&"2/5 - Macronutrientes",c===3&&"3/5 - Gorduras Detalhadas e Outros (Opcional)",c===4&&"4/5 - Micronutrientes (Opcional)",c===5&&"5/5 - Medidas Caseiras (Opcional)"]}),e.jsxs(gt,{children:[c===1&&"Dados essenciais do alimento",c===2&&"Valores nutricionais principais (obrigat√≥rios)",c===3&&"Informa√ß√µes adicionais sobre gorduras e outros componentes",c===4&&"Vitaminas e minerais do alimento",c===5&&"Medidas caseiras para facilitar o uso"]})]}),e.jsxs(ze,{className:"space-y-4",children:[c===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"name",children:["Nome do Alimento ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(j,{id:"name",value:v,onChange:a=>g(a.target.value),placeholder:"Ex: Bolo de Chocolate",autoFocus:!s})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"brand",children:"Marca (opcional)"}),e.jsx(j,{id:"brand",value:b,onChange:a=>y(a.target.value),placeholder:"Ex: Marca X"})]})]}),c===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ar,{value:N,onValueChange:L,className:"w-full",children:[e.jsxs(nr,{className:"grid w-full grid-cols-2",children:[e.jsx(xt,{value:"100g",children:"Dados por 100g"}),e.jsx(xt,{value:"portion",children:"Dados do R√≥tulo (Por√ß√£o)"})]}),e.jsx(bt,{value:"100g",className:"space-y-4 mt-4",children:e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Informe os valores nutricionais por 100g do alimento"]})})}),e.jsxs(bt,{value:"portion",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"labelPortionSize",children:["Tamanho da Por√ß√£o do R√≥tulo (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(j,{id:"labelPortionSize",type:"number",value:A,onChange:a=>D(a.target.value),placeholder:"Ex: 30"})]}),Ae&&e.jsxs("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-emerald-900 dark:text-emerald-100 mb-2",children:"Equivalente por 100g:"}),e.jsxs("div",{className:"text-xs text-emerald-800 dark:text-emerald-200 space-y-1",children:[e.jsxs("p",{children:["Prote√≠na: ",Ae.protein,"g"]}),e.jsxs("p",{children:["Carboidratos: ",Ae.carbs,"g"]}),e.jsxs("p",{children:["Gorduras: ",Ae.fat,"g"]}),Ae.calories&&e.jsxs("p",{children:["Calorias: ",Ae.calories," kcal"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"protein",children:["Prote√≠na (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(j,{id:"protein",type:"number",step:"0.1",value:$,onChange:a=>T(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"carbs",children:["Carboidratos (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(j,{id:"carbs",type:"number",step:"0.1",value:E,onChange:a=>M(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"fat",children:["Gorduras (g) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(j,{id:"fat",type:"number",step:"0.1",value:S,onChange:a=>C(a.target.value),placeholder:"0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(_,{htmlFor:"calories",children:["Calorias (kcal) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"autoCalc",checked:Z,onChange:a=>O(a.target.checked),className:"w-4 h-4"}),e.jsx(_,{htmlFor:"autoCalc",className:"text-sm font-normal cursor-pointer",children:"Calcular automaticamente"})]})]}),e.jsx(j,{id:"calories",type:"number",step:"0.1",value:P,onChange:a=>{z(a.target.value),O(!1)},placeholder:"0",disabled:Z,className:Z?"bg-muted":""}),Z&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"C√°lculo: (Prote√≠na √ó 4) + (Carboidratos √ó 4) + (Gorduras √ó 9)"})]})]}),c===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Esta etapa √© opcional. Voc√™ pode pular se n√£o tiver essas informa√ß√µes."]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"fiber",children:"Fibra (g)"}),e.jsx(j,{id:"fiber",type:"number",step:"0.1",value:K,onChange:a=>B(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"sugar",children:"A√ß√∫cares (g)"}),e.jsx(j,{id:"sugar",type:"number",step:"0.1",value:J,onChange:a=>H(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"saturatedFat",children:"Gordura Saturada (g)"}),e.jsx(j,{id:"saturatedFat",type:"number",step:"0.1",value:ee,onChange:a=>U(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"transFat",children:"Gordura Trans (g)"}),e.jsx(j,{id:"transFat",type:"number",step:"0.1",value:te,onChange:a=>Oe(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"monounsaturatedFat",children:"Gordura Monoinsaturada (g)"}),e.jsx(j,{id:"monounsaturatedFat",type:"number",step:"0.1",value:re,onChange:a=>Ie(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"polyunsaturatedFat",children:"Gordura Poliinsaturada (g)"}),e.jsx(j,{id:"polyunsaturatedFat",type:"number",step:"0.1",value:oe,onChange:a=>Ve(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"cholesterol",children:"Colesterol (mg)"}),e.jsx(j,{id:"cholesterol",type:"number",step:"0.1",value:se,onChange:a=>De(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"sodium",children:"S√≥dio (mg)"}),e.jsx(j,{id:"sodium",type:"number",step:"0.1",value:ae,onChange:a=>W(a.target.value),placeholder:"0"})]})]})]}),c===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Esta etapa √© opcional. Voc√™ pode pular se n√£o tiver essas informa√ß√µes."]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:"Minerais (mg)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"calcium",children:"C√°lcio (mg)"}),e.jsx(j,{id:"calcium",type:"number",step:"0.1",value:ne,onChange:a=>ie(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"iron",children:"Ferro (mg)"}),e.jsx(j,{id:"iron",type:"number",step:"0.1",value:le,onChange:a=>ce(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"magnesium",children:"Magn√©sio (mg)"}),e.jsx(j,{id:"magnesium",type:"number",step:"0.1",value:de,onChange:a=>ue(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"phosphorus",children:"F√≥sforo (mg)"}),e.jsx(j,{id:"phosphorus",type:"number",step:"0.1",value:me,onChange:a=>fe(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"potassium",children:"Pot√°ssio (mg)"}),e.jsx(j,{id:"potassium",type:"number",step:"0.1",value:pe,onChange:a=>he(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"zinc",children:"Zinco (mg)"}),e.jsx(j,{id:"zinc",type:"number",step:"0.1",value:ge,onChange:a=>ve(a.target.value),placeholder:"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground",children:"Vitaminas (mg)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"vitaminA",children:"Vitamina A (mg)"}),e.jsx(j,{id:"vitaminA",type:"number",step:"0.1",value:xe,onChange:a=>be(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"vitaminC",children:"Vitamina C (mg)"}),e.jsx(j,{id:"vitaminC",type:"number",step:"0.1",value:Se,onChange:a=>_e(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"vitaminD",children:"Vitamina D (mg)"}),e.jsx(j,{id:"vitaminD",type:"number",step:"0.1",value:je,onChange:a=>Fe(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"vitaminE",children:"Vitamina E (mg)"}),e.jsx(j,{id:"vitaminE",type:"number",step:"0.1",value:ye,onChange:a=>we(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"vitaminB12",children:"Vitamina B12 (mg)"}),e.jsx(j,{id:"vitaminB12",type:"number",step:"0.1",value:Ne,onChange:a=>Ce(a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"folate",children:"Folato (mg)"}),e.jsx(j,{id:"folate",type:"number",step:"0.1",value:$e,onChange:a=>Ee(a.target.value),placeholder:"0"})]})]})]})]}),c===5&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Esta etapa √© opcional. Voc√™ pode pular se n√£o quiser adicionar medidas caseiras."]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Dt.map((a,t)=>e.jsxs(or,{variant:"outline",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors px-3 py-1",onClick:()=>Bt(a),children:[e.jsx(lr,{className:"h-3 w-3 mr-1"}),a.label," (",a.grams,"g)"]},t))}),X.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-sm",children:"Medidas Adicionadas:"}),e.jsx("div",{className:"space-y-2",children:X.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg bg-muted/30",children:[e.jsxs("span",{className:"text-sm",children:[a.label," - ",a.grams,"g"]}),e.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>Ht(t),className:"h-6 w-6 p-0",children:e.jsx(Qt,{className:"h-3 w-3"})})]},t))})]})]})]})]}),l!=="compact"&&c===1&&e.jsxs(Me,{className:"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",children:[e.jsxs(pt,{className:"pb-3",children:[e.jsxs(ht,{className:"text-base flex items-center gap-2 text-green-900 dark:text-green-100",children:[e.jsx(St,{className:"h-4 w-4"}),"Buscar no Banco de Alimentos P√∫blicos"]}),e.jsxs(gt,{className:"text-green-800 dark:text-green-200",children:[e.jsx("p",{className:"mb-1",children:"Busque por c√≥digo de barras (EAN) ou nome do produto"}),e.jsx("p",{className:"text-xs mt-1 opacity-75",children:"Utilizamos a plataforma OpenFoodFacts. Os dados podem ter imprecis√µes e devem ser verificados."})]})]}),e.jsxs(ze,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(j,{id:"searchQuery",placeholder:"Digite o c√≥digo de barras (ex: 7891000100103) ou nome do produto (ex: Whey Protein)",value:Be,onChange:a=>Qe(a.target.value),onKeyDown:a=>{a.key==="Enter"&&!Ze&&dt()},className:"flex-1 w-full"}),e.jsx(Y,{onClick:dt,disabled:Ze||!Be.trim(),className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto flex-shrink-0",children:Ze?e.jsx(vt,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(St,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Buscar"}),e.jsx("span",{className:"sm:hidden",children:"Buscar"})]})})]}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-300 break-words",children:"üí° Dica: Digite apenas n√∫meros para buscar por c√≥digo de barras, ou texto para buscar por nome do produto"})]})]}),e.jsx(Zt,{open:Ot,onOpenChange:Ke,children:e.jsxs(Kt,{className:"max-w-2xl max-h-[90vh] w-[95vw] sm:w-full p-4 sm:p-6",children:[e.jsxs(Jt,{className:"pb-3",children:[e.jsx(er,{className:"text-base sm:text-lg",children:"Selecione o Produto"}),e.jsxs(tr,{className:"text-xs sm:text-sm",children:["Encontramos ",at.length," produto(s). Selecione o produto correto para preencher os dados automaticamente."]})]}),e.jsx(kt,{className:"max-h-[calc(90vh-140px)] sm:max-h-[60vh] pr-2 sm:pr-4",children:e.jsx("div",{className:"space-y-2",children:at.map(a=>e.jsx(Me,{className:"cursor-pointer hover:bg-muted transition-colors",onClick:()=>ut(a.code),children:e.jsx(ze,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-3 sm:gap-4",children:[a.image_url&&e.jsx("img",{src:a.image_url,alt:a.product_name,className:"w-12 h-12 sm:w-16 sm:h-16 object-cover rounded-lg flex-shrink-0",onError:t=>{t.target.style.display="none"}}),e.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[e.jsx("h4",{className:"font-semibold text-xs sm:text-sm truncate",children:a.product_name||"Produto sem nome"}),a.brands&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:["Marca: ",a.brands.split(",")[0].trim()]}),a.code&&e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:["C√≥digo: ",a.code]})]}),e.jsx(Y,{variant:"outline",size:"sm",onClick:t=>{t.stopPropagation(),ut(a.code)},className:"w-full sm:w-auto flex-shrink-0 mt-2 sm:mt-0",children:"Selecionar"})]})})},a.code))})})]})}),l!=="compact"&&e.jsx(Me,{children:e.jsx(ze,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"flex gap-2",children:c>1&&e.jsxs(Y,{variant:"outline",onClick:Vt,disabled:Re,size:"lg",children:[e.jsx(cr,{className:"h-4 w-4 mr-2"}),"Anterior"]})}),e.jsxs("div",{className:"flex gap-2",children:[(c===3||c===4||c===5)&&e.jsx(Y,{variant:"ghost",onClick:lt,disabled:Re,size:"lg",children:"Pular"}),c<p?e.jsxs(Y,{onClick:lt,disabled:Re,size:"lg",children:["Pr√≥ximo",e.jsx(rr,{className:"h-4 w-4 ml-2"})]}):e.jsx(Y,{onClick:mt,disabled:Re,size:"lg",children:Re?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),s?"Atualizando...":"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dr,{className:"h-4 w-4 mr-2"}),s?"Atualizar Alimento":"Criar Alimento"]})})]})]})})})]})});export{eo as S,kt as a};
