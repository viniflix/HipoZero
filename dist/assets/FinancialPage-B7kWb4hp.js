import{q as Te,an as qt,at as Bt,j as e,C as ge,c as ye,d as be,e as ve,R as _e,r as p,O as Z,w as De,H as Ee,B as X,X as ot,F as Ct,ap as mt,a as st,V as qe,W as Be,Y as Ve,Z as Ue,_ as ut,s as Oe,A as He,h as We,i as Ke,k as Ge,l as Xe,n as Je,o as Ye,p as Qe,v as Vt,as as rt,u as Ut,m as Ht,$ as Wt,I as Kt,T as Gt}from"./index-Cl9S2_vK.js";import{I as de}from"./input-J8T_OYAP.js";import{L as Q}from"./label-B6xwKmAy.js";import{S as we,a as Ne,b as Se,c as ke,d as oe}from"./select-DVIkm2mv.js";import{P as Xt}from"./progress-Hy44xw5P.js";import{A as wt}from"./alert-circle--FqPo4fT.js";import{T as Nt,a as St,b as Ze,c as ft}from"./tabs-C2iurRVm.js";import{R as nt,T as it,p as xt,B as gt,l as Jt}from"./generateCategoricalChart-Bh86yIqg.js";import{B as Yt}from"./BarChart-DjRsVgnV.js";import{X as vt,Y as jt}from"./YAxis-St3DMelp.js";import{P as Qt,a as Zt}from"./PieChart-mMuWqZ84.js";import{a as es,L as ts}from"./LineChart-BiebZA-a.js";import{p as ze}from"./parseISO-1naG7898.js";import{T as kt,a as Et,b as et,c as ue,d as $t,e as he}from"./table-D_f1KBqs.js";import{B as tt}from"./badge-DPJEOXlY.js";import{S as ss}from"./search-DBl0ILHl.js";import{P as Rt}from"./pen-square-BteyrFgO.js";import{_ as Pe}from"./extends-CF3RwP-h.js";import{a as as}from"./addMonths-D_HdIz3j.js";import{g as lt,s as rs,d as ns,a as is,u as os,b as Dt,r as ls,c as cs,e as ds,f as us,h as hs,i as ps,j as ms,k as fs,l as xs}from"./financial-queries-Cn-8WYGq.js";import{P as Pt}from"./plus-2SV3Jemc.js";import{C as gs}from"./check-circle-2-Cpln7o88.js";import{i as vs}from"./isToday-DzyVf0v2.js";import{i as js}from"./isYesterday-DX6Asl19.js";import{A as ys,a as bs,b as _s}from"./avatar-ClDp3OcW.js";import{a as Cs}from"./pdfUtils-EBXEsIXu.js";import{E as ws}from"./jspdf.plugin.autotable-DR81t-kr.js";import{D as Ns}from"./download-Ea_rXT4W.js";import{s as Ss}from"./startOfMonth-BPzLXFQb.js";import"./isSameDay-Csinm5Rf.js";import"./html2canvas.esm-B0tyYwQk.js";const ks=Te("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Es=Te("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),$s=Te("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]),yt=Te("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Rs=Te("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Ds=Te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var Le={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Ps=Le.exports,bt;function Ts(){return bt||(bt=1,(function(t,l){((o,r)=>{t.exports=r()})(Ps,function o(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},h,f=!r.document&&!!r.postMessage,x=r.IS_PAPA_WORKER||!1,c={},n=0,d={};function E(s){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(a){var u=i(a);u.chunkSize=parseInt(u.chunkSize),a.step||a.chunk||(u.chunkSize=null),this._handle=new B(u),(this._handle.streamer=this)._config=u}).call(this,s),this.parseChunk=function(a,u){var g=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<g){let P=this._config.newline;P||(v=this._config.quoteChar||'"',P=this._handle.guessLineEndings(a,v)),a=[...a.split(P).slice(g)].join(P)}this.isFirstChunk&&C(this._config.beforeFirstChunk)&&(v=this._config.beforeFirstChunk(a))!==void 0&&(a=v),this.isFirstChunk=!1,this._halted=!1;var g=this._partialLine+a,v=(this._partialLine="",this._handle.parse(g,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(a=v.meta.cursor,g=(this._finished||(this._partialLine=g.substring(a-this._baseIndex),this._baseIndex=a),v&&v.data&&(this._rowCount+=v.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),x)r.postMessage({results:v,workerId:d.WORKER_ID,finished:g});else if(C(this._config.chunk)&&!u){if(this._config.chunk(v,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=v=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(v.data),this._completeResults.errors=this._completeResults.errors.concat(v.errors),this._completeResults.meta=v.meta),this._completed||!g||!C(this._config.complete)||v&&v.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),g||v&&v.meta.paused||this._nextChunk(),v}this._halted=!0},this._sendError=function(a){C(this._config.error)?this._config.error(a):x&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:a,finished:!1})}}function $(s){var a;(s=s||{}).chunkSize||(s.chunkSize=d.RemoteChunkSize),E.call(this,s),this._nextChunk=f?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),f||(a.onload=m(this._chunkLoaded,this),a.onerror=m(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!f),this._config.downloadRequestHeaders){var u,g=this._config.downloadRequestHeaders;for(u in g)a.setRequestHeader(u,g[u])}var v;this._config.chunkSize&&(v=this._start+this._config.chunkSize-1,a.setRequestHeader("Range","bytes="+this._start+"-"+v));try{a.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}f&&a.status===0&&this._chunkError()}},this._chunkLoaded=function(){a.readyState===4&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize||a.responseText.length,this._finished=!this._config.chunkSize||this._start>=(u=>(u=u.getResponseHeader("Content-Range"))!==null?parseInt(u.substring(u.lastIndexOf("/")+1)):-1)(a),this.parseChunk(a.responseText)))},this._chunkError=function(u){u=a.statusText||u,this._sendError(new Error(u))}}function R(s){(s=s||{}).chunkSize||(s.chunkSize=d.LocalChunkSize),E.call(this,s);var a,u,g=typeof FileReader<"u";this.stream=function(v){this._input=v,u=v.slice||v.webkitSlice||v.mozSlice,g?((a=new FileReader).onload=m(this._chunkLoaded,this),a.onerror=m(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var v=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),v=u.call(v,this._start,P)),a.readAsText(v,this._config.encoding));g||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(v){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(v.target.result)},this._chunkError=function(){this._sendError(a.error)}}function j(s){var a;E.call(this,s=s||{}),this.stream=function(u){return a=u,this._nextChunk()},this._nextChunk=function(){var u,g;if(!this._finished)return u=this._config.chunkSize,a=u?(g=a.substring(0,u),a.substring(u)):(g=a,""),this._finished=!a,this.parseChunk(g)}}function T(s){E.call(this,s=s||{});var a=[],u=!0,g=!1;this.pause=function(){E.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){E.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(v){this._input=v,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){g&&a.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):u=!0},this._streamData=m(function(v){try{a.push(typeof v=="string"?v:v.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(P){this._streamError(P)}},this),this._streamError=m(function(v){this._streamCleanUp(),this._sendError(v)},this),this._streamEnd=m(function(){this._streamCleanUp(),g=!0,this._streamData("")},this),this._streamCleanUp=m(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function B(s){var a,u,g,v,P=Math.pow(2,53),L=-P,le=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ee=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,H=0,w=0,te=!1,S=!1,M=[],b={data:[],errors:[],meta:{}};function J(N){return s.skipEmptyLines==="greedy"?N.join("").trim()==="":N.length===1&&N[0].length===0}function K(){if(b&&g&&(I("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),g=!1),s.skipEmptyLines&&(b.data=b.data.filter(function(y){return!J(y)})),_()){let y=function(W,Y){C(s.transformHeader)&&(W=s.transformHeader(W,Y)),M.push(W)};if(b)if(Array.isArray(b.data[0])){for(var N=0;_()&&N<b.data.length;N++)b.data[N].forEach(y);b.data.splice(0,1)}else b.data.forEach(y)}function k(y,W){for(var Y=s.header?{}:[],O=0;O<y.length;O++){var q=O,A=y[O],A=((pe,D)=>(G=>(s.dynamicTypingFunction&&s.dynamicTyping[G]===void 0&&(s.dynamicTyping[G]=s.dynamicTypingFunction(G)),(s.dynamicTyping[G]||s.dynamicTyping)===!0))(pe)?D==="true"||D==="TRUE"||D!=="false"&&D!=="FALSE"&&((G=>{if(le.test(G)&&(G=parseFloat(G),L<G&&G<P))return 1})(D)?parseFloat(D):ee.test(D)?new Date(D):D===""?null:D):D)(q=s.header?O>=M.length?"__parsed_extra":M[O]:q,A=s.transform?s.transform(A,q):A);q==="__parsed_extra"?(Y[q]=Y[q]||[],Y[q].push(A)):Y[q]=A}return s.header&&(O>M.length?I("FieldMismatch","TooManyFields","Too many fields: expected "+M.length+" fields but parsed "+O,w+W):O<M.length&&I("FieldMismatch","TooFewFields","Too few fields: expected "+M.length+" fields but parsed "+O,w+W)),Y}var z;b&&(s.header||s.dynamicTyping||s.transform)&&(z=1,!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(k),z=b.data.length):b.data=k(b.data,0),s.header&&b.meta&&(b.meta.fields=M),w+=z)}function _(){return s.header&&M.length===0}function I(N,k,z,y){N={type:N,code:k,message:z},y!==void 0&&(N.row=y),b.errors.push(N)}C(s.step)&&(v=s.step,s.step=function(N){b=N,_()?K():(K(),b.data.length!==0&&(H+=N.data.length,s.preview&&H>s.preview?u.abort():(b.data=b.data[0],v(b,F))))}),this.parse=function(N,k,z){var y=s.quoteChar||'"',y=(s.newline||(s.newline=this.guessLineEndings(N,y)),g=!1,s.delimiter?C(s.delimiter)&&(s.delimiter=s.delimiter(N),b.meta.delimiter=s.delimiter):((y=((W,Y,O,q,A)=>{var pe,D,G,Ce;A=A||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var $e=0;$e<A.length;$e++){for(var me,Fe=A[$e],re=0,fe=0,se=0,ce=(G=void 0,new ne({comments:q,delimiter:Fe,newline:Y,preview:10}).parse(W)),je=0;je<ce.data.length;je++)O&&J(ce.data[je])?se++:(me=ce.data[je].length,fe+=me,G===void 0?G=me:0<me&&(re+=Math.abs(me-G),G=me));0<ce.data.length&&(fe/=ce.data.length-se),(D===void 0||re<=D)&&(Ce===void 0||Ce<fe)&&1.99<fe&&(D=re,pe=Fe,Ce=fe)}return{successful:!!(s.delimiter=pe),bestDelimiter:pe}})(N,s.newline,s.skipEmptyLines,s.comments,s.delimitersToGuess)).successful?s.delimiter=y.bestDelimiter:(g=!0,s.delimiter=d.DefaultDelimiter),b.meta.delimiter=s.delimiter),i(s));return s.preview&&s.header&&y.preview++,a=N,u=new ne(y),b=u.parse(a,k,z),K(),te?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return te},this.pause=function(){te=!0,u.abort(),a=C(s.chunk)?"":a.substring(u.getCharIndex())},this.resume=function(){F.streamer._halted?(te=!1,F.streamer.parseChunk(a,!0)):setTimeout(F.resume,3)},this.aborted=function(){return S},this.abort=function(){S=!0,u.abort(),b.meta.aborted=!0,C(s.complete)&&s.complete(b),a=""},this.guessLineEndings=function(W,y){W=W.substring(0,1048576);var y=new RegExp(V(y)+"([^]*?)"+V(y),"gm"),z=(W=W.replace(y,"")).split("\r"),y=W.split(`
`),W=1<y.length&&y[0].length<z[0].length;if(z.length===1||W)return`
`;for(var Y=0,O=0;O<z.length;O++)z[O][0]===`
`&&Y++;return Y>=z.length/2?`\r
`:"\r"}}function V(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ne(s){var a=(s=s||{}).delimiter,u=s.newline,g=s.comments,v=s.step,P=s.preview,L=s.fastMode,le=null,ee=!1,F=s.quoteChar==null?'"':s.quoteChar,H=F;if(s.escapeChar!==void 0&&(H=s.escapeChar),(typeof a!="string"||-1<d.BAD_DELIMITERS.indexOf(a))&&(a=","),g===a)throw new Error("Comment character same as delimiter");g===!0?g="#":(typeof g!="string"||-1<d.BAD_DELIMITERS.indexOf(g))&&(g=!1),u!==`
`&&u!=="\r"&&u!==`\r
`&&(u=`
`);var w=0,te=!1;this.parse=function(S,M,b){if(typeof S!="string")throw new Error("Input must be a string");var J=S.length,K=a.length,_=u.length,I=g.length,N=C(v),k=[],z=[],y=[],W=w=0;if(!S)return re();if(L||L!==!1&&S.indexOf(F)===-1){for(var Y=S.split(u),O=0;O<Y.length;O++){if(y=Y[O],w+=y.length,O!==Y.length-1)w+=u.length;else if(b)return re();if(!g||y.substring(0,I)!==g){if(N){if(k=[],Ce(y.split(a)),fe(),te)return re()}else Ce(y.split(a));if(P&&P<=O)return k=k.slice(0,P),re(!0)}}return re()}for(var q=S.indexOf(a,w),A=S.indexOf(u,w),pe=new RegExp(V(H)+V(F),"g"),D=S.indexOf(F,w);;)if(S[w]===F)for(D=w,w++;;){if((D=S.indexOf(F,D+1))===-1)return b||z.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:w}),me();if(D===J-1)return me(S.substring(w,D).replace(pe,F));if(F===H&&S[D+1]===H)D++;else if(F===H||D===0||S[D-1]!==H){q!==-1&&q<D+1&&(q=S.indexOf(a,D+1));var G=$e((A=A!==-1&&A<D+1?S.indexOf(u,D+1):A)===-1?q:Math.min(q,A));if(S.substr(D+1+G,K)===a){y.push(S.substring(w,D).replace(pe,F)),S[w=D+1+G+K]!==F&&(D=S.indexOf(F,w)),q=S.indexOf(a,w),A=S.indexOf(u,w);break}if(G=$e(A),S.substring(D+1+G,D+1+G+_)===u){if(y.push(S.substring(w,D).replace(pe,F)),Fe(D+1+G+_),q=S.indexOf(a,w),D=S.indexOf(F,w),N&&(fe(),te))return re();if(P&&k.length>=P)return re(!0);break}z.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:k.length,index:w}),D++}}else if(g&&y.length===0&&S.substring(w,w+I)===g){if(A===-1)return re();w=A+_,A=S.indexOf(u,w),q=S.indexOf(a,w)}else if(q!==-1&&(q<A||A===-1))y.push(S.substring(w,q)),w=q+K,q=S.indexOf(a,w);else{if(A===-1)break;if(y.push(S.substring(w,A)),Fe(A+_),N&&(fe(),te))return re();if(P&&k.length>=P)return re(!0)}return me();function Ce(se){k.push(se),W=w}function $e(se){var ce=0;return ce=se!==-1&&(se=S.substring(D+1,se))&&se.trim()===""?se.length:ce}function me(se){return b||(se===void 0&&(se=S.substring(w)),y.push(se),w=J,Ce(y),N&&fe()),re()}function Fe(se){w=se,Ce(y),y=[],A=S.indexOf(u,w)}function re(se){if(s.header&&!M&&k.length&&!ee){var ce=k[0],je=Object.create(null),at=new Set(ce);let ht=!1;for(let Re=0;Re<ce.length;Re++){let xe=ce[Re];if(je[xe=C(s.transformHeader)?s.transformHeader(xe,Re):xe]){let Me,pt=je[xe];for(;Me=xe+"_"+pt,pt++,at.has(Me););at.add(Me),ce[Re]=Me,je[xe]++,ht=!0,(le=le===null?{}:le)[Me]=xe}else je[xe]=1,ce[Re]=xe;at.add(xe)}ht&&console.warn("Duplicate headers found and renamed."),ee=!0}return{data:k,errors:z,meta:{delimiter:a,linebreak:u,aborted:te,truncated:!!se,cursor:W+(M||0),renamedHeaders:le}}}function fe(){v(re()),k=[],z=[]}},this.abort=function(){te=!0},this.getCharIndex=function(){return w}}function ae(s){var a=s.data,u=c[a.workerId],g=!1;if(a.error)u.userError(a.error,a.file);else if(a.results&&a.results.data){var v={abort:function(){g=!0,ie(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(C(u.userStep)){for(var P=0;P<a.results.data.length&&(u.userStep({data:a.results.data[P],errors:a.results.errors,meta:a.results.meta},v),!g);P++);delete a.results}else C(u.userChunk)&&(u.userChunk(a.results,v,a.file),delete a.results)}a.finished&&!g&&ie(a.workerId,a.results)}function ie(s,a){var u=c[s];C(u.userComplete)&&u.userComplete(a),u.terminate(),delete c[s]}function U(){throw new Error("Not implemented.")}function i(s){if(typeof s!="object"||s===null)return s;var a,u=Array.isArray(s)?[]:{};for(a in s)u[a]=i(s[a]);return u}function m(s,a){return function(){s.apply(a,arguments)}}function C(s){return typeof s=="function"}return d.parse=function(s,a){var u=(a=a||{}).dynamicTyping||!1;if(C(u)&&(a.dynamicTypingFunction=u,u={}),a.dynamicTyping=u,a.transform=!!C(a.transform)&&a.transform,!a.worker||!d.WORKERS_SUPPORTED)return u=null,d.NODE_STREAM_INPUT,typeof s=="string"?(s=(g=>g.charCodeAt(0)!==65279?g:g.slice(1))(s),u=new(a.download?$:j)(a)):s.readable===!0&&C(s.read)&&C(s.on)?u=new T(a):(r.File&&s instanceof File||s instanceof Object)&&(u=new R(a)),u.stream(s);(u=(()=>{var g;return!!d.WORKERS_SUPPORTED&&(g=(()=>{var v=r.URL||r.webkitURL||null,P=o.toString();return d.BLOB_URL||(d.BLOB_URL=v.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(g=new r.Worker(g)).onmessage=ae,g.id=n++,c[g.id]=g)})()).userStep=a.step,u.userChunk=a.chunk,u.userComplete=a.complete,u.userError=a.error,a.step=C(a.step),a.chunk=C(a.chunk),a.complete=C(a.complete),a.error=C(a.error),delete a.worker,u.postMessage({input:s,config:a,workerId:u.id})},d.unparse=function(s,a){var u=!1,g=!0,v=",",P=`\r
`,L='"',le=L+L,ee=!1,F=null,H=!1,w=((()=>{if(typeof a=="object"){if(typeof a.delimiter!="string"||d.BAD_DELIMITERS.filter(function(M){return a.delimiter.indexOf(M)!==-1}).length||(v=a.delimiter),typeof a.quotes!="boolean"&&typeof a.quotes!="function"&&!Array.isArray(a.quotes)||(u=a.quotes),typeof a.skipEmptyLines!="boolean"&&typeof a.skipEmptyLines!="string"||(ee=a.skipEmptyLines),typeof a.newline=="string"&&(P=a.newline),typeof a.quoteChar=="string"&&(L=a.quoteChar),typeof a.header=="boolean"&&(g=a.header),Array.isArray(a.columns)){if(a.columns.length===0)throw new Error("Option columns is empty");F=a.columns}a.escapeChar!==void 0&&(le=a.escapeChar+L),a.escapeFormulae instanceof RegExp?H=a.escapeFormulae:typeof a.escapeFormulae=="boolean"&&a.escapeFormulae&&(H=/^[=+\-@\t\r].*$/)}})(),new RegExp(V(L),"g"));if(typeof s=="string"&&(s=JSON.parse(s)),Array.isArray(s)){if(!s.length||Array.isArray(s[0]))return te(null,s,ee);if(typeof s[0]=="object")return te(F||Object.keys(s[0]),s,ee)}else if(typeof s=="object")return typeof s.data=="string"&&(s.data=JSON.parse(s.data)),Array.isArray(s.data)&&(s.fields||(s.fields=s.meta&&s.meta.fields||F),s.fields||(s.fields=Array.isArray(s.data[0])?s.fields:typeof s.data[0]=="object"?Object.keys(s.data[0]):[]),Array.isArray(s.data[0])||typeof s.data[0]=="object"||(s.data=[s.data])),te(s.fields||[],s.data||[],ee);throw new Error("Unable to serialize unrecognized input");function te(M,b,J){var K="",_=(typeof M=="string"&&(M=JSON.parse(M)),typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(M)&&0<M.length),I=!Array.isArray(b[0]);if(_&&g){for(var N=0;N<M.length;N++)0<N&&(K+=v),K+=S(M[N],N);0<b.length&&(K+=P)}for(var k=0;k<b.length;k++){var z=(_?M:b[k]).length,y=!1,W=_?Object.keys(b[k]).length===0:b[k].length===0;if(J&&!_&&(y=J==="greedy"?b[k].join("").trim()==="":b[k].length===1&&b[k][0].length===0),J==="greedy"&&_){for(var Y=[],O=0;O<z;O++){var q=I?M[O]:O;Y.push(b[k][q])}y=Y.join("").trim()===""}if(!y){for(var A=0;A<z;A++){0<A&&!W&&(K+=v);var pe=_&&I?M[A]:A;K+=S(b[k][pe],A)}k<b.length-1&&(!J||0<z&&!W)&&(K+=P)}}return K}function S(M,b){var J,K;return M==null?"":M.constructor===Date?JSON.stringify(M).slice(1,25):(K=!1,H&&typeof M=="string"&&H.test(M)&&(M="'"+M,K=!0),J=M.toString().replace(w,le),(K=K||u===!0||typeof u=="function"&&u(M,b)||Array.isArray(u)&&u[b]||((_,I)=>{for(var N=0;N<I.length;N++)if(-1<_.indexOf(I[N]))return!0;return!1})(J,d.BAD_DELIMITERS)||-1<J.indexOf(v)||J.charAt(0)===" "||J.charAt(J.length-1)===" ")?L+J+L:J)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!f&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=ne,d.ParserHandle=B,d.NetworkStreamer=$,d.FileStreamer=R,d.StringStreamer=j,d.ReadableStreamStreamer=T,r.jQuery&&((h=r.jQuery).fn.parse=function(s){var a=s.config||{},u=[];return this.each(function(P){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)u.push({file:this.files[L],inputElem:this,instanceConfig:h.extend({},a)})}),g(),this;function g(){if(u.length===0)C(s.complete)&&s.complete();else{var P,L,le,ee,F=u[0];if(C(s.before)){var H=s.before(F.file,F.inputElem);if(typeof H=="object"){if(H.action==="abort")return P="AbortError",L=F.file,le=F.inputElem,ee=H.reason,void(C(s.error)&&s.error({name:P},L,le,ee));if(H.action==="skip")return void v();typeof H.config=="object"&&(F.instanceConfig=h.extend(F.instanceConfig,H.config))}else if(H==="skip")return void v()}var w=F.instanceConfig.complete;F.instanceConfig.complete=function(te){C(w)&&w(te,F.file,F.inputElem),v()},d.parse(F.file,F.instanceConfig)}}function v(){u.splice(0,1),g()}}),x&&(r.onmessage=function(s){s=s.data,d.WORKER_ID===void 0&&s&&(d.WORKER_ID=s.workerId),typeof s.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(s.input,s.config),finished:!0}):(r.File&&s.input instanceof File||s.input instanceof Object)&&(s=d.parse(s.input,s.config))&&r.postMessage({workerId:d.WORKER_ID,results:s,finished:!0})}),($.prototype=Object.create(E.prototype)).constructor=$,(R.prototype=Object.create(E.prototype)).constructor=R,(j.prototype=Object.create(j.prototype)).constructor=j,(T.prototype=Object.create(E.prototype)).constructor=T,d})})(Le)),Le.exports}var Fs=Ts();const Tt=qt(Fs);function Ms({summary:t,loading:l}){const o=[{title:"Receita Mensal",value:t?.income||0,netValue:t?.netIncome||0,icon:Es,color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-950",borderColor:"border-green-200 dark:border-green-800",showNet:!0},{title:"Despesas",value:t?.expenses||0,icon:ks,color:"text-red-600",bgColor:"bg-red-50 dark:bg-red-950",borderColor:"border-red-200 dark:border-red-800"},{title:"Resultado Líquido",value:t?.netResult||0,icon:Bt,color:t?.netResult>=0?"text-blue-600":"text-red-600",bgColor:t?.netResult>=0?"bg-blue-50 dark:bg-blue-950":"bg-red-50 dark:bg-red-950",borderColor:t?.netResult>=0?"border-blue-200 dark:border-blue-800":"border-red-200 dark:border-red-800"},{title:"A Receber (Pendente)",value:t?.overdue||0,icon:wt,color:"text-orange-600",bgColor:"bg-orange-50 dark:bg-orange-950",borderColor:"border-orange-200 dark:border-orange-800"}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map((r,h)=>{const f=r.icon;return e.jsxs(ge,{className:`${r.bgColor} ${r.borderColor} border-2 transition-all hover:shadow-md`,children:[e.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(be,{className:"text-sm font-medium text-muted-foreground",children:r.title}),e.jsx(f,{className:`h-4 w-4 ${r.color}`})]}),e.jsx(ve,{children:l?e.jsx("div",{className:"h-8 w-24 bg-muted animate-pulse rounded"}):e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${r.color}`,children:_e(r.value)}),r.showNet&&r.netValue!==r.value&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Líquido: ",e.jsx("span",{className:"font-semibold",children:_e(r.netValue)})]})]})})]},h)})})}const Ie={income:"#22c55e",expense:"#ef4444",pie:["#3b82f6","#8b5cf6","#ec4899","#f59e0b","#10b981","#6366f1","#f97316"]};function As({cashFlowData:t,expenseDistribution:l,projectedCashFlow:o,loading:r}){const h=p.useMemo(()=>!t||t.length===0?[]:t.map(c=>({...c,date:Z(ze(c.date),"dd/MM",{locale:Ee})})),[t]),f=p.useMemo(()=>!l||l.length===0?[]:l,[l]),x=p.useMemo(()=>!o||o.length===0?[]:o.map(c=>({...c,date:Z(ze(c.date),"dd/MM",{locale:Ee})})),[o]);return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ge,{children:[e.jsxs(ye,{children:[e.jsx(be,{children:"Fluxo de Caixa"}),e.jsx(De,{children:"Receitas vs Despesas por período"})]}),e.jsx(ve,{children:r?e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Carregando..."})}):h.length===0?e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Nenhum dado disponível"})}):e.jsx(nt,{width:"100%",height:300,children:e.jsxs(Yt,{data:h,children:[e.jsx(vt,{dataKey:"date",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),e.jsx(jt,{tick:{fontSize:12},tickFormatter:c=>`R$ ${(c/1e3).toFixed(0)}k`}),e.jsx(it,{formatter:c=>`R$ ${c.toFixed(2)}`,contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),e.jsx(xt,{}),e.jsx(gt,{dataKey:"income",name:"Receitas",fill:Ie.income,radius:[4,4,0,0]}),e.jsx(gt,{dataKey:"expenses",name:"Despesas",fill:Ie.expense,radius:[4,4,0,0]})]})})})]}),e.jsxs(ge,{children:[e.jsxs(ye,{children:[e.jsx(be,{children:"Análise Financeira"}),e.jsx(De,{children:"Distribuição de despesas e projeção de caixa"})]}),e.jsx(ve,{children:e.jsxs(Nt,{defaultValue:"expenses",className:"w-full",children:[e.jsxs(St,{className:"grid w-full grid-cols-2",children:[e.jsx(Ze,{value:"expenses",children:"Despesas"}),e.jsx(Ze,{value:"projection",children:"Projeção (30 dias)"})]}),e.jsx(ft,{value:"expenses",className:"mt-4",children:r?e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Carregando..."})}):f.length===0?e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Nenhuma despesa registrada"})}):e.jsx(nt,{width:"100%",height:300,children:e.jsxs(Qt,{children:[e.jsx(Zt,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:({name:c,percent:n})=>`${c}: ${(n*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:f.map((c,n)=>e.jsx(Jt,{fill:Ie.pie[n%Ie.pie.length]},`cell-${n}`))}),e.jsx(it,{formatter:c=>`R$ ${c.toFixed(2)}`,contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}})]})})}),e.jsx(ft,{value:"projection",className:"mt-4",children:r?e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Carregando..."})}):x.length===0?e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Nenhuma projeção disponível"})}):e.jsx(nt,{width:"100%",height:300,children:e.jsxs(es,{data:x,children:[e.jsx(vt,{dataKey:"date",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),e.jsx(jt,{tick:{fontSize:12},tickFormatter:c=>`R$ ${(c/1e3).toFixed(0)}k`}),e.jsx(it,{formatter:c=>`R$ ${c.toFixed(2)}`,contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),e.jsx(xt,{}),e.jsx(ts,{type:"monotone",dataKey:"balance",name:"Saldo Projetado",stroke:"#3b82f6",strokeWidth:2,dot:{r:3}})]})})})]})})]})]})}const Os={paid:"success",pending:"warning",overdue:"destructive"},zs={paid:"Pago",pending:"Pendente",overdue:"Vencido"};function Is({transactions:t,loading:l,onEdit:o,onDelete:r,onGenerateReceipt:h,filters:f,onFiltersChange:x}){const[c,n]=p.useState(f?.search||""),d=j=>{n(j),x({...f,search:j})},E=(j,T)=>{x({...f,[j]:T==="all"?null:T})},$=()=>{n(""),x({type:null,status:null,search:null})},R=f?.type||f?.status||f?.search;return e.jsxs(ge,{children:[e.jsx(ye,{children:e.jsx(be,{children:"Histórico de Transações"})}),e.jsxs(ve,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(de,{placeholder:"Buscar por descrição...",value:c,onChange:j=>d(j.target.value),className:"pl-9"})]}),e.jsxs(we,{value:f?.type||"all",onValueChange:j=>E("type",j),children:[e.jsx(Ne,{className:"w-full sm:w-[180px]",children:e.jsx(Se,{placeholder:"Tipo"})}),e.jsxs(ke,{children:[e.jsx(oe,{value:"all",children:"Todos os tipos"}),e.jsx(oe,{value:"income",children:"Receita"}),e.jsx(oe,{value:"expense",children:"Despesa"})]})]}),e.jsxs(we,{value:f?.status||"all",onValueChange:j=>E("status",j),children:[e.jsx(Ne,{className:"w-full sm:w-[180px]",children:e.jsx(Se,{placeholder:"Status"})}),e.jsxs(ke,{children:[e.jsx(oe,{value:"all",children:"Todos os status"}),e.jsx(oe,{value:"paid",children:"Pago"}),e.jsx(oe,{value:"pending",children:"Pendente"}),e.jsx(oe,{value:"overdue",children:"Vencido"})]})]}),R&&e.jsx(X,{variant:"outline",size:"icon",onClick:$,className:"flex-shrink-0",children:e.jsx(ot,{className:"h-4 w-4"})})]}),l?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando transações..."}):t.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma transação encontrada."}):e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs(kt,{children:[e.jsx(Et,{children:e.jsxs(et,{children:[e.jsx(ue,{className:"w-[100px]",children:"Data"}),e.jsx(ue,{children:"Descrição"}),e.jsx(ue,{className:"w-[120px]",children:"Categoria"}),e.jsx(ue,{className:"w-[150px]",children:"Paciente"}),e.jsx(ue,{className:"w-[120px] text-right",children:"Valor"}),e.jsx(ue,{className:"w-[100px]",children:"Status"}),e.jsx(ue,{className:"w-[100px] text-right",children:"Ações"})]})}),e.jsx($t,{children:t.map(j=>e.jsxs(et,{children:[e.jsx(he,{className:"font-medium",children:Z(new Date(j.transaction_date+"T00:00:00"),"dd/MM/yyyy",{locale:Ee})}),e.jsx(he,{className:"max-w-[200px] truncate",children:j.description}),e.jsx(he,{children:e.jsx(tt,{variant:"outline",children:j.category||(j.type==="income"?"Receita":"Despesa")})}),e.jsx(he,{className:"max-w-[150px] truncate",children:j.patient?.name||"-"}),e.jsxs(he,{className:`text-right font-semibold ${j.type==="income"?"text-green-600":"text-red-600"}`,children:[j.type==="income"?"+":"-",_e(j.amount)]}),e.jsx(he,{children:e.jsx(tt,{variant:Os[j.status]||"default",children:zs[j.status]||j.status})}),e.jsx(he,{children:e.jsxs("div",{className:"flex justify-end gap-2",children:[j.type==="income"&&j.status==="paid"&&h&&e.jsx(X,{variant:"ghost",size:"icon",onClick:()=>h(j),className:"h-8 w-8",title:"Gerar Recibo",children:e.jsx(Rs,{className:"h-4 w-4"})}),e.jsx(X,{variant:"ghost",size:"icon",onClick:()=>o(j),className:"h-8 w-8",title:"Editar",children:e.jsx(Rt,{className:"h-4 w-4"})}),e.jsx(X,{variant:"ghost",size:"icon",onClick:()=>r(j.id),className:"h-8 w-8 text-destructive hover:text-destructive",title:"Excluir",children:e.jsx(Ct,{className:"h-4 w-4"})})]})})]},j.id))})]})})]})]})}function Ls(t,l,{checkForDefaultPrevented:o=!0}={}){return function(h){if(t?.(h),o===!1||!h.defaultPrevented)return l?.(h)}}function qs(t,l){typeof t=="function"?t(l):t!=null&&(t.current=l)}function Ft(...t){return l=>t.forEach(o=>qs(o,l))}function Bs(...t){return p.useCallback(Ft(...t),t)}function Vs(t,l=[]){let o=[];function r(f,x){const c=p.createContext(x),n=o.length;o=[...o,x];function d($){const{scope:R,children:j,...T}=$,B=R?.[t][n]||c,V=p.useMemo(()=>T,Object.values(T));return p.createElement(B.Provider,{value:V},j)}function E($,R){const j=R?.[t][n]||c,T=p.useContext(j);if(T)return T;if(x!==void 0)return x;throw new Error(`\`${$}\` must be used within \`${f}\``)}return d.displayName=f+"Provider",[d,E]}const h=()=>{const f=o.map(x=>p.createContext(x));return function(c){const n=c?.[t]||f;return p.useMemo(()=>({[`__scope${t}`]:{...c,[t]:n}}),[c,n])}};return h.scopeName=t,[r,Us(h,...l)]}function Us(...t){const l=t[0];if(t.length===1)return l;const o=()=>{const r=t.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(f){const x=r.reduce((c,{useScope:n,scopeName:d})=>{const $=n(f)[`__scope${d}`];return{...c,...$}},{});return p.useMemo(()=>({[`__scope${l.scopeName}`]:x}),[x])}};return o.scopeName=l.scopeName,o}function Mt(t){const l=p.useRef(t);return p.useEffect(()=>{l.current=t}),p.useMemo(()=>(...o)=>{var r;return(r=l.current)===null||r===void 0?void 0:r.call(l,...o)},[])}function Hs({prop:t,defaultProp:l,onChange:o=()=>{}}){const[r,h]=Ws({defaultProp:l,onChange:o}),f=t!==void 0,x=f?t:r,c=Mt(o),n=p.useCallback(d=>{if(f){const $=typeof d=="function"?d(t):d;$!==t&&c($)}else h(d)},[f,t,h,c]);return[x,n]}function Ws({defaultProp:t,onChange:l}){const o=p.useState(t),[r]=o,h=p.useRef(r),f=Mt(l);return p.useEffect(()=>{h.current!==r&&(f(r),h.current=r)},[r,h,f]),o}function Ks(t){const l=p.useRef({value:t,previous:t});return p.useMemo(()=>(l.current.value!==t&&(l.current.previous=l.current.value,l.current.value=t),l.current.previous),[t])}const Gs=globalThis?.document?p.useLayoutEffect:()=>{};function Xs(t){const[l,o]=p.useState(void 0);return Gs(()=>{if(t){o({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(h=>{if(!Array.isArray(h)||!h.length)return;const f=h[0];let x,c;if("borderBoxSize"in f){const n=f.borderBoxSize,d=Array.isArray(n)?n[0]:n;x=d.inlineSize,c=d.blockSize}else x=t.offsetWidth,c=t.offsetHeight;o({width:x,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else o(void 0)},[t]),l}const At=p.forwardRef((t,l)=>{const{children:o,...r}=t,h=p.Children.toArray(o),f=h.find(Ys);if(f){const x=f.props.children,c=h.map(n=>n===f?p.Children.count(x)>1?p.Children.only(null):p.isValidElement(x)?x.props.children:null:n);return p.createElement(ct,Pe({},r,{ref:l}),p.isValidElement(x)?p.cloneElement(x,void 0,c):null)}return p.createElement(ct,Pe({},r,{ref:l}),o)});At.displayName="Slot";const ct=p.forwardRef((t,l)=>{const{children:o,...r}=t;return p.isValidElement(o)?p.cloneElement(o,{...Qs(r,o.props),ref:l?Ft(l,o.ref):o.ref}):p.Children.count(o)>1?p.Children.only(null):null});ct.displayName="SlotClone";const Js=({children:t})=>p.createElement(p.Fragment,null,t);function Ys(t){return p.isValidElement(t)&&t.type===Js}function Qs(t,l){const o={...l};for(const r in l){const h=t[r],f=l[r];/^on[A-Z]/.test(r)?h&&f?o[r]=(...c)=>{f(...c),h(...c)}:h&&(o[r]=h):r==="style"?o[r]={...h,...f}:r==="className"&&(o[r]=[h,f].filter(Boolean).join(" "))}return{...t,...o}}const Zs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ot=Zs.reduce((t,l)=>{const o=p.forwardRef((r,h)=>{const{asChild:f,...x}=r,c=f?At:l;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(c,Pe({},x,{ref:h}))});return o.displayName=`Primitive.${l}`,{...t,[l]:o}},{}),zt="Switch",[ea]=Vs(zt),[ta,sa]=ea(zt),aa=p.forwardRef((t,l)=>{const{__scopeSwitch:o,name:r,checked:h,defaultChecked:f,required:x,disabled:c,value:n="on",onCheckedChange:d,...E}=t,[$,R]=p.useState(null),j=Bs(l,ae=>R(ae)),T=p.useRef(!1),B=$?!!$.closest("form"):!0,[V=!1,ne]=Hs({prop:h,defaultProp:f,onChange:d});return p.createElement(ta,{scope:o,checked:V,disabled:c},p.createElement(Ot.button,Pe({type:"button",role:"switch","aria-checked":V,"aria-required":x,"data-state":It(V),"data-disabled":c?"":void 0,disabled:c,value:n},E,{ref:j,onClick:Ls(t.onClick,ae=>{ne(ie=>!ie),B&&(T.current=ae.isPropagationStopped(),T.current||ae.stopPropagation())})})),B&&p.createElement(ia,{control:$,bubbles:!T.current,name:r,value:n,checked:V,required:x,disabled:c,style:{transform:"translateX(-100%)"}}))}),ra="SwitchThumb",na=p.forwardRef((t,l)=>{const{__scopeSwitch:o,...r}=t,h=sa(ra,o);return p.createElement(Ot.span,Pe({"data-state":It(h.checked),"data-disabled":h.disabled?"":void 0},r,{ref:l}))}),ia=t=>{const{control:l,checked:o,bubbles:r=!0,...h}=t,f=p.useRef(null),x=Ks(o),c=Xs(l);return p.useEffect(()=>{const n=f.current,d=window.HTMLInputElement.prototype,$=Object.getOwnPropertyDescriptor(d,"checked").set;if(x!==o&&$){const R=new Event("click",{bubbles:r});$.call(n,o),n.dispatchEvent(R)}},[x,o,r]),p.createElement("input",Pe({type:"checkbox","aria-hidden":!0,defaultChecked:o},h,{tabIndex:-1,ref:f,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function It(t){return t?"checked":"unchecked"}const Lt=aa,oa=na,dt=p.forwardRef(({className:t,...l},o)=>e.jsx(Lt,{className:mt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...l,ref:o,children:e.jsx(oa,{className:mt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));dt.displayName=Lt.displayName;const la=[{value:"consulta",label:"Consulta"},{value:"plano_mensal",label:"Plano Mensal"},{value:"outros",label:"Outros"}],ca=[{value:"aluguel",label:"Aluguel"},{value:"marketing",label:"Marketing"},{value:"software",label:"Software"},{value:"outros",label:"Outros"}],da=[{value:"pix",label:"PIX"},{value:"credit",label:"Cartão de Crédito"},{value:"debit",label:"Cartão de Débito"},{value:"cash",label:"Dinheiro"},{value:"transfer",label:"Transferência Bancária"},{value:"other",label:"Outro"}];function ua({open:t,onOpenChange:l,transaction:o,patients:r=[],services:h=[],nutritionistId:f,onSave:x}){const{toast:c}=st(),[n,d]=p.useState({type:"income",category:"",patient_id:"",service_id:"",description:"",amount:"",transaction_date:Z(new Date,"yyyy-MM-dd"),isPaid:!0,due_date:"",isInstallment:!1,installments:2,payment_method:"pix",fee_percentage:"",attachment_file:null,attachment_url:null}),[E,$]=p.useState(!1);p.useEffect(()=>{d(o?{type:o.type||"income",category:o.category||"",patient_id:o.patient_id||"",service_id:"",description:o.description||"",amount:o.amount?.toString()||"",transaction_date:o.transaction_date?Z(new Date(o.transaction_date+"T00:00:00"),"yyyy-MM-dd"):Z(new Date,"yyyy-MM-dd"),isPaid:o.status==="paid",due_date:o.due_date?Z(new Date(o.due_date+"T00:00:00"),"yyyy-MM-dd"):"",isInstallment:!1,installments:2,payment_method:o.payment_method||"pix",fee_percentage:o.fee_percentage?.toString()||"",attachment_file:null,attachment_url:o.attachment_url||null}:{type:"income",category:"",patient_id:"",service_id:"",description:"",amount:"",transaction_date:Z(new Date,"yyyy-MM-dd"),isPaid:!0,due_date:"",isInstallment:!1,installments:2,payment_method:"pix",fee_percentage:"",attachment_file:null,attachment_url:null})},[o,t]);const R=p.useMemo(()=>{const i=parseFloat(n.amount)||0,m=parseFloat(n.fee_percentage)||0;if(i===0)return 0;if((n.payment_method==="credit"||n.payment_method==="debit")&&m>0){const C=i*m/100;return i-C}return i},[n.amount,n.fee_percentage,n.payment_method]),j=i=>{const m=i.target.files?.[0];if(m){if(m.size>10*1024*1024){c({title:"Erro",description:"O arquivo deve ter no máximo 10MB.",variant:"destructive"});return}d(C=>({...C,attachment_file:m}))}},T=()=>{d(i=>({...i,attachment_file:null,attachment_url:null}))},B=async()=>{if(!n.attachment_file||!f)return null;$(!0);try{const i=n.attachment_file.name.split(".").pop(),m=`${f}/${Date.now()}_${Math.random().toString(36).substring(7)}.${i}`,{error:C}=await Oe.storage.from("financial-docs").upload(m,n.attachment_file,{cacheControl:"3600",upsert:!1});if(C)throw C;const{data:{publicUrl:s}}=Oe.storage.from("financial-docs").getPublicUrl(m);return s}catch(i){return console.error("Error uploading attachment:",i),c({title:"Erro",description:"Não foi possível fazer upload do arquivo.",variant:"destructive"}),null}finally{$(!1)}},V=i=>{d(m=>({...m,type:i,category:"",patient_id:i==="expense"?"":m.patient_id,service_id:i==="expense"?"":m.service_id,isInstallment:i==="expense"?m.isInstallment:!1}))},ne=i=>{if(!i){d(C=>({...C,service_id:"",amount:"",description:""}));return}const m=h.find(C=>C.id.toString()===i);m&&d(C=>({...C,service_id:i,amount:m.price.toString(),description:m.name,category:m.category||C.category}))},ae=async i=>{if(i.preventDefault(),!n.description||!n.amount||!n.category)return;let m=n.attachment_url;if(n.attachment_file&&(m=await B(),!m&&n.attachment_file&&c({title:"Aviso",description:"Salvando sem anexo. Tente fazer upload novamente depois.",variant:"default"})),o?.id){const C={id:o.id,type:n.type,category:n.category,patient_id:n.type==="income"&&n.patient_id?n.patient_id:null,description:n.description,amount:parseFloat(n.amount),transaction_date:n.transaction_date,status:n.isPaid?"paid":"pending",due_date:!n.isPaid&&n.due_date?n.due_date:null,payment_method:n.payment_method,fee_percentage:n.fee_percentage?parseFloat(n.fee_percentage):null,attachment_url:m};x(C);return}if(n.type==="expense"&&n.isInstallment&&n.installments>1){const s=parseFloat(n.amount)/n.installments,a=ze(n.transaction_date+"T00:00:00"),u=[];for(let g=0;g<n.installments;g++){const v=as(a,g);u.push({type:"expense",category:n.category,description:`${n.description} (${g+1}/${n.installments})`,amount:s,transaction_date:Z(v,"yyyy-MM-dd"),status:g===0&&n.isPaid?"paid":"pending",due_date:Z(v,"yyyy-MM-dd"),payment_method:n.payment_method,fee_percentage:n.fee_percentage?parseFloat(n.fee_percentage):null,attachment_url:g===0?m:null})}x({multiple:!0,transactions:u})}else{const C={type:n.type,category:n.category,patient_id:n.type==="income"&&n.patient_id?n.patient_id:null,description:n.description,amount:parseFloat(n.amount),transaction_date:n.transaction_date,status:n.isPaid?"paid":"pending",due_date:!n.isPaid&&n.due_date?n.due_date:null,payment_method:n.payment_method,fee_percentage:n.fee_percentage?parseFloat(n.fee_percentage):null,attachment_url:m};x(C)}},ie=n.type==="income"?la:ca,U=n.isInstallment&&n.amount?(parseFloat(n.amount)/n.installments).toFixed(2):"0.00";return e.jsx(qe,{open:t,onOpenChange:l,children:e.jsxs(Be,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ve,{children:e.jsx(Ue,{children:o?"Editar Transação":"Nova Transação"})}),e.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Q,{children:"Tipo de Transação"}),e.jsx(Nt,{value:n.type,onValueChange:V,className:"mt-2",children:e.jsxs(St,{className:"grid w-full grid-cols-2",children:[e.jsx(Ze,{value:"income",children:"Receita"}),e.jsx(Ze,{value:"expense",children:"Despesa"})]})})]}),n.type==="income"&&!o&&h.length>0&&e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"service_id",children:"Serviço (opcional)"}),e.jsxs(we,{value:n.service_id,onValueChange:ne,children:[e.jsx(Ne,{children:e.jsx(Se,{placeholder:"Selecione um serviço para preencher automaticamente"})}),e.jsxs(ke,{children:[e.jsx(oe,{value:"",children:"Nenhum"}),h.map(i=>e.jsxs(oe,{value:i.id.toString(),children:[i.name," - ",_e(i.price)]},i.id))]})]})]}),e.jsxs("div",{children:[e.jsxs(Q,{htmlFor:"category",children:["Categoria ",n.type==="income"?"da Receita":"da Despesa"," *"]}),e.jsxs(we,{required:!0,value:n.category,onValueChange:i=>d(m=>({...m,category:i})),children:[e.jsx(Ne,{children:e.jsx(Se,{placeholder:"Selecione uma categoria"})}),e.jsx(ke,{children:ie.map(i=>e.jsx(oe,{value:i.value,children:i.label},i.value))})]})]}),n.type==="income"&&e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"patient_id",children:"Paciente (opcional)"}),e.jsxs(we,{value:n.patient_id,onValueChange:i=>d(m=>({...m,patient_id:i})),children:[e.jsx(Ne,{children:e.jsx(Se,{placeholder:"Selecione um paciente"})}),e.jsxs(ke,{children:[e.jsx(oe,{value:"",children:"Nenhum"}),r.map(i=>e.jsx(oe,{value:i.id,children:i.name},i.id))]})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"description",children:"Descrição *"}),e.jsx(de,{id:"description",required:!0,value:n.description,onChange:i=>d(m=>({...m,description:i.target.value})),placeholder:"Ex: Consulta com João Silva"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"amount",children:"Valor Total (R$) *"}),e.jsx(de,{id:"amount",type:"number",step:"0.01",min:"0",required:!0,value:n.amount,onChange:i=>d(m=>({...m,amount:i.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"transaction_date",children:"Data *"}),e.jsx(de,{id:"transaction_date",type:"date",required:!0,value:n.transaction_date,onChange:i=>d(m=>({...m,transaction_date:i.target.value}))})]})]}),n.type==="expense"&&!o&&e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Q,{htmlFor:"isInstallment",children:"Parcelado?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Dividir esta despesa em múltiplas parcelas"})]}),e.jsx(dt,{id:"isInstallment",checked:n.isInstallment,onCheckedChange:i=>d(m=>({...m,isInstallment:i}))})]}),n.type==="expense"&&n.isInstallment&&!o&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 border rounded-lg bg-muted/50",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"installments",children:"Número de Parcelas *"}),e.jsxs(we,{value:n.installments.toString(),onValueChange:i=>d(m=>({...m,installments:parseInt(i)})),children:[e.jsx(Ne,{children:e.jsx(Se,{})}),e.jsx(ke,{children:[2,3,4,5,6,7,8,9,10,11,12].map(i=>e.jsxs(oe,{value:i.toString(),children:[i,"x"]},i))})]})]}),e.jsxs("div",{children:[e.jsx(Q,{children:"Valor por Parcela"}),e.jsx("div",{className:"h-10 flex items-center text-lg font-semibold text-primary",children:_e(parseFloat(U))})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Q,{htmlFor:"isPaid",children:"Já foi pago?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.isInstallment?"Marque se a primeira parcela já foi paga":"Marque se o pagamento já foi realizado"})]}),e.jsx(dt,{id:"isPaid",checked:n.isPaid,onCheckedChange:i=>d(m=>({...m,isPaid:i}))})]}),!n.isPaid&&!n.isInstallment&&e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"due_date",children:"Data de Vencimento *"}),e.jsx(de,{id:"due_date",type:"date",required:!n.isPaid,value:n.due_date,onChange:i=>d(m=>({...m,due_date:i.target.value})),min:n.transaction_date})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"payment_method",children:"Método de Pagamento"}),e.jsxs(we,{value:n.payment_method,onValueChange:i=>d(m=>({...m,payment_method:i,fee_percentage:i==="credit"||i==="debit"?m.fee_percentage:""})),children:[e.jsx(Ne,{children:e.jsx(Se,{placeholder:"Selecione o método de pagamento"})}),e.jsx(ke,{children:da.map(i=>e.jsx(oe,{value:i.value,children:i.label},i.value))})]})]}),(n.payment_method==="credit"||n.payment_method==="debit")&&e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"fee_percentage",children:"Taxa (%)"}),e.jsx(de,{id:"fee_percentage",type:"number",step:"0.01",min:"0",max:"100",value:n.fee_percentage,onChange:i=>d(m=>({...m,fee_percentage:i.target.value})),placeholder:"Ex: 2.5"}),n.amount&&n.fee_percentage&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Valor Líquido Estimado: ",e.jsx("span",{className:"font-semibold text-primary",children:_e(R)})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"attachment",children:"Anexar Comprovante/NF (opcional)"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[n.attachment_file?e.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg bg-muted/50",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{className:"flex-1 text-sm truncate",children:n.attachment_file.name}),e.jsx(X,{type:"button",variant:"ghost",size:"icon",onClick:T,className:"h-8 w-8",children:e.jsx(ot,{className:"w-4 h-4"})})]}):n.attachment_url?e.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg bg-muted/50",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("a",{href:n.attachment_url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-sm text-primary hover:underline truncate",children:"Ver anexo existente"}),e.jsx(X,{type:"button",variant:"ghost",size:"icon",onClick:T,className:"h-8 w-8",children:e.jsx(ot,{className:"w-4 h-4"})})]}):e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(de,{id:"attachment",type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:j,className:"flex-1",disabled:E})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Formatos aceitos: PDF, JPG, PNG, DOC, DOCX (máx. 10MB)"})]})]}),e.jsxs(ut,{children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),e.jsx(X,{type:"submit",children:o?"Atualizar":"Salvar"})]})]})]})})}const _t=[{value:"consulta",label:"Consulta"},{value:"plano_mensal",label:"Plano Mensal"},{value:"outros",label:"Outros"}];function ha({open:t,onOpenChange:l,nutritionistId:o}){const{toast:r}=st(),[h,f]=p.useState([]),[x,c]=p.useState(!0),[n,d]=p.useState(!1),[E,$]=p.useState(null),[R,j]=p.useState(null),[T,B]=p.useState({name:"",description:"",price:"",category:"consulta"});p.useEffect(()=>{t&&o&&V()},[t,o]);const V=async()=>{if(o){c(!0);try{const i=await lt(o);f(i)}catch{r({title:"Erro",description:"Não foi possível carregar os serviços.",variant:"destructive"})}finally{c(!1)}}},ne=()=>{$(null),B({name:"",description:"",price:"",category:"consulta"}),d(!0)},ae=i=>{$(i),B({name:i.name,description:i.description||"",price:i.price.toString(),category:i.category||"consulta"}),d(!0)},ie=async i=>{if(i.preventDefault(),!T.name||!T.price){r({title:"Erro",description:"Preencha todos os campos obrigatórios.",variant:"destructive"});return}try{await rs({id:E?.id,nutritionist_id:o,name:T.name,description:T.description,price:parseFloat(T.price),category:T.category}),r({title:"Sucesso!",description:`Serviço ${E?"atualizado":"criado"} com sucesso.`}),d(!1),$(null),V()}catch(m){r({title:"Erro",description:`Não foi possível salvar o serviço: ${m.message}`,variant:"destructive"})}},U=async i=>{try{await ns(i),r({title:"Sucesso!",description:"Serviço excluído com sucesso."}),j(null),V()}catch{r({title:"Erro",description:"Não foi possível excluir o serviço.",variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsx(qe,{open:t,onOpenChange:l,children:e.jsxs(Be,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ve,{children:e.jsx(Ue,{children:"Gerenciar Serviços"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(X,{onClick:ne,children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Novo Serviço"]})}),x?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando serviços..."}):h.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'Nenhum serviço cadastrado. Clique em "Novo Serviço" para começar.'}):e.jsx(ge,{children:e.jsx(ve,{className:"p-0",children:e.jsxs(kt,{children:[e.jsx(Et,{children:e.jsxs(et,{children:[e.jsx(ue,{children:"Nome"}),e.jsx(ue,{children:"Descrição"}),e.jsx(ue,{children:"Categoria"}),e.jsx(ue,{className:"text-right",children:"Preço"}),e.jsx(ue,{className:"text-right",children:"Ações"})]})}),e.jsx($t,{children:h.map(i=>e.jsxs(et,{children:[e.jsx(he,{className:"font-medium",children:i.name}),e.jsx(he,{className:"max-w-[300px] truncate",children:i.description||"-"}),e.jsx(he,{children:_t.find(m=>m.value===i.category)?.label||i.category}),e.jsx(he,{className:"text-right font-semibold",children:_e(i.price)}),e.jsx(he,{children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(X,{variant:"ghost",size:"icon",onClick:()=>ae(i),className:"h-8 w-8",children:e.jsx(Rt,{className:"h-4 w-4"})}),e.jsx(X,{variant:"ghost",size:"icon",onClick:()=>j(i.id),className:"h-8 w-8 text-destructive hover:text-destructive",children:e.jsx(Ct,{className:"h-4 w-4"})})]})})]},i.id))})]})})})]})]})}),e.jsx(qe,{open:n,onOpenChange:d,children:e.jsxs(Be,{children:[e.jsx(Ve,{children:e.jsx(Ue,{children:E?"Editar Serviço":"Novo Serviço"})}),e.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"name",children:"Nome do Serviço *"}),e.jsx(de,{id:"name",required:!0,value:T.name,onChange:i=>B(m=>({...m,name:i.target.value})),placeholder:"Ex: Consulta Individual"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"description",children:"Descrição"}),e.jsx(de,{id:"description",value:T.description,onChange:i=>B(m=>({...m,description:i.target.value})),placeholder:"Descrição opcional do serviço"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"category",children:"Categoria *"}),e.jsxs(we,{required:!0,value:T.category,onValueChange:i=>B(m=>({...m,category:i})),children:[e.jsx(Ne,{children:e.jsx(Se,{})}),e.jsx(ke,{children:_t.map(i=>e.jsx(oe,{value:i.value,children:i.label},i.value))})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"price",children:"Preço (R$) *"}),e.jsx(de,{id:"price",type:"number",step:"0.01",min:"0",required:!0,value:T.price,onChange:i=>B(m=>({...m,price:i.target.value})),placeholder:"0.00"})]})]}),e.jsxs(ut,{children:[e.jsx(X,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(X,{type:"submit",children:E?"Atualizar":"Salvar"})]})]})]})}),e.jsx(He,{open:!!R,onOpenChange:i=>!i&&j(null),children:e.jsxs(We,{children:[e.jsxs(Ke,{children:[e.jsx(Ge,{children:"Confirmar Exclusão"}),e.jsx(Xe,{children:"Tem certeza que deseja excluir este serviço? Esta ação não pode ser desfeita."})]}),e.jsxs(Je,{children:[e.jsx(Ye,{children:"Cancelar"}),e.jsx(Qe,{onClick:()=>U(R),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}function pa({nutritionistId:t,onUpdate:l}){const{toast:o}=st(),[r,h]=p.useState([]),[f,x]=p.useState(!0),[c,n]=p.useState(null),[d,E]=p.useState(null),[$,R]=p.useState(null),[j,T]=p.useState("");p.useEffect(()=>{t&&B()},[t]);const B=async()=>{if(t){x(!0);try{const i=await is(t);h(i)}catch(i){console.error("Error loading pending payments:",i),o({title:"Erro",description:"Não foi possível carregar os pagamentos pendentes.",variant:"destructive"})}finally{x(!1)}}},V=async i=>{try{await os(i,"paid"),o({title:"Sucesso!",description:"Pagamento confirmado com sucesso."}),n(null),B(),l&&l()}catch{o({title:"Erro",description:"Não foi possível confirmar o pagamento.",variant:"destructive"})}},ne=async i=>{try{await Dt(i),o({title:"Sucesso!",description:"Pagamento cancelado e removido."}),E(null),B(),l&&l()}catch{o({title:"Erro",description:"Não foi possível cancelar o pagamento.",variant:"destructive"})}},ae=async i=>{if(!j){o({title:"Erro",description:"Selecione uma data para reagendar.",variant:"destructive"});return}try{await ls(i,j),o({title:"Sucesso!",description:"Cobrança reagendada com sucesso."}),R(null),T(""),B(),l&&l()}catch{o({title:"Erro",description:"Não foi possível reagendar a cobrança.",variant:"destructive"})}},ie=i=>{const m=ze(i+"T00:00:00");return vs(m)?"Hoje":js(m)?"Ontem":Z(m,"dd 'de' MMMM",{locale:Ee})},U=i=>{const m=ze(i+"T00:00:00"),C=new Date;C.setHours(0,0,0,0);const s=new Date(m);s.setHours(0,0,0,0);const a=C-s;return Math.floor(a/(1e3*60*60*24))};return f||r.length===0?null:e.jsxs(e.Fragment,{children:[e.jsxs(ge,{className:"mb-6 border-2 border-orange-200 dark:border-orange-800 bg-orange-50/50 dark:bg-orange-950/20",children:[e.jsxs(ye,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),e.jsx(be,{className:"text-lg font-semibold text-orange-900 dark:text-orange-100",children:"Pagamentos Pendentes"})]}),e.jsx(De,{className:"text-orange-700 dark:text-orange-300",children:"Consultas realizadas aguardando confirmação de pagamento"})]}),e.jsx(ve,{children:e.jsx("div",{className:"space-y-3",children:r.map(i=>{const m=U(i.transaction_date),C=m>0;return e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 p-4 bg-white dark:bg-gray-900 rounded-lg border border-orange-200 dark:border-orange-800 shadow-sm",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-sm sm:text-base text-foreground truncate",children:i.description||`Consulta com ${i.patient?.name||"Paciente"}`}),C&&e.jsxs(tt,{variant:"destructive",className:"text-xs",children:[m," ",m===1?"dia":"dias"," atrasado"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsx("span",{children:i.patient?.name||"Paciente não identificado"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:ie(i.transaction_date)}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"font-semibold text-orange-600 dark:text-orange-400",children:_e(i.amount)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto",children:[e.jsxs(X,{size:"sm",onClick:()=>n(i.id),className:"flex-1 sm:flex-initial bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(gs,{className:"w-4 h-4 mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Confirmar Pagamento"}),e.jsx("span",{className:"sm:hidden",children:"Confirmar"})]}),e.jsxs(X,{size:"sm",variant:"outline",onClick:()=>R({id:i.id,date:i.transaction_date}),className:"flex-1 sm:flex-initial",children:[e.jsx(Vt,{className:"w-4 h-4 mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Reagendar"}),e.jsx("span",{className:"sm:hidden",children:"Reagendar"})]}),e.jsxs(X,{size:"sm",variant:"outline",onClick:()=>E(i.id),className:"flex-1 sm:flex-initial text-destructive hover:text-destructive hover:bg-destructive/10",children:[e.jsx(Ds,{className:"w-4 h-4 mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Cancelar"}),e.jsx("span",{className:"sm:hidden",children:"Cancelar"})]})]})]},i.id)})})})]}),e.jsx(He,{open:!!c,onOpenChange:i=>!i&&n(null),children:e.jsxs(We,{children:[e.jsxs(Ke,{children:[e.jsx(Ge,{children:"Confirmar Pagamento"}),e.jsx(Xe,{children:"Tem certeza que deseja confirmar este pagamento? Esta ação marcará a transação como paga."})]}),e.jsxs(Je,{children:[e.jsx(Ye,{children:"Cancelar"}),e.jsx(Qe,{onClick:()=>V(c),className:"bg-green-600 hover:bg-green-700",children:"Confirmar Pagamento"})]})]})}),e.jsx(He,{open:!!d,onOpenChange:i=>!i&&E(null),children:e.jsxs(We,{children:[e.jsxs(Ke,{children:[e.jsx(Ge,{children:"Cancelar Pagamento"}),e.jsx(Xe,{children:"Tem certeza que deseja cancelar este pagamento? Esta ação removerá a transação permanentemente."})]}),e.jsxs(Je,{children:[e.jsx(Ye,{children:"Cancelar"}),e.jsx(Qe,{onClick:()=>ne(d),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Cancelar Pagamento"})]})]})}),e.jsx(qe,{open:!!$,onOpenChange:i=>!i&&R(null),children:e.jsxs(Be,{children:[e.jsx(Ve,{children:e.jsx(Ue,{children:"Reagendar Cobrança"})}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"reschedule_date",children:"Nova Data *"}),e.jsx(de,{id:"reschedule_date",type:"date",required:!0,value:j||($?$.date:""),onChange:i=>T(i.target.value),min:Z(new Date,"yyyy-MM-dd")})]})}),e.jsxs(ut,{children:[e.jsx(X,{variant:"outline",onClick:()=>R(null),children:"Cancelar"}),e.jsx(X,{onClick:()=>ae($.id),children:"Reagendar"})]})]})})]})}function ma({nutritionistId:t}){const[l,o]=p.useState([]),[r,h]=p.useState(!0);p.useEffect(()=>{t&&f()},[t]);const f=async()=>{if(t){h(!0);try{const{data:n,error:d}=await Oe.from("financial_transactions").select(`
                    patient_id,
                    amount,
                    patient:user_profiles!financial_transactions_patient_id_fkey(
                        id,
                        name,
                        avatar_url,
                        cpf
                    )
                `).eq("nutritionist_id",t).eq("type","income").eq("status","paid").not("patient_id","is",null);if(d){console.error("Error loading top patients:",d);return}const E={};n.forEach(R=>{if(!R.patient_id)return;const j=R.patient_id;E[j]||(E[j]={patient:R.patient,total:0}),E[j].total+=parseFloat(R.amount||0)});const $=Object.values(E).sort((R,j)=>j.total-R.total).slice(0,5);o($)}catch(n){console.error("Error loading top patients:",n)}finally{h(!1)}}},x=n=>{if(!n)return"?";const d=n.trim().split(" ");return d.length>=2?(d[0][0]+d[d.length-1][0]).toUpperCase():n.substring(0,2).toUpperCase()},c=n=>n===0?"🥇":n===1?"🥈":n===2?"🥉":`#${n+1}`;return r?e.jsxs(ge,{children:[e.jsx(ye,{children:e.jsxs(be,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5"}),"Top Pacientes"]})}),e.jsx(ve,{children:e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Carregando..."})})]}):l.length===0?e.jsxs(ge,{children:[e.jsxs(ye,{children:[e.jsxs(be,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5"}),"Top Pacientes"]}),e.jsx(De,{children:"Maiores contribuidores (LTV)"})]}),e.jsx(ve,{children:e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Nenhum dado disponível"})})]}):e.jsxs(ge,{children:[e.jsxs(ye,{children:[e.jsxs(be,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5 text-yellow-600"}),"Top Pacientes"]}),e.jsx(De,{children:"Maiores contribuidores (LTV - Lifetime Value)"})]}),e.jsx(ve,{children:e.jsx("div",{className:"space-y-3",children:l.map((n,d)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(tt,{variant:d<3?"default":"secondary",className:"w-8 h-8 flex items-center justify-center p-0 text-xs font-bold",children:c(d)})}),e.jsxs(ys,{className:"h-10 w-10 flex-shrink-0",children:[e.jsx(bs,{src:n.patient?.avatar_url,alt:n.patient?.name}),e.jsx(_s,{children:x(n.patient?.name)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm truncate",children:n.patient?.name||"Paciente não identificado"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total investido"})]}),e.jsx("div",{className:"flex-shrink-0 text-right",children:e.jsx("p",{className:"font-bold text-lg text-primary",children:_e(n.total)})})]},n.patient?.id||d))})})]})}function fa(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t||0)}async function xa(t,l,o){const r=new ws("p","mm","a4"),h=r.internal.pageSize.getWidth(),f=r.internal.pageSize.getHeight(),x=20;let c=x;const n=[41,128,185],d=[51,51,51];if(r.setFillColor(...n),r.rect(0,0,h,40,"F"),r.setTextColor(255,255,255),r.setFontSize(20),r.setFont("helvetica","bold"),r.text("RECIBO",h/2,20,{align:"center"}),r.setFontSize(10),r.setFont("helvetica","normal"),r.text("Gerado por HipoZero",h/2,28,{align:"center"}),c=50,r.setTextColor(...d),r.setFontSize(12),r.setFont("helvetica","bold"),r.text("PRESTADOR DE SERVIÇOS",x,c),c+=8,r.setFontSize(10),r.setFont("helvetica","normal"),l?.name&&(r.text(`Nome: ${l.name}`,x,c),c+=6),l?.crn&&(r.text(`CRN: ${l.crn}`,x,c),c+=6),l?.address){const U=l.address;let i="";U.street&&(i+=U.street),U.city&&(i+=i?`, ${U.city}`:U.city),U.state&&(i+=i?` - ${U.state}`:U.state),U.zip&&(i+=i?`, CEP: ${U.zip}`:`CEP: ${U.zip}`),i&&(r.text(`Endereço: ${i}`,x,c),c+=6)}l?.phone&&(r.text(`Telefone: ${l.phone}`,x,c),c+=6),l?.email&&(r.text(`E-mail: ${l.email}`,x,c),c+=6),c+=5,r.setDrawColor(200,200,200),r.line(x,c,h-x,c),c+=10,r.setFontSize(12),r.setFont("helvetica","bold"),r.text("RECIBO DE PAGAMENTO",h/2,c,{align:"center"}),c+=10,r.setFontSize(10),r.setFont("helvetica","normal");const E=o?.name||"Paciente",$=o?.cpf?` (CPF: ${ga(o.cpf)})`:"",R=parseFloat(t.amount||0),j=fa(R).replace("R$","").trim(),T=t.description||"Serviço de nutrição",B=t.transaction_date?Z(new Date(t.transaction_date+"T00:00:00"),"dd 'de' MMMM 'de' yyyy",{locale:Ee}):Z(new Date,"dd 'de' MMMM 'de' yyyy",{locale:Ee}),V=`Recebi de ${E}${$} a importância de ${j} (${va(R)}) referente a ${T}.`,ne=h-x*2;r.splitTextToSize(V,ne).forEach((U,i)=>{r.text(U,x,c),c+=6}),c+=10,r.text(`Data: ${B}`,x,c),c+=15,r.setDrawColor(150,150,150),r.line(x,c,h-x,c),c+=8,r.setFontSize(9),r.setTextColor(150,150,150),r.text("Assinatura do Prestador de Serviços",h/2,c,{align:"center"}),c=f-20,r.setFontSize(8),r.setTextColor(150,150,150),r.text("Este documento foi gerado automaticamente pelo sistema HipoZero",h/2,c,{align:"center"}),r.text("Para fins de comprovação fiscal e reembolso de planos de saúde",h/2,c+5,{align:"center"});const ie=`recibo_${E.replace(/\s+/g,"_")}_${Z(new Date,"yyyy-MM-dd")}.pdf`;r.save(ie)}function ga(t){if(!t)return"";const l=t.replace(/\D/g,"");return l.length!==11?t:l.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}function va(t){const l=["","um","dois","três","quatro","cinco","seis","sete","oito","nove","dez","onze","doze","treze","quatorze","quinze","dezesseis","dezessete","dezoito","dezenove"],o=["","","vinte","trinta","quarenta","cinquenta","sessenta","setenta","oitenta","noventa"],r=["","cento","duzentos","trezentos","quatrocentos","quinhentos","seiscentos","setecentos","oitocentos","novecentos"];if(t===0)return"zero reais";if(t>=1e6)return"valor muito alto";let h="";const f=Math.floor(t),x=Math.round((t-f)*100);return f>0&&(h+=Ae(f,l,o,r),h+=f===1?" real":" reais"),x>0&&(h&&(h+=" e "),h+=Ae(x,l,o,r),h+=x===1?" centavo":" centavos"),h}function Ae(t,l,o,r){if(t===0)return"";if(t<20)return l[t];if(t<100){const h=Math.floor(t/10),f=t%10;return o[h]+(f>0?" e "+l[f]:"")}if(t<1e3){const h=Math.floor(t/100),f=t%100;return h===1&&f===0?"cem":r[h]+(f>0?" e "+Ae(f,l,o,r):"")}if(t<1e6){const h=Math.floor(t/1e3),f=t%1e3;return Ae(h,l,o,r)+" mil"+(f>0?" e "+Ae(f,l,o,r):"")}return""}function ja(t,l="csv"){if(!t||t.length===0)throw new Error("Nenhum registro para exportar");const o=t.map(r=>({Data:r.transaction_date?l(new Date(r.transaction_date+"T00:00:00"),"dd/MM/yyyy",{locale:Ee}):"-",Tipo:r.type==="income"?"Receita":"Despesa",Categoria:r.category||"-",Descrição:r.description||"-","Nome do Paciente":r.patient?.name||"-","CPF do Paciente":r.patient?.cpf?ya(r.patient.cpf):"-","Valor (R$)":parseFloat(r.amount||0).toFixed(2),Status:ba(r.status),"Data de Vencimento":r.due_date?l(new Date(r.due_date+"T00:00:00"),"dd/MM/yyyy",{locale:Ee}):"-"}));if(l==="csv"){const r=Tt.unparse(o,{delimiter:";",encoding:"UTF-8"}),h="\uFEFF",f=new Blob([h+r],{type:"text/csv;charset=utf-8;"}),x=document.createElement("a"),c=URL.createObjectURL(f);x.setAttribute("href",c),x.setAttribute("download",`relatorio_financeiro_${l(new Date,"yyyy-MM-dd")}.csv`),document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(c)}else throw new Error(`Formato ${l} não suportado. Use 'csv'.`)}function ya(t){if(!t)return"";const l=t.replace(/\D/g,"");return l.length!==11?t:l.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}function ba(t){return{paid:"Pago",pending:"Pendente",overdue:"Vencido"}[t]||t}function Za(){const{user:t}=Ut(),{toast:l}=st(),[o,r]=p.useState(new Date),[h,f]=p.useState({income:0,expenses:0,netResult:0,overdue:0}),[x,c]=p.useState([]),[n,d]=p.useState([]),[E,$]=p.useState([]),[R,j]=p.useState([]),[T,B]=p.useState([]),[V,ne]=p.useState([]),[ae,ie]=p.useState(!0),[U,i]=p.useState(!1),[m,C]=p.useState(!1),[s,a]=p.useState(null),[u,g]=p.useState(null),[v,P]=p.useState({type:null,status:null,search:null}),[L,le]=p.useState(1e4),ee=p.useCallback(async()=>{if(t?.id){ie(!0);try{const _=Ss(o),I=await cs(_);f(I);const N=o.getFullYear(),k=o.getMonth()+1,z=await ds(t.id,{...v,month:k,year:N},{page:1,pageSize:100},{field:"transaction_date",order:"desc"});c(z.data);const[y,W,Y]=await Promise.all([us(t.id,_,"day"),hs(t.id,_),ps(t.id,new Date)]);if(j(y),B(W),ne(Y),n.length===0){const O=await ms(t.id);d(O)}if(E.length===0){const O=await lt(t.id);$(O)}}catch(_){console.error("Error loading financial data:",_),l({title:"Erro",description:"Não foi possível carregar os dados financeiros.",variant:"destructive"})}finally{ie(!1)}}},[t,o,v,n.length,l]);p.useEffect(()=>{ee()},[ee]);const F=()=>{a(null),i(!0)},H=_=>{a(_),i(!0)},w=async _=>{try{if(!t?.id)return;if(_.multiple&&_.transactions){const I=_.transactions.map(N=>({...N,nutritionist_id:t.id}));await fs(I),l({title:"Sucesso!",description:`${_.transactions.length} parcelas criadas com sucesso.`})}else await xs({..._,nutritionist_id:t.id}),l({title:"Sucesso!",description:`Transação ${_.id?"atualizada":"criada"} com sucesso.`});i(!1),a(null),ee()}catch(I){console.error("Error saving transaction:",I),l({title:"Erro",description:`Não foi possível salvar a transação: ${I.message}`,variant:"destructive"})}},te=async _=>{try{await Dt(_),l({title:"Sucesso!",description:"Transação deletada com sucesso."}),g(null),ee()}catch(I){console.error("Error deleting transaction:",I),l({title:"Erro",description:"Não foi possível deletar a transação.",variant:"destructive"})}},S=()=>{const _=x.map(y=>({Data:Z(new Date(y.transaction_date+"T00:00:00"),"dd/MM/yyyy"),Tipo:y.type==="income"?"Receita":"Despesa",Descrição:y.description,Categoria:y.category||"-",Paciente:y.patient?.name||"-",Valor:y.amount.toFixed(2),Status:y.status==="paid"?"Pago":y.status==="pending"?"Pendente":"Vencido"})),I=Tt.unparse(_),N=new Blob([I],{type:"text/csv;charset=utf-8;"}),k=document.createElement("a"),z=URL.createObjectURL(N);k.setAttribute("href",z),k.setAttribute("download",`financeiro_hipozero_${Z(o,"yyyy-MM")}.csv`),document.body.appendChild(k),k.click(),document.body.removeChild(k),l({title:"Exportado!",description:"Arquivo CSV baixado com sucesso."})},M=()=>{try{ja(x,"csv"),l({title:"Exportado!",description:"Relatório completo exportado para contador."})}catch(_){console.error("Error exporting report:",_),l({title:"Erro",description:_.message||"Não foi possível exportar o relatório.",variant:"destructive"})}},b=async _=>{if(t?.id)try{const{data:I,error:N}=await Oe.from("user_profiles").select("name, crn, address, phone, email").eq("id",t.id).single();if(N)throw new Error("Não foi possível carregar os dados do nutricionista.");let k=null;if(_.patient_id){const{data:z,error:y}=await Oe.from("user_profiles").select("name, cpf").eq("id",_.patient_id).single();!y&&z&&(k=z)}await xa(_,I,k),l({title:"Sucesso!",description:"Recibo gerado e baixado com sucesso."})}catch(I){console.error("Error generating receipt:",I),l({title:"Erro",description:I.message||"Não foi possível gerar o recibo.",variant:"destructive"})}},J=()=>{try{Cs(x,h,Z(o,"MMMM yyyy")),l({title:"Exportado!",description:"Arquivo PDF gerado com sucesso."})}catch(_){console.error("Error exporting PDF:",_),l({title:"Erro",description:"Não foi possível gerar o PDF.",variant:"destructive"})}},K=p.useMemo(()=>L<=0?0:Math.min(h.income/L*100,100),[h.income,L]);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("main",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:e.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Financeiro"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Gerencie receitas, despesas e acompanhe o fluxo de caixa"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(X,{onClick:()=>C(!0),variant:"outline",size:"lg",children:[e.jsx(Wt,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Gerenciar Serviços"}),e.jsx("span",{className:"sm:hidden",children:"Serviços"})]}),e.jsxs(X,{onClick:M,variant:"outline",size:"lg",children:[e.jsx($s,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportar Relatório"}),e.jsx("span",{className:"sm:hidden",children:"Relatório"})]}),e.jsxs(X,{onClick:F,size:"lg",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Nova Transação"]})]})]}),e.jsx(pa,{nutritionistId:t?.id,onUpdate:ee}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[e.jsx(de,{type:"month",value:Z(o,"yyyy-MM"),onChange:_=>r(new Date(_.target.value+"-02")),className:"w-full sm:w-auto"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(X,{onClick:J,variant:"outline",className:"flex-1 sm:flex-initial",children:[e.jsx(Kt,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportar PDF"}),e.jsx("span",{className:"sm:hidden",children:"PDF"})]}),e.jsxs(X,{onClick:S,variant:"outline",className:"flex-1 sm:flex-initial",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportar CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(Ms,{summary:h,loading:ae})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(As,{cashFlowData:R,expenseDistribution:T,projectedCashFlow:V,loading:ae})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ge,{children:[e.jsxs(ye,{children:[e.jsxs(be,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-5 h-5"}),"Meta Financeira"]}),e.jsx(De,{children:"Meta mensal de receita"})]}),e.jsxs(ve,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"monthlyGoal",className:"text-xs text-muted-foreground mb-1",children:"Meta Mensal (R$)"}),e.jsx(de,{id:"monthlyGoal",type:"number",step:"100",min:"0",value:L,onChange:_=>le(parseFloat(_.target.value)||0),className:"mb-3"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progresso"}),e.jsxs("span",{className:"font-semibold",children:[K.toFixed(1),"%"]})]}),e.jsx(Xt,{value:K,className:"h-2"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Receita Atual"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",h.income.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Meta"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",L.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[e.jsx("span",{className:"text-muted-foreground",children:"Faltam"}),e.jsxs("span",{className:`font-semibold ${L-h.income>0?"text-orange-600":"text-green-600"}`,children:["R$ ",Math.max(0,L-h.income).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})]}),e.jsx(ma,{nutritionistId:t?.id})]})]}),e.jsx(Is,{transactions:x,loading:ae,onEdit:H,onDelete:_=>g(_),onGenerateReceipt:b,filters:v,onFiltersChange:P})]})}),e.jsx(ua,{open:U,onOpenChange:i,transaction:s,patients:n,services:E,nutritionistId:t?.id,onSave:w}),e.jsx(ha,{open:m,onOpenChange:_=>{C(_),!_&&t?.id&&lt(t.id).then($).catch(console.error)},nutritionistId:t?.id}),e.jsx(He,{open:!!u,onOpenChange:_=>!_&&g(null),children:e.jsxs(We,{children:[e.jsxs(Ke,{children:[e.jsx(Ge,{children:"Confirmar Exclusão"}),e.jsx(Xe,{children:"Tem certeza que deseja excluir esta transação? Esta ação não pode ser desfeita."})]}),e.jsxs(Je,{children:[e.jsx(Ye,{children:"Cancelar"}),e.jsx(Qe,{onClick:()=>te(u),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}export{Za as default};
