import{j as e,D as Le,x as $e,B as o,y as Ue,z as te,F as He,ai as V,aj as L,ak as $,al as U,au as H,C as c,c as D,d as _,e as n,u as Re,a as Xe,r as t,s as P,m as Ze,X as Je,L as q,M as re}from"./index-BiAQYbha.js";import{I as Ke}from"./input-BWLOFr5y.js";import{B as f}from"./badge-CcZw3qQX.js";import{S as Qe,a as We,b as Ye,c as es,d as ss}from"./select-DidxWI9m.js";import{T as Fe,a as Se,b as A,c as E}from"./tabs-EC6-lNjJ.js";import{M as as}from"./more-vertical-C6wMBK2B.js";import{E as ts}from"./eye-DqUfq7XE.js";import{P as rs}from"./pen-square-3ra_SUmX.js";import{a as ls,S as we}from"./SmartFoodForm-CapPHSxd.js";import{P as R,D as le}from"./package-afsD4twG.js";import{I as is}from"./info-BEaHHfAz.js";import{u as cs}from"./useDebounce-CLxM-8b7.js";import{P as ie}from"./plus-D99rBKhY.js";import{S as ns}from"./search-CYgbXmYT.js";import{F as ds}from"./filter-B2UsThBu.js";import{C as ce}from"./chevron-left-DllGgq14.js";import"./extends-CF3RwP-h.js";import"./label-DjCbjHjc.js";import"./progress-Tq8EYPZY.js";import"./foodService-D2d0oeFz.js";import"./check-circle-2-B0A5rrvU.js";const ne=({food:s,isCustom:d=!1,onView:x,onEdit:u,onDelete:h})=>{const p={TACO:"TACO",IBGE:"IBGE",USDA:"USDA",Tucunduva:"Tucunduva",TBCA:"TBCA",custom:"Personalizado"},X={TACO:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 border-blue-200 dark:border-blue-800",IBGE:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 border-green-200 dark:border-green-800",USDA:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300 border-purple-200 dark:border-purple-800",Tucunduva:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300 border-orange-200 dark:border-orange-800",TBCA:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300 border-pink-200 dark:border-pink-800",custom:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800"};return e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg hover:bg-muted/50 transition-colors group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-sm text-foreground truncate",children:s.name}),s.source&&e.jsx(f,{variant:"outline",className:`${X[s.source]||"bg-gray-100 text-gray-700"} text-[10px] px-1.5 py-0.5 h-auto font-medium flex-shrink-0`,children:p[s.source]||s.source})]}),s.group&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.group})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"text-center min-w-[50px]",children:[e.jsx("p",{className:"text-xs font-semibold text-red-600 dark:text-red-400",children:s.calories?Math.round(s.calories):"—"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"kcal"})]}),e.jsxs("div",{className:"text-center min-w-[45px]",children:[e.jsx("p",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400",children:s.protein?s.protein.toFixed(1):"—"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"P"})]}),e.jsxs("div",{className:"text-center min-w-[45px]",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:s.carbs?s.carbs.toFixed(1):"—"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"C"})]}),e.jsxs("div",{className:"text-center min-w-[45px]",children:[e.jsx("p",{className:"text-xs font-semibold text-orange-600 dark:text-orange-400",children:s.fat?s.fat.toFixed(1):"—"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"G"})]})]}),e.jsxs("div",{className:"flex sm:hidden items-center gap-2 flex-shrink-0",children:[e.jsxs("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400",children:[s.calories?Math.round(s.calories):"—","kcal"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["P:",s.protein?s.protein.toFixed(1):"—"," C:",s.carbs?s.carbs.toFixed(1):"—"," G:",s.fat?s.fat.toFixed(1):"—"]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(Le,{children:[e.jsx($e,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(as,{className:"h-4 w-4"})})}),e.jsxs(Ue,{align:"end",children:[e.jsxs(te,{onClick:()=>x&&x(s),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Ver Detalhes"]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs(te,{onClick:()=>u&&u(s),children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"Editar"]}),e.jsxs(te,{onClick:()=>h&&h(s),className:"text-destructive focus:text-destructive",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})})]})},os=({food:s,open:d,onOpenChange:x})=>{if(!s)return null;const u={TACO:"TACO - Tabela Brasileira de Composição de Alimentos",IBGE:"IBGE - Instituto Brasileiro de Geografia e Estatística",USDA:"USDA - United States Department of Agriculture",Tucunduva:"Tucunduva",TBCA:"TBCA - Tabela Brasileira de Composição de Alimentos",custom:"Personalizado"},h={TACO:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",IBGE:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",USDA:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",Tucunduva:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",TBCA:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300",custom:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300"};return e.jsx(V,{open:d,onOpenChange:x,children:e.jsxs(L,{className:"max-w-4xl max-h-[90vh]",children:[e.jsxs($,{children:[e.jsxs(U,{className:"text-xl flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),s.name]}),e.jsxs(H,{children:[s.group&&e.jsx("span",{className:"block",children:s.group}),s.source&&e.jsx(f,{variant:"outline",className:`${h[s.source]||""} mt-2`,children:u[s.source]||s.source})]})]}),e.jsx(ls,{className:"max-h-[70vh] pr-4",children:e.jsxs(Fe,{defaultValue:"macros",className:"w-full",children:[e.jsxs(Se,{className:"grid w-full grid-cols-3",children:[e.jsx(A,{value:"macros",children:"Macronutrientes"}),e.jsx(A,{value:"micros",children:"Micronutrientes"}),e.jsx(A,{value:"info",children:"Informações"})]}),e.jsxs(E,{value:"macros",className:"space-y-4 mt-4",children:[e.jsxs(c,{children:[e.jsx(D,{children:e.jsx(_,{className:"text-base",children:"Valores por 100g"})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Calorias"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:s.calories?Math.round(s.calories):"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"kcal"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Proteína"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:s.protein?s.protein.toFixed(1):"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"g"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Carboidratos"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.carbs?s.carbs.toFixed(1):"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"g"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-950/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Gorduras"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:s.fat?s.fat.toFixed(1):"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"g"})]})]})})]}),(s.saturated_fat||s.trans_fat||s.monounsaturated_fat||s.polyunsaturated_fat||s.cholesterol||s.fiber||s.sugar||s.sodium)&&e.jsxs(c,{children:[e.jsx(D,{children:e.jsx(_,{className:"text-base",children:"Gorduras Detalhadas e Outros"})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.fiber&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fibra"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.fiber.toFixed(1)," g"]})]}),s.sugar&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Açúcares"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.sugar.toFixed(1)," g"]})]}),s.saturated_fat&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gordura Saturada"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.saturated_fat.toFixed(1)," g"]})]}),s.trans_fat&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gordura Trans"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.trans_fat.toFixed(1)," g"]})]}),s.monounsaturated_fat&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gordura Monoinsaturada"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.monounsaturated_fat.toFixed(1)," g"]})]}),s.polyunsaturated_fat&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gordura Poliinsaturada"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.polyunsaturated_fat.toFixed(1)," g"]})]}),s.cholesterol&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Colesterol"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.cholesterol.toFixed(0)," mg"]})]}),s.sodium&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sódio"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.sodium.toFixed(0)," mg"]})]})]})})]})]}),e.jsx(E,{value:"micros",className:"space-y-4 mt-4",children:s.calcium||s.iron||s.magnesium||s.phosphorus||s.potassium||s.zinc||s.vitamin_a||s.vitamin_c||s.vitamin_d||s.vitamin_e||s.vitamin_b12||s.folate?e.jsxs(e.Fragment,{children:[(s.calcium||s.iron||s.magnesium||s.phosphorus||s.potassium||s.zinc)&&e.jsxs(c,{children:[e.jsx(D,{children:e.jsx(_,{className:"text-base",children:"Minerais (mg por 100g)"})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.calcium&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cálcio"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.calcium.toFixed(1)," mg"]})]}),s.iron&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ferro"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.iron.toFixed(1)," mg"]})]}),s.magnesium&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Magnésio"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.magnesium.toFixed(1)," mg"]})]}),s.phosphorus&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fósforo"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.phosphorus.toFixed(1)," mg"]})]}),s.potassium&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Potássio"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.potassium.toFixed(1)," mg"]})]}),s.zinc&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Zinco"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.zinc.toFixed(1)," mg"]})]})]})})]}),(s.vitamin_a||s.vitamin_c||s.vitamin_d||s.vitamin_e||s.vitamin_b12||s.folate)&&e.jsxs(c,{children:[e.jsx(D,{children:e.jsx(_,{className:"text-base",children:"Vitaminas (mg por 100g)"})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.vitamin_a&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vitamina A"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.vitamin_a.toFixed(1)," mg"]})]}),s.vitamin_c&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vitamina C"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.vitamin_c.toFixed(1)," mg"]})]}),s.vitamin_d&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vitamina D"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.vitamin_d.toFixed(1)," mg"]})]}),s.vitamin_e&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vitamina E"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.vitamin_e.toFixed(1)," mg"]})]}),s.vitamin_b12&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vitamina B12"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.vitamin_b12.toFixed(1)," mg"]})]}),s.folate&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Folato"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.folate.toFixed(1)," mg"]})]})]})})]})]}):e.jsx(c,{children:e.jsxs(n,{className:"py-8 text-center",children:[e.jsx(is,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum micronutriente cadastrado para este alimento"})]})})}),e.jsx(E,{value:"info",className:"space-y-4 mt-4",children:e.jsxs(c,{children:[e.jsx(D,{children:e.jsx(_,{className:"text-base",children:"Informações Gerais"})}),e.jsxs(n,{className:"space-y-4",children:[s.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Descrição"}),e.jsx("p",{className:"text-sm",children:s.description})]}),s.preparation&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Modo de Preparo"}),e.jsx("p",{className:"text-sm",children:s.preparation})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Porção Padrão"}),e.jsxs("p",{className:"text-sm font-semibold",children:[s.portion_size||100,"g"]})]}),s.source&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Fonte"}),e.jsx(f,{variant:"outline",className:h[s.source],children:u[s.source]||s.source})]})]}),s.food_measures&&s.food_measures.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Medidas Caseiras Cadastradas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.food_measures.map(p=>e.jsxs(f,{variant:"outline",children:[p.measure_label," (",p.quantity_grams,"g)"]},p.id))})]})]})]})})]})})]})})},C=20,As=()=>{const{user:s}=Re(),{toast:d}=Xe(),[x,u]=t.useState([]),[h,p]=t.useState([]),[X,de]=t.useState(!0),[Z,oe]=t.useState(""),[i,Te]=t.useState("all"),[De,_e]=t.useState(null),[Pe,me]=t.useState(!1),[Ae,M]=t.useState(!1),[Ee,J]=t.useState(!1),[xe,ue]=t.useState(null),[Me,z]=t.useState(!1),[K,Q]=t.useState(null),[N,b]=t.useState(0),[k,W]=t.useState(0),[w,he]=t.useState(0),[B,pe]=t.useState(0),[y,je]=t.useState(!1),[Y,ge]=t.useState(!1),v=cs(Z,300),ze=[{value:"all",label:"Todas as Fontes"},{value:"custom",label:"Meus Alimentos Personalizados"},{value:"TACO",label:"TACO"},{value:"IBGE",label:"IBGE"},{value:"USDA",label:"USDA"},{value:"Tucunduva",label:"Tucunduva"},{value:"TBCA",label:"TBCA"}],j=t.useCallback(async(a=0,r=!1)=>{if(i!=="all"&&i!=="custom"){r||(u([]),he(0));return}je(!0);try{const l=a*C;let g=P.from("foods").select("*, food_measures(*)",{count:"exact"}).eq("is_active",!0).or(`source.eq.custom,nutritionist_id.eq.${s.id}`).order("name",{ascending:!0}).range(l,l+C-1);if(v.trim()){const m=v.toLowerCase();g=g.or(`name.ilike.%${m}%,group.ilike.%${m}%,description.ilike.%${m}%`)}const{data:S,error:T,count:ae}=await g;if(T)throw T;u(r?m=>[...m,...S||[]]:S||[]),he(ae||0)}catch(l){console.error("Erro ao buscar alimentos personalizados:",l),d({title:"Erro",description:"Não foi possível carregar os alimentos personalizados.",variant:"destructive"})}finally{je(!1)}},[s.id,v,i,d]),O=t.useCallback(async(a=0,r=!1)=>{if(i==="custom"){r||(p([]),pe(0));return}ge(!0);try{const l=a*C;let g=P.from("foods").select("*, food_measures(*)",{count:"exact"}).eq("is_active",!0).neq("source","custom").is("nutritionist_id",null).order("name",{ascending:!0}).range(l,l+C-1);if(i!=="all"&&(g=g.eq("source",i)),v.trim()){const m=v.toLowerCase();g=g.or(`name.ilike.%${m}%,group.ilike.%${m}%,description.ilike.%${m}%`)}const{data:S,error:T,count:ae}=await g;if(T)throw T;p(r?m=>[...m,...S||[]]:S||[]),pe(ae||0)}catch(l){console.error("Erro ao buscar alimentos públicos:",l),d({title:"Erro",description:"Não foi possível carregar os alimentos públicos.",variant:"destructive"})}finally{ge(!1)}},[v,i,d]),G=t.useCallback(async()=>{try{const[a,r]=await Promise.all([P.from("foods").select("id",{count:"exact",head:!0}).eq("is_active",!0).or(`source.eq.custom,nutritionist_id.eq.${s.id}`),P.from("foods").select("id",{count:"exact",head:!0}).eq("is_active",!0).neq("source","custom").is("nutritionist_id",null)]);return{custom:a.count||0,public:r.count||0}}catch(a){return console.error("Erro ao buscar estatísticas:",a),{custom:0,public:0}}},[s.id]),[Ne,I]=t.useState({custom:0,public:0});t.useEffect(()=>{(async()=>{de(!0);const r=await G();I(r),await Promise.all([j(0,!1),O(0,!1)]),de(!1)})()},[]),t.useEffect(()=>{b(0),W(0),(async()=>{await Promise.all([j(0,!1),O(0,!1)])})()},[v,i]);const ee=a=>{_e(a),me(!0)},be=a=>{ue(a),J(!0)},ve=a=>{Q(a),z(!0)},Be=async()=>{if(K)try{const{error:a}=await P.from("foods").delete().eq("id",K.id);if(a)throw a;d({title:"Sucesso!",description:"Alimento excluído com sucesso."}),b(0),j(0,!1);const r=await G();I(r),z(!1),Q(null)}catch(a){console.error("Erro ao excluir alimento:",a),d({title:"Erro",description:"Não foi possível excluir o alimento.",variant:"destructive"})}},Oe=async()=>{M(!1),b(0),await j(0,!1);const a=await G();I(a),d({title:"Sucesso!",description:"Alimento criado com sucesso."})},Ge=async()=>{J(!1),ue(null),b(0),await j(0,!1);const a=await G();I(a),d({title:"Sucesso!",description:"Alimento atualizado com sucesso."})},F=Math.ceil(w/C),se=Math.ceil(B/C),fe=N<F-1,ye=N>0,Ie=k<se-1,qe=k>0,Ce=a=>{const r=Math.ceil(a.length/2);return[a.slice(0,r),a.slice(r)]},ke=t.useMemo(()=>Ce(x),[x]),Ve=t.useMemo(()=>Ce(h),[h]);return e.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[e.jsxs(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-7xl mx-auto w-full px-4 md:px-8 pt-8 pb-12 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(le,{className:"w-8 h-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Banco de Alimentos"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie seus alimentos personalizados e consulte o banco público de alimentos"})]}),e.jsxs(o,{onClick:()=>M(!0),size:"lg",children:[e.jsx(ie,{className:"w-5 h-5 mr-2"}),"Novo Alimento"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Meus Alimentos Personalizados"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:Ne.custom})]}),e.jsx(R,{className:"w-10 h-10 text-primary opacity-50"})]})})}),e.jsx(c,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Banco de Dados Público"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:Ne.public})]}),e.jsx(le,{className:"w-10 h-10 text-primary opacity-50"})]})})})]}),e.jsx(c,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ns,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),e.jsx(Ke,{placeholder:"Buscar alimento por nome, grupo ou descrição...",value:Z,onChange:a=>oe(a.target.value),className:"pl-10"})]}),e.jsxs(Qe,{value:i,onValueChange:Te,children:[e.jsxs(We,{className:"w-full sm:w-[250px]",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),e.jsx(Ye,{placeholder:"Filtrar por fonte"})]}),e.jsx(es,{children:ze.map(a=>e.jsx(ss,{value:a.value,children:a.label},a.value))})]})]}),Z&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(f,{variant:"outline",children:[w+B," resultado(s) encontrado(s)"]}),e.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>oe(""),children:[e.jsx(Je,{className:"w-4 h-4 mr-1"}),"Limpar busca"]})]})]})})}),X?e.jsx(c,{children:e.jsx(n,{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(q,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando alimentos..."})]})})}):e.jsxs(Fe,{defaultValue:"all",className:"w-full",children:[e.jsxs(Se,{className:"grid w-full grid-cols-2",children:[e.jsxs(A,{value:"all",children:["Todos (",w+B,")"]}),e.jsxs(A,{value:"custom",children:["Meus Alimentos (",w,")"]})]}),e.jsxs(E,{value:"all",className:"space-y-6 mt-6",children:[(i==="all"||i==="custom")&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5 text-emerald-600"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Meus Alimentos Personalizados"}),e.jsx(f,{variant:"outline",className:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300",children:w})]})}),y?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(q,{className:"w-6 h-6 animate-spin text-primary"})}):x.length===0?e.jsx(c,{children:e.jsx(n,{className:"py-8 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum alimento personalizado encontrado"})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:ke.map((a,r)=>e.jsx("div",{className:"space-y-2",children:a.map(l=>e.jsx(ne,{food:l,isCustom:!0,onView:ee,onEdit:be,onDelete:ve},l.id))},r))}),F>1&&e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Página ",N+1," de ",F]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{b(a=>Math.max(0,a-1)),j(Math.max(0,N-1),!1)},disabled:!ye||y,children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),"Anterior"]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{b(a=>a+1),j(N+1,!1)},disabled:!fe||y,children:["Próxima",e.jsx(re,{className:"w-4 h-4 ml-1"})]})]})]})]})]}),(i==="all"||i!=="custom")&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Banco de Dados Público"}),e.jsx(f,{variant:"outline",children:B})]})}),Y?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(q,{className:"w-6 h-6 animate-spin text-primary"})}):h.length===0?e.jsx(c,{children:e.jsx(n,{className:"py-8 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum alimento público encontrado"})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Ve.map((a,r)=>e.jsx("div",{className:"space-y-2",children:a.map(l=>e.jsx(ne,{food:l,isCustom:!1,onView:ee},l.id))},r))}),se>1&&e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Página ",k+1," de ",se]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{W(a=>Math.max(0,a-1)),O(Math.max(0,k-1),!1)},disabled:!qe||Y,children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),"Anterior"]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{W(a=>a+1),O(k+1,!1)},disabled:!Ie||Y,children:["Próxima",e.jsx(re,{className:"w-4 h-4 ml-1"})]})]})]})]})]})]}),e.jsx(E,{value:"custom",className:"space-y-6 mt-6",children:y?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(q,{className:"w-8 h-8 animate-spin text-primary"})}):x.length===0?e.jsx(c,{children:e.jsxs(n,{className:"py-12 text-center",children:[e.jsx(R,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Você ainda não criou nenhum alimento personalizado"}),e.jsxs(o,{onClick:()=>M(!0),children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Criar Primeiro Alimento"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:ke.map((a,r)=>e.jsx("div",{className:"space-y-2",children:a.map(l=>e.jsx(ne,{food:l,isCustom:!0,onView:ee,onEdit:be,onDelete:ve},l.id))},r))}),F>1&&e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Página ",N+1," de ",F]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{b(a=>Math.max(0,a-1)),j(Math.max(0,N-1),!1)},disabled:!ye||y,children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),"Anterior"]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{b(a=>a+1),j(N+1,!1)},disabled:!fe||y,children:["Próxima",e.jsx(re,{className:"w-4 h-4 ml-1"})]})]})]})]})})]})]}),e.jsx(os,{food:De,open:Pe,onOpenChange:me}),e.jsx(V,{open:Ae,onOpenChange:M,children:e.jsxs(L,{className:"max-w-4xl max-h-[95vh] overflow-y-auto",children:[e.jsxs($,{children:[e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5"}),"Novo Alimento Personalizado"]}),e.jsx(H,{children:"Crie um alimento customizado com busca por código de barras e cálculo automático"})]}),e.jsx(we,{mode:"full",onSuccess:Oe})]})}),e.jsx(V,{open:Ee,onOpenChange:J,children:e.jsxs(L,{className:"max-w-4xl max-h-[95vh] overflow-y-auto",children:[e.jsxs($,{children:[e.jsx(U,{className:"flex items-center gap-2",children:"Editar Alimento"}),e.jsx(H,{children:"Edite as informações nutricionais e medidas caseiras"})]}),xe&&e.jsx(we,{mode:"full",initialData:xe,onSuccess:Ge})]})}),e.jsx(V,{open:Me,onOpenChange:z,children:e.jsxs(L,{children:[e.jsxs($,{children:[e.jsx(U,{children:"Confirmar Exclusão"}),e.jsxs(H,{children:['Tem certeza que deseja excluir o alimento "',K?.name,'"? Esta ação não pode ser desfeita.']})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(o,{variant:"outline",onClick:()=>{z(!1),Q(null)},children:"Cancelar"}),e.jsx(o,{variant:"destructive",onClick:Be,children:"Excluir"})]})]})})]})};export{As as default};
