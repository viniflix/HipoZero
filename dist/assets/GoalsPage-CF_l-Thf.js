import{as as we,b as ve,a as ye,r as i,s as W,j as e,B as c,T as x,C as X,c as J,d as K,w as te,X as Z,e as Q,S as N,v as Y,R as z,ai as _e,aj as Ce,ak as De,al as Pe,au as Se,an as Fe,A as ke,h as Me,i as Ae,k as Ee,l as ze,n as Ge,o as Ie,p as Te,ar as Re}from"./index-DAnFA-vR.js";import{I as D}from"./input-DUAsZTmk.js";import{L as b}from"./label-CRD6KkKi.js";import{S as Ve,a as Be,b as Le,c as Oe,d as P}from"./select-Bw2NoIC6.js";import{T as qe}from"./textarea-DvancOMP.js";import{B as G}from"./badge-CoF8sIBu.js";import{P as Ue}from"./progress-7LuGSdbU.js";import{A as ae,a as re}from"./alert-DFufVzB8.js";import{g as He,c as $e,d as We,e as Xe,f as Je,h as Ke,a as Qe,b as Ye,p as Ze,i as es,u as ss,j as ts}from"./goals-queries-DK7DqxJw.js";import{A as as}from"./arrow-left-Dqj9t82L.js";import{F as ie}from"./flame-B_awT58i.js";import{C as S}from"./check-circle-2-7NM9eyjp.js";import{A as j}from"./activity-Don1nhDD.js";import{A as le}from"./alert-circle-D5CQB-DR.js";import{T as oe}from"./trending-down-p6xMr0ur.js";import{P as ne}from"./pause-Csr5z5cF.js";import"./extends-CF3RwP-h.js";const ys=()=>{const{patientId:t}=we(),w=ve(),{toast:l}=ye(),[m,v]=i.useState(!0),[u,p]=i.useState(!1),[_,I]=i.useState(""),[F,T]=i.useState(null),[o,de]=i.useState(null),[R,me]=i.useState([]),[V,C]=i.useState(!1),[a,k]=i.useState({goal_type:"weight_loss",title:"",description:"",initial_weight:"",target_weight:"",start_date:new Date().toISOString().split("T")[0],target_date:""}),[d,B]=i.useState(null),[L,ee]=i.useState(!1),[h,O]=i.useState(null),[xe,M]=i.useState(!1),[A,q]=i.useState(""),[he,U]=i.useState(!1);i.useEffect(()=>{(async()=>{const{data:{user:r}}=await W.auth.getUser();r&&T(r.id)})()},[]),i.useEffect(()=>{y()},[t]);const y=async()=>{v(!0);try{const{data:s}=await W.from("user_profiles").select("name").eq("id",t).single();s&&I(s.name);const{data:r}=await He(t);de(r);const{data:n}=await $e(t,{status:["completed","cancelled","paused"]});if(me(n||[]),!r){const{data:f}=await W.from("growth_records").select("weight").eq("patient_id",t).order("record_date",{ascending:!1}).limit(1).maybeSingle();f&&f.weight&&k(E=>({...E,initial_weight:f.weight.toString()})),C(!0)}}catch(s){console.error("Erro ao carregar dados:",s),l({title:"Erro",description:"NÃ£o foi possÃ­vel carregar os dados das metas.",variant:"destructive"})}finally{v(!1)}};i.useEffect(()=>{const r=setTimeout(async()=>{if(!a.initial_weight||!a.target_weight||!a.start_date||!a.target_date){B(null);return}ee(!0);try{const n=await Je(a,t);B(n)}catch(n){console.error("Erro ao calcular viabilidade:",n)}finally{ee(!1)}},500);return()=>clearTimeout(r)},[a,t]),i.useEffect(()=>{if(a.goal_type&&a.initial_weight&&a.target_weight){const s=Math.abs(parseFloat(a.target_weight)-parseFloat(a.initial_weight)),r=a.goal_type;let n="";r==="weight_loss"?n=`Perder ${s.toFixed(1)}kg`:r==="weight_gain"?n=`Ganhar ${s.toFixed(1)}kg`:r==="weight_maintenance"?n=`Manter ${a.initial_weight}kg`:n="Meta personalizada",k(f=>({...f,title:n}))}},[a.goal_type,a.initial_weight,a.target_weight]),i.useEffect(()=>{if(a.initial_weight&&a.target_weight){const s=parseFloat(a.initial_weight),r=parseFloat(a.target_weight),n=r-s;if(!isNaN(s)&&!isNaN(r)&&n!==0){const f=Xe(n),E=We(n),se=new Date(a.start_date),H=new Date(se);H.setDate(H.getDate()+f);const $=new Date(se);$.setDate($.getDate()+E),O({minDays:f,idealDays:E,minDate:H.toISOString().split("T")[0],idealDate:$.toISOString().split("T")[0],weightChange:Math.abs(n)})}else O(null)}else O(null)},[a.initial_weight,a.target_weight,a.start_date]);const g=(s,r)=>{k(n=>({...n,[s]:r}))},ge=async()=>{if(!F){l({title:"Erro",description:"UsuÃ¡rio nÃ£o autenticado.",variant:"destructive"});return}if(!a.title||!a.initial_weight||!a.target_weight||!a.target_date){l({title:"Campos obrigatÃ³rios",description:"Preencha todos os campos obrigatÃ³rios.",variant:"destructive"});return}p(!0);try{const{data:s,error:r}=await Ke({...a,initial_weight:parseFloat(a.initial_weight),target_weight:parseFloat(a.target_weight)},t,F);if(r)throw r;l({title:"Meta criada!",description:"Meta criada com sucesso.",variant:"success"}),C(!1),k({goal_type:"weight_loss",title:"",description:"",initial_weight:"",target_weight:"",start_date:new Date().toISOString().split("T")[0],target_date:""}),B(null),await y()}catch(s){console.error("Erro ao criar meta:",s),l({title:"Erro",description:s.message||"NÃ£o foi possÃ­vel criar a meta.",variant:"destructive"})}finally{p(!1)}},fe=async()=>{if(!(!A||!o)){p(!0);try{const{error:s}=await ss(o.id,parseFloat(A));if(s)throw s;l({title:"Progresso atualizado!",description:"Peso atualizado com sucesso.",variant:"success"}),M(!1),q(""),await y()}catch(s){console.error("Erro ao atualizar progresso:",s),l({title:"Erro",description:"NÃ£o foi possÃ­vel atualizar o progresso.",variant:"destructive"})}finally{p(!1)}}},ue=async()=>{if(o&&window.confirm("Tem certeza que deseja marcar esta meta como concluÃ­da?"))try{const{error:s}=await es(o.id);if(s)throw s;l({title:"Meta concluÃ­da!",description:"ParabÃ©ns! Meta foi marcada como concluÃ­da.",variant:"success"}),await y()}catch(s){console.error("Erro ao completar meta:",s),l({title:"Erro",description:"NÃ£o foi possÃ­vel completar a meta.",variant:"destructive"})}},pe=async()=>{if(o)try{const{error:s}=await Ze(o.id);if(s)throw s;l({title:"Meta pausada",description:"Meta foi pausada com sucesso.",variant:"success"}),await y()}catch(s){console.error("Erro ao pausar meta:",s),l({title:"Erro",description:"NÃ£o foi possÃ­vel pausar a meta.",variant:"destructive"})}},be=async()=>{if(o)try{const{error:s}=await ts(o.id,null);if(s)throw s;l({title:"Meta cancelada",description:"Meta foi cancelada com sucesso.",variant:"success"}),U(!1),await y()}catch(s){console.error("Erro ao cancelar meta:",s),l({title:"Erro",description:"NÃ£o foi possÃ­vel cancelar a meta.",variant:"destructive"})}},je=s=>s>=4?"text-green-600 bg-green-50 border-green-200":s>=3?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200",Ne=s=>s>=4?"Ã“tima viabilidade":s>=3?"Viabilidade moderada":"Baixa viabilidade";return m?null:e.jsx("div",{className:"flex flex-col min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full px-4 md:px-8 py-6 md:py-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>w(`/nutritionist/patients/${t}/hub?tab=adherence`),className:"-ml-2 w-fit text-[#5f6f52] hover:text-[#5f6f52] hover:bg-[#5f6f52]/10",children:[e.jsx(as,{className:"w-4 h-4 mr-1"}),"Voltar"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(x,{className:"w-6 h-6 md:w-8 md:h-8 text-[#5f6f52]"}),e.jsx("span",{className:"truncate",children:"Metas Nutricionais"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:["Paciente: ",e.jsx("span",{className:"font-medium text-foreground",children:_})]})]}),!o&&!V&&e.jsxs(c,{onClick:()=>C(!0),className:"gap-2 w-full sm:w-auto",children:[e.jsx(x,{className:"w-4 h-4"}),"Nova Meta"]})]})]}),V&&e.jsxs(X,{className:"mb-6 shadow-md",children:[e.jsx(J,{className:"bg-[#fefae0]/50 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-[#5f6f52] flex items-center justify-center",children:e.jsx(x,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx(K,{className:"text-lg",children:"Criar Nova Meta"}),e.jsx(te,{className:"text-sm",children:"Defina uma meta nutricional realista e sustentÃ¡vel"})]})]})}),!o&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>C(!1),className:"hover:bg-red-50 hover:text-red-600",children:e.jsx(Z,{className:"w-4 h-4"})})]})}),e.jsxs(Q,{className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-[#a9b388]/30",children:[e.jsx(x,{className:"w-4 h-4 text-[#5f6f52]"}),e.jsx("h3",{className:"font-semibold text-[#5f6f52]",children:"InformaÃ§Ãµes BÃ¡sicas"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"goal_type",className:"text-sm font-medium",children:"Tipo de Meta"}),e.jsxs(Ve,{value:a.goal_type,onValueChange:s=>g("goal_type",s),children:[e.jsx(Be,{id:"goal_type",className:"h-10",children:e.jsx(Le,{})}),e.jsxs(Oe,{children:[e.jsx(P,{value:"weight_loss",children:"Perda de Peso"}),e.jsx(P,{value:"weight_gain",children:"Ganho de Peso"}),e.jsx(P,{value:"weight_maintenance",children:"ManutenÃ§Ã£o de Peso"}),e.jsx(P,{value:"body_composition",children:"ComposiÃ§Ã£o Corporal"}),e.jsx(P,{value:"custom",children:"Personalizada"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"initial_weight",className:"text-sm font-medium flex items-center gap-1.5",children:[e.jsx(N,{className:"w-3.5 h-3.5 text-[#5f6f52]"}),"Peso Inicial (kg)"]}),e.jsx(D,{id:"initial_weight",type:"number",step:"0.1",value:a.initial_weight,onChange:s=>g("initial_weight",s.target.value),placeholder:"70.0",className:"h-11 font-semibold bg-[#fefae0]/20"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Peso atual do paciente"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"target_weight",className:"text-sm font-medium flex items-center gap-1.5",children:[e.jsx(x,{className:"w-3.5 h-3.5 text-[#c4661f]"}),"Peso Meta (kg)"]}),e.jsx(D,{id:"target_weight",type:"number",step:"0.1",value:a.target_weight,onChange:s=>g("target_weight",s.target.value),placeholder:"65.0",className:"h-11 font-semibold bg-[#fefae0]/20"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Peso que deseja atingir"})]})]})]}),h&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-[#a9b388]/30",children:[e.jsx(Y,{className:"w-4 h-4 text-[#5f6f52]"}),e.jsx("h3",{className:"font-semibold text-[#5f6f52]",children:"RecomendaÃ§Ã£o de Prazo"})]}),e.jsxs("div",{className:"bg-[#fefae0]/30 border border-[#a9b388]/40 rounded-lg p-4",children:[e.jsxs("div",{className:"text-sm text-foreground mb-3",children:["Para ",a.goal_type==="weight_loss"?"perder":"ganhar"," ",e.jsxs("strong",{children:[h.weightChange.toFixed(1),"kg"]})," de forma saudÃ¡vel:"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white p-3 rounded border border-[#c4661f]/30 hover:border-[#c4661f]/60 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{className:"w-4 h-4 text-[#c4661f]"}),e.jsx("div",{className:"text-xs font-semibold text-[#c4661f] uppercase",children:"Prazo MÃ­nimo"})]}),e.jsxs("div",{className:"text-xl font-bold text-foreground mb-1",children:[h.minDays," dias"]}),e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["atÃ© ",new Date(h.minDate).toLocaleDateString("pt-BR")]}),e.jsx(c,{variant:"outline",size:"sm",className:"w-full text-xs h-8",onClick:()=>g("target_date",h.minDate),children:"Usar este prazo"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1.5",children:"Agressivo"})]}),e.jsxs("div",{className:"bg-[#5f6f52]/5 p-3 rounded border border-[#5f6f52]/40 hover:border-[#5f6f52] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(S,{className:"w-4 h-4 text-[#5f6f52]"}),e.jsx("div",{className:"text-xs font-semibold text-[#5f6f52] uppercase",children:"Prazo Ideal"})]}),e.jsxs("div",{className:"text-xl font-bold text-foreground mb-1",children:[h.idealDays," dias"]}),e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["atÃ© ",new Date(h.idealDate).toLocaleDateString("pt-BR")]}),e.jsx(c,{size:"sm",className:"w-full bg-[#5f6f52] hover:bg-[#5f6f52]/90 text-white text-xs h-8",onClick:()=>g("target_date",h.idealDate),children:"Usar este prazo (Recomendado)"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1.5",children:"SustentÃ¡vel"})]})]}),e.jsx("div",{className:"bg-[#5f6f52]/10 rounded p-2.5 mt-3",children:e.jsxs("p",{className:"text-xs text-foreground/80",children:[e.jsx("strong",{children:"ðŸ’¡ Dica:"})," O prazo ideal considera um dÃ©ficit moderado e seguro para resultados sustentÃ¡veis."]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-[#a9b388]/30",children:[e.jsx(Y,{className:"w-4 h-4 text-[#5f6f52]"}),e.jsx("h3",{className:"font-semibold text-[#5f6f52]",children:"Cronograma"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"start_date",className:"text-sm font-medium",children:"Data de InÃ­cio"}),e.jsx(D,{id:"start_date",type:"date",value:a.start_date,onChange:s=>g("start_date",s.target.value),className:"h-10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"target_date",className:"text-sm font-medium",children:"Data Meta"}),e.jsx(D,{id:"target_date",type:"date",value:a.target_date,onChange:s=>g("target_date",s.target.value),min:a.start_date,className:"h-10"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-[#a9b388]/30",children:[e.jsx(j,{className:"w-4 h-4 text-[#5f6f52]"}),e.jsx("h3",{className:"font-semibold text-[#5f6f52]",children:"ObservaÃ§Ãµes"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"description",className:"text-sm font-medium",children:"ObservaÃ§Ãµes (Opcional)"}),e.jsx(qe,{id:"description",value:a.description,onChange:s=>g("description",s.target.value),placeholder:"Ex: RestriÃ§Ãµes alimentares, preferÃªncias de exercÃ­cios...",rows:3,className:"resize-none"})]})]}),(L||d)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-[#a9b388]/30",children:[e.jsx(j,{className:"w-4 h-4 text-[#5f6f52]"}),e.jsx("h3",{className:"font-semibold text-[#5f6f52]",children:"AnÃ¡lise de Viabilidade"})]}),L&&e.jsxs("div",{className:"text-center py-6 bg-[#fefae0]/30 rounded-lg border border-[#a9b388]/40",children:[e.jsx(j,{className:"w-6 h-6 animate-spin text-[#5f6f52] mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Calculando viabilidade da meta..."})]}),d&&!L&&e.jsxs(ae,{className:z("shadow-sm",je(d.viability_score)),children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-semibold",children:Ne(d.viability_score)}),e.jsxs(G,{variant:"outline",className:"text-xs",children:[d.viability_score,"/5"]})]}),d.warnings&&d.warnings.length>0&&e.jsx("div",{className:"space-y-1 mt-2",children:d.warnings.map((s,r)=>e.jsxs("div",{className:"flex items-start gap-1.5 text-sm",children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:s.message})]},r))}),d.viability_notes&&e.jsx("div",{className:"text-xs whitespace-pre-line mt-2 pt-2 border-t opacity-80",children:d.viability_notes})]})})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[!o&&e.jsx(c,{variant:"outline",onClick:()=>C(!1),children:"Cancelar"}),e.jsx(c,{onClick:ge,disabled:u||!d,className:"bg-[#5f6f52] hover:bg-[#5f6f52]/90 text-white",children:u?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2 animate-spin"}),"Criando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Criar Meta"]})})]})]})]}),o&&!V&&e.jsx(rs,{goal:o,onUpdateProgress:()=>M(!0),onComplete:ue,onPause:pe,onCancel:()=>U(!0)}),R&&R.length>0&&e.jsxs(X,{className:"mt-6 shadow-md",children:[e.jsx(J,{className:"bg-[#fefae0]/30 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-[#5f6f52]"}),e.jsxs("div",{children:[e.jsx(K,{children:"HistÃ³rico de Metas"}),e.jsx(te,{className:"text-sm",children:"Metas anteriores do paciente"})]})]})}),e.jsx(Q,{className:"pt-4",children:e.jsx("div",{className:"space-y-2",children:R.map(s=>e.jsx(is,{goal:s},s.id))})})]}),e.jsx(_e,{open:xe,onOpenChange:M,children:e.jsxs(Ce,{className:"sm:max-w-md",children:[e.jsx(De,{className:"pb-3 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-[#5f6f52] flex items-center justify-center",children:e.jsx(N,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx(Pe,{children:"Atualizar Progresso"}),e.jsx(Se,{className:"text-sm",children:"Registre o peso atual do paciente"})]})]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[o&&e.jsxs("div",{className:"bg-[#fefae0]/40 p-3 rounded-lg border border-[#a9b388]/40",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1.5",children:[e.jsx("span",{className:"text-muted-foreground",children:"Peso anterior:"}),e.jsxs("span",{className:"font-bold text-[#5f6f52]",children:[o.current_weight?.toFixed(1)," kg"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Meta:"}),e.jsxs("span",{className:"font-semibold text-[#c4661f]",children:[o.target_weight?.toFixed(1)," kg"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"new_weight",className:"text-sm font-medium flex items-center gap-1.5",children:[e.jsx(N,{className:"w-3.5 h-3.5 text-[#5f6f52]"}),"Novo Peso (kg)"]}),e.jsx(D,{id:"new_weight",type:"number",step:"0.1",value:A,onChange:s=>q(s.target.value),placeholder:"Ex: 68.5",className:"h-12 text-lg font-semibold text-center",autoFocus:!0}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Digite o peso medido hoje"})]})]}),e.jsxs(Fe,{className:"gap-2",children:[e.jsx(c,{variant:"outline",onClick:()=>{M(!1),q("")},disabled:u,children:"Cancelar"}),e.jsx(c,{onClick:fe,disabled:u||!A,className:"bg-[#5f6f52] hover:bg-[#5f6f52]/90 text-white",children:u?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Salvar"]})})]})]})}),e.jsx(ke,{open:he,onOpenChange:U,children:e.jsxs(Me,{children:[e.jsxs(Ae,{children:[e.jsx(Ee,{children:"Cancelar meta?"}),e.jsx(ze,{children:"Tem certeza que deseja cancelar esta meta? Esta aÃ§Ã£o nÃ£o pode ser desfeita."})]}),e.jsxs(Ge,{children:[e.jsx(Ie,{children:"NÃ£o, manter meta"}),e.jsx(Te,{onClick:be,className:"bg-red-600 hover:bg-red-700",children:"Sim, cancelar meta"})]})]})})]})})},rs=({goal:t,onUpdateProgress:w,onComplete:l,onPause:m,onCancel:v})=>{const u=ce(t.goal_type),p=Qe(t.target_date),_=Ye(t),I=t.current_weight-t.target_weight,F=Math.abs(I);return e.jsxs(X,{className:"shadow-md bg-gradient-to-br from-[#fefae0]/30 to-white",children:[e.jsx(J,{className:"bg-[#5f6f52] text-white rounded-t-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/10 flex items-center justify-center",children:e.jsx(u,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(K,{className:"text-lg font-bold mb-1",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(G,{className:"bg-white/20 text-white border-0 text-xs",children:[e.jsx(j,{className:"w-3 h-3 mr-1"}),"Em Andamento"]}),e.jsx("span",{className:"text-xs text-white/70",children:new Date(t.start_date).toLocaleDateString("pt-BR")})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"secondary",size:"sm",onClick:w,className:"bg-white/90 text-[#5f6f52] hover:bg-white text-xs h-8",children:[e.jsx(N,{className:"w-3.5 h-3.5 mr-1.5"}),"Atualizar"]}),e.jsx(c,{variant:"secondary",size:"sm",onClick:l,className:"bg-[#a9b388] text-white hover:bg-[#a9b388]/90 h-8 px-2",children:e.jsx(S,{className:"w-4 h-4"})})]})]})}),e.jsxs(Q,{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"bg-[#fefae0]/40 p-4 rounded-lg border border-[#a9b388]/40",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-muted-foreground uppercase",children:"Progresso"}),e.jsxs("span",{className:"text-2xl font-bold text-[#5f6f52]",children:[t.progress_percentage?.toFixed(1)||0,"%"]})]}),e.jsx(Ue,{value:t.progress_percentage||0,className:"h-3 mb-2"}),_&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(G,{variant:"outline",className:z("text-xs",_.color),children:_.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.progress_percentage>=100?"ConcluÃ­da!":"Em progresso"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border border-[#a9b388]/30 hover:border-[#5f6f52]/50 transition-colors",children:[e.jsx(N,{className:"w-4 h-4 text-[#5f6f52] mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-bold text-foreground",children:t.current_weight?.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Peso Atual"})]}),e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border border-[#5f6f52]/40 hover:border-[#5f6f52] transition-colors",children:[e.jsx(x,{className:"w-4 h-4 text-[#5f6f52] mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-bold text-[#5f6f52]",children:t.target_weight?.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Meta"})]}),e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border border-[#c4661f]/30 hover:border-[#c4661f]/50 transition-colors",children:[e.jsx(oe,{className:"w-4 h-4 text-[#c4661f] mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-bold text-[#c4661f]",children:F.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Faltam"})]}),e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border border-[#a9b388]/40 hover:border-[#a9b388] transition-colors",children:[e.jsx(Y,{className:"w-4 h-4 text-[#a9b388] mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-bold text-foreground",children:p>0?p:0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Dias"})]})]}),(t.daily_calorie_goal||t.required_daily_deficit)&&e.jsxs("div",{className:"bg-[#fefae0]/30 border border-[#a9b388]/40 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ie,{className:"w-4 h-4 text-[#c4661f]"}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Plano Nutricional"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.daily_calorie_goal&&e.jsxs("div",{className:"bg-white/60 p-2.5 rounded border border-[#a9b388]/30",children:[e.jsx("span",{className:"text-xs text-muted-foreground block mb-0.5",children:"Meta CalÃ³rica DiÃ¡ria"}),e.jsx("span",{className:"text-lg font-bold text-foreground",children:Math.round(t.daily_calorie_goal)}),e.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"kcal"})]}),t.required_daily_deficit&&e.jsxs("div",{className:"bg-white/60 p-2.5 rounded border border-[#a9b388]/30",children:[e.jsx("span",{className:"text-xs text-muted-foreground block mb-0.5",children:"DÃ©ficit NecessÃ¡rio"}),e.jsx("span",{className:"text-lg font-bold text-foreground",children:Math.round(Math.abs(t.required_daily_deficit))}),e.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"kcal/dia"})]})]})]}),t.warnings&&t.warnings.length>0&&e.jsxs(ae,{className:"bg-yellow-50/50 border-yellow-300",children:[e.jsx(le,{className:"h-4 w-4 text-yellow-700"}),e.jsxs(re,{children:[e.jsx("div",{className:"font-semibold text-yellow-900 mb-1.5 text-sm",children:"Pontos de AtenÃ§Ã£o"}),t.warnings.map((T,o)=>e.jsxs("div",{className:"flex items-start gap-1.5 text-sm text-yellow-900 mb-1",children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:T.message})]},o))]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-[#a9b388]/30",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:m,className:"flex-1 text-xs h-9",children:[e.jsx(ne,{className:"w-3.5 h-3.5 mr-1.5"}),"Pausar"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:v,className:"flex-1 text-xs h-9 text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(Z,{className:"w-3.5 h-3.5 mr-1.5"}),"Cancelar"]})]})]})]})},is=({goal:t})=>{const w=ce(t.goal_type),l={completed:{label:"ConcluÃ­da",badgeColor:"bg-[#a9b388] text-white",borderColor:"border-[#a9b388]/40",bgColor:"bg-[#a9b388]/5",icon:S},cancelled:{label:"Cancelada",badgeColor:"bg-red-100 text-red-800",borderColor:"border-red-200",bgColor:"bg-red-50/30",icon:Z},paused:{label:"Pausada",badgeColor:"bg-yellow-100 text-yellow-800",borderColor:"border-yellow-200",bgColor:"bg-yellow-50/30",icon:ne}},m=l[t.status]||l.completed,v=m.icon;return e.jsxs("div",{className:z("flex items-center gap-3 p-3 rounded-lg border hover:border-[#5f6f52]/50 transition-colors",m.bgColor,m.borderColor),children:[e.jsx("div",{className:"w-9 h-9 rounded bg-[#fefae0] flex items-center justify-center flex-shrink-0 border border-[#a9b388]/30",children:e.jsx(w,{className:"w-4 h-4 text-[#5f6f52]"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-sm text-foreground truncate",children:t.title}),e.jsxs(G,{className:z("text-xs border-0",m.badgeColor),children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),m.label]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-3 h-3"}),t.initial_weight,"kg â†’ ",t.target_weight,"kg"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[t.progress_percentage?.toFixed(1)||0,"%"]}),t.completion_date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(t.completion_date).toLocaleDateString("pt-BR")})]})]})]})]})},ce=t=>({weight_loss:oe,weight_gain:Re,weight_maintenance:N,body_composition:j,custom:x})[t]||x;export{ys as default};
