import{s as u}from"./index-DL6VMzkS.js";import{l as f}from"./query-helpers-mbysFH2_.js";const c=20;async function p(t,r=0,e=null){if(!t||t.trim().length<2)return{data:[],hasMore:!1,total:0};const a=r*c,s=c;try{let o=u.from("foods").select("id, name, group, description, source, calories, protein, carbs, fat, fiber, sodium, food_measures(*)",{count:"exact"}).eq("is_active",!0).ilike("name",`%${t.trim()}%`).order("name",{ascending:!0}).range(a,a+s-1);e&&(o=o.eq("source",e));const{data:d,error:i,count:n}=await o;if(i)throw i;return{data:d||[],hasMore:a+s<(n||0),total:n||0}}catch(o){throw f("Error searching foods",o),o}}async function g(t){try{const{data:r,error:e}=await u.from("foods").insert([t]).select("id, name, group, description, source, calories, protein, carbs, fat, fiber, sodium, portion_size").single();if(e)throw e;return{data:r,error:null}}catch(r){return f("Error creating food",r),{data:null,error:r}}}export{g as c,p as s};
