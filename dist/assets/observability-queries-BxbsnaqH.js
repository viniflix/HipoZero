import{s}from"./index-BvWB-6Y-.js";import{l as i}from"./query-helpers-mbysFH2_.js";const d=async({module:o,operation:e,eventType:r="success",latencyMs:a=0,nutritionistId:p=null,patientId:u=null,errorMessage:_=null,metadata:n={}}={})=>{try{const{data:t,error:l}=await s.rpc("log_operational_event",{p_module:o,p_operation:e,p_event_type:r,p_latency_ms:Math.max(0,Number(a||0)),p_nutritionist_id:p,p_patient_id:u,p_error_message:_,p_metadata:n&&typeof n=="object"?n:{}});if(l)throw l;return{data:t,error:null}}catch(t){return i("Erro ao registrar evento operacional",t),{data:null,error:t}}},h=async({nutritionistId:o=null,windowHours:e=24}={})=>{try{const{data:r,error:a}=await s.rpc("get_operational_health_summary",{p_nutritionist_id:o,p_window_hours:Math.max(1,Number(e||24))});if(a)throw a;return{data:r||null,error:null}}catch(r){return i("Erro ao buscar resumo de observabilidade operacional",r),{data:null,error:r}}};export{h as g,d as l};
